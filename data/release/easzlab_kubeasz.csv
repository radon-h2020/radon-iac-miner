avg_play_size,avg_task_size,change_set_avg,change_set_max,code_churn,code_churn_avg,code_churn_max,commit,commits_count,committed_at,contributors,defective,filepath,highest_experience,lines_blank,lines_code,lines_comment,loc_added,loc_added_avg,loc_added_max,loc_removed,loc_removed_avg,loc_removed_max,median_hunks_count,minor_contributors,num_block_error_hanling,num_blocks,num_command_calls,num_conditions,num_decisions,num_deprecated_keywords,num_deprecated_modules,num_distinct_modules,num_external_modules,num_fact_modules,num_filters,num_ignore_errors,num_import_playbook,num_import_role,num_import_tasks,num_include,num_include_role,num_include_tasks,num_include_vars,num_keys,num_lookups,num_loops,num_math_operations,num_names_with_vars,num_plays,num_roles,num_sh_commands,num_suspicious_comments,num_tasks,num_tokens,num_unique_names,num_user_interaction,num_vars,path_when_added,repo,text_entropy,tokens,delta_avg_play_size,delta_avg_task_size,delta_lines_blank,delta_lines_code,delta_lines_comment,delta_num_block_error_hanling,delta_num_blocks,delta_num_command_calls,delta_num_conditions,delta_num_decisions,delta_num_deprecated_keywords,delta_num_deprecated_modules,delta_num_distinct_modules,delta_num_external_modules,delta_num_fact_modules,delta_num_filters,delta_num_ignore_errors,delta_num_import_playbook,delta_num_import_role,delta_num_import_tasks,delta_num_include,delta_num_include_role,delta_num_include_tasks,delta_num_include_vars,delta_num_keys,delta_num_lookups,delta_num_loops,delta_num_math_operations,delta_num_names_with_vars,delta_num_plays,delta_num_roles,delta_num_sh_commands,delta_num_suspicious_comments,delta_num_tasks,delta_num_tokens,delta_num_unique_names,delta_num_user_interaction,delta_num_vars,delta_text_entropy
0.0,3.0,4.0,14.0,-11.0,-4.0,9.0,8251c7335ccec680bde05812e69ed617ecdcac78,3.0,1512726231.0,2.0,no,roles/etcd/tasks/main.yml,74.36,6.0,21.0,0.0,14.0,5.0,12.0,25.0,8.0,14.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,79.0,7.0,0.0,0.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.54,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 创建etcd证书目录 file nameetcetcdssl statedirectori name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,2.0,1.0,4.0,8251c7335ccec680bde05812e69ed617ecdcac78,3.0,1512726231.0,2.0,yes,roles/deploy/tasks/main.yml,80.0,7.0,22.0,1.0,6.0,2.0,4.0,4.0,1.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,97.0,7.0,0.0,0.0,roles/ca/tasks/main.yml,easzlab/kubeasz,5.38,name prepar dir file name item statedirectori item bin dir dir base dir rolespreparefil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 准备ca配置文件 templat path dest dir path name 准备ca签名请求 templat path dest dir path name 证书和私钥 shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备分发 ca证书 shell dir base dir rolespreparefil name kubedns的部署文件 path templat path dest base dir path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,4.0,14.0,3.0,3.0,3.0,8251c7335ccec680bde05812e69ed617ecdcac78,1.0,1512726231.0,1.0,no,roles/lb/tasks/main.yml,100.0,10.0,22.0,0.0,5.0,5.0,5.0,2.0,2.0,2.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,75.0,10.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,4.91,name apt更新缓存刷新 apt updat cachey cach valid time name haproxi apt namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name haproxi templat path path name keepaliv apt namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,10.0,3.0,13.0,8251c7335ccec680bde05812e69ed617ecdcac78,3.0,1512726231.0,2.0,yes,roles/docker/tasks/main.yml,85.29,8.0,33.0,2.0,22.0,7.0,13.0,12.0,4.0,11.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,119.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.48,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name apt更新缓存刷新 apt updat cachey cach valid time tag dockertag name 安装轻量json处理程序 apt namejq statelatest tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,4.0,1.0,6.0,8251c7335ccec680bde05812e69ed617ecdcac78,3.0,1512726231.0,2.0,yes,roles/calico/tasks/main.yml,72.73,8.0,30.0,0.0,24.0,8.0,12.0,20.0,7.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,112.0,9.0,0.0,0.0,roles/calico/tasks/main.yml,easzlab/kubeasz,5.96,name 创建calico 相关目录 file name item statedirectori item etccalicossl path name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name calico systemd unit templat path path name 启动calico shell systemctl daemonreload systemctl enabl caliconod systemctl restart caliconod name 下载calico cni plugins和calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calico calicoipam loopback calicoctl name calicoctl配置文件 templat path path name cni配置文件 templat path path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,14.0,4.0,22.0,8251c7335ccec680bde05812e69ed617ecdcac78,4.0,1512726231.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,18.0,91.0,10.0,34.0,8.0,22.0,20.0,5.0,17.0,2.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,25.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,1.0,0.0,0.0,0.0,0.0,16.0,0.0,25.0,341.0,17.0,0.0,0.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.42,name kubelet和kubeproxi 二进制 copi src base dir bin item dest bin dir item mode item kubelet kubeproxi name kubeletbootstrapset shell sleep bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap node defin node node ignor error name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubelet的工作目录 file namevarlibkubelet statedirectori name 创建kubelet的systemd unit文件 templat path path name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet name approvekubeletcsr shell sleep bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv node defin node node ignor error name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubeproxy的工作目录 file namevarlibkubeproxi statedirectori name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi name 创建calicokubecontrollers目录 tag calicocontrol file namerootlocalkubesystemcalico statedirectori name 准备rbac 配置文件 tag calicocontrol copi path path name path tag calicocontrol templat path path name 运行calicokubecontrol tag calicocontrol shell sleep bin dir kubectl creat path bin dir kubectl creat path node defin node node ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,4.0,14.0,0.0,0.0,0.0,8251c7335ccec680bde05812e69ed617ecdcac78,1.0,1512726231.0,1.0,yes,roles/prepare/tasks/main.yml,100.0,4.0,22.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,65.0,4.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.09,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell echo export path bin dir path etcprofil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 分发ca copi src item dest dir item mode item path path path path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,0.0,0.0,0.0,8251c7335ccec680bde05812e69ed617ecdcac78,0.0,1512726231.0,0.0,no,roles/kube-master/tasks/main.yml,0.0,14.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,15.0,138.0,15.0,0.0,0.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,5.62,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl kubeproxi kubelet name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name daemonreload shell systemctl daemonreload name enablekubeapiserv shell systemctl enabl kubeapiserv name enablekubecontrollermanag shell systemctl enabl kubecontrollermanag name enablekubeschedul shell systemctl enabl kubeschedul name startkubeapiserv shell systemctl restart kubeapiserv name startkubecontrollermanag shell systemctl restart kubecontrollermanag name startkubeschedul shell systemctl restart kubeschedul,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,14.0,0.0,0.0,0.0,8251c7335ccec680bde05812e69ed617ecdcac78,0.0,1512726231.0,0.0,no,roles/kubectl/tasks/main.yml,0.0,3.0,25.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,7.0,100.0,7.0,0.0,0.0,roles/kubectl/tasks/main.yml,easzlab/kubeasz,5.35,name 下载kubectl二进制 copi src base dir binkubectl dest bin dir kubectl mode name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,3.0,13.0,0.0,0.0,0.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,0.0,1513592193.0,0.0,no,roles/etcd/tasks/main.yml,0.0,6.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,79.0,7.0,0.0,0.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.54,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 创建etcd证书目录 file nameetcetcdssl statedirectori name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,13.0,6.0,6.0,6.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,1.0,1513592193.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,7.0,27.0,2.0,7.0,7.0,7.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,103.0,7.0,0.0,0.0,roles/ca/tasks/main.yml,easzlab/kubeasz,5.47,name prepar dir file name item statedirectori item bin dir dir base dir rolespreparefil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 准备ca配置文件 templat path dest dir path name 准备ca签名请求 templat path dest dir path name 证书和私钥 shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备分发 ca证书 copi src dir item dest base dir rolespreparefil item forceno item path path path path name kubedns的部署文件 path templat path dest base dir path,0.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.09
0.0,3.0,3.0,13.0,26.0,3.0,11.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,8.0,1513592193.0,1.0,yes,roles/lb/tasks/main.yml,100.0,15.0,41.0,2.0,48.0,6.0,14.0,22.0,3.0,5.0,3.0,0.0,0.0,0.0,0.0,16.0,7.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,16.0,166.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.3,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name yum安装 psmisc yum namepsmisc statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,0.0,1.0,5.0,19.0,2.0,0.0,0.0,0.0,14.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,91.0,6.0,0.0,0.0,0.39
0.0,4.0,3.0,13.0,7.0,2.0,5.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,4.0,1513592193.0,1.0,yes,roles/docker/tasks/main.yml,100.0,9.0,38.0,3.0,14.0,4.0,5.0,7.0,2.0,3.0,2.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,142.0,10.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.76,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name 缓存ansilb setup信息 setup gather subsetmin tag dockertag name apt安装轻量json处理程序 apt namejq statelatest ansibl distribut ubuntu ansibl distribut major version tag dockertag name yum安装轻量json处理程序 yum namejq statelatest ansibl distribut cent ansibl distribut major version tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,1.0,1.0,5.0,1.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,1.0,0.0,0.0,0.28
0.0,3.0,3.0,13.0,0.0,0.0,0.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,0.0,1513592193.0,0.0,yes,roles/calico/tasks/main.yml,0.0,8.0,30.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,112.0,9.0,0.0,0.0,roles/calico/tasks/main.yml,easzlab/kubeasz,5.96,name 创建calico 相关目录 file name item statedirectori item etccalicossl path name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name calico systemd unit templat path path name 启动calico shell systemctl daemonreload systemctl enabl caliconod systemctl restart caliconod name 下载calico cni plugins和calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calico calicoipam loopback calicoctl name calicoctl配置文件 templat path path name cni配置文件 templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,13.0,0.0,0.0,0.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,0.0,1513592193.0,0.0,no,roles/kube-node/tasks/main.yml,0.0,18.0,91.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,25.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,1.0,0.0,0.0,0.0,0.0,16.0,0.0,25.0,341.0,17.0,0.0,0.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.42,name kubelet和kubeproxi 二进制 copi src base dir bin item dest bin dir item mode item kubelet kubeproxi name kubeletbootstrapset shell sleep bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap node defin node node ignor error name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubelet的工作目录 file namevarlibkubelet statedirectori name 创建kubelet的systemd unit文件 templat path path name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet name approvekubeletcsr shell sleep bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv node defin node node ignor error name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubeproxy的工作目录 file namevarlibkubeproxi statedirectori name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi name 创建calicokubecontrollers目录 tag calicocontrol file namerootlocalkubesystemcalico statedirectori name 准备rbac 配置文件 tag calicocontrol copi path path name path tag calicocontrol templat path path name 运行calicokubecontrol tag calicocontrol shell sleep bin dir kubectl creat path bin dir kubectl creat path node defin node node ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,13.0,30.0,6.0,20.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,5.0,1513592193.0,2.0,yes,roles/prepare/tasks/main.yml,91.18,8.0,45.0,5.0,32.0,6.0,20.0,2.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,125.0,8.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.91,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 分发ca copi src item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name 删除centos默认安装 ansibl distribut cent yum name item stateabs item firewalld firewalldfilesystem pythonfirewal name selinux shell setenforc echo selinuxdis etcselinuxconfig ansibl distribut cent ignor error,0.0,0.0,4.0,23.0,3.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,60.0,4.0,0.0,0.0,0.82
0.0,3.0,3.0,13.0,0.0,0.0,0.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,0.0,1513592193.0,0.0,no,roles/kube-master/tasks/main.yml,0.0,14.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,15.0,138.0,15.0,0.0,0.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,5.62,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl kubeproxi kubelet name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name daemonreload shell systemctl daemonreload name enablekubeapiserv shell systemctl enabl kubeapiserv name enablekubecontrollermanag shell systemctl enabl kubecontrollermanag name enablekubeschedul shell systemctl enabl kubeschedul name startkubeapiserv shell systemctl restart kubeapiserv name startkubecontrollermanag shell systemctl restart kubecontrollermanag name startkubeschedul shell systemctl restart kubeschedul,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,13.0,0.0,0.0,0.0,85c492fdba7fcb1e7277cbd9846799cebc9d3b33,0.0,1513592193.0,0.0,no,roles/kubectl/tasks/main.yml,0.0,3.0,25.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,7.0,100.0,7.0,0.0,0.0,roles/kubectl/tasks/main.yml,easzlab/kubeasz,5.35,name 下载kubectl二进制 copi src base dir binkubectl dest bin dir kubectl mode name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,no,roles/etcd/tasks/main.yml,0.0,6.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,79.0,7.0,0.0,0.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.54,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 创建etcd证书目录 file nameetcetcdssl statedirectori name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,7.0,27.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,103.0,7.0,0.0,0.0,roles/ca/tasks/main.yml,easzlab/kubeasz,5.47,name prepar dir file name item statedirectori item bin dir dir base dir rolespreparefil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 准备ca配置文件 templat path dest dir path name 准备ca签名请求 templat path dest dir path name 证书和私钥 shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备分发 ca证书 copi src dir item dest base dir rolespreparefil item forceno item path path path path name kubedns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,41.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,7.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,16.0,166.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.3,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name yum安装 psmisc yum namepsmisc statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,yes,roles/docker/tasks/main.yml,0.0,9.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,142.0,10.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.76,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name 缓存ansilb setup信息 setup gather subsetmin tag dockertag name apt安装轻量json处理程序 apt namejq statelatest ansibl distribut ubuntu ansibl distribut major version tag dockertag name yum安装轻量json处理程序 yum namejq statelatest ansibl distribut cent ansibl distribut major version tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,yes,roles/calico/tasks/main.yml,0.0,8.0,30.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,112.0,9.0,0.0,0.0,roles/calico/tasks/main.yml,easzlab/kubeasz,5.96,name 创建calico 相关目录 file name item statedirectori item etccalicossl path name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name calico systemd unit templat path path name 启动calico shell systemctl daemonreload systemctl enabl caliconod systemctl restart caliconod name 下载calico cni plugins和calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calico calicoipam loopback calicoctl name calicoctl配置文件 templat path path name cni配置文件 templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,no,roles/kube-node/tasks/main.yml,0.0,18.0,91.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,25.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,1.0,0.0,0.0,0.0,0.0,16.0,0.0,25.0,341.0,17.0,0.0,0.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.42,name kubelet和kubeproxi 二进制 copi src base dir bin item dest bin dir item mode item kubelet kubeproxi name kubeletbootstrapset shell sleep bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap node defin node node ignor error name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubelet的工作目录 file namevarlibkubelet statedirectori name 创建kubelet的systemd unit文件 templat path path name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet name approvekubeletcsr shell sleep bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv node defin node node ignor error name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubeproxy的工作目录 file namevarlibkubeproxi statedirectori name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi name 创建calicokubecontrollers目录 tag calicocontrol file namerootlocalkubesystemcalico statedirectori name 准备rbac 配置文件 tag calicocontrol copi path path name path tag calicocontrol templat path path name 运行calicokubecontrol tag calicocontrol shell sleep bin dir kubectl creat path bin dir kubectl creat path node defin node node ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,12.0,44.0,22.0,44.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,2.0,1514592154.0,1.0,no,roles/harbor/tasks/main.yml,100.0,7.0,34.0,3.0,45.0,22.0,44.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,5.0,3.0,12.0,8.0,8.0,8.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,1.0,1514592154.0,1.0,yes,roles/prepare/tasks/main.yml,100.0,10.0,49.0,7.0,8.0,8.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,29.0,0.0,5.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,136.0,10.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.01,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 分发ca copi src item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name 删除centos默认安装 ansibl distribut cent yum name item stateabs item firewalld firewalldfilesystem pythonfirewal name selinux shell setenforc echo selinuxdis etcselinuxconfig ansibl distribut cent ignor error name 设置系统参数 copi path path name 生效系统参数 shell sysctl path,0.0,-1.0,2.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,11.0,2.0,0.0,0.0,0.1
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,no,roles/kube-master/tasks/main.yml,0.0,14.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,15.0,138.0,15.0,0.0,0.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,5.62,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl kubeproxi kubelet name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name daemonreload shell systemctl daemonreload name enablekubeapiserv shell systemctl enabl kubeapiserv name enablekubecontrollermanag shell systemctl enabl kubecontrollermanag name enablekubeschedul shell systemctl enabl kubeschedul name startkubeapiserv shell systemctl restart kubeapiserv name startkubecontrollermanag shell systemctl restart kubecontrollermanag name startkubeschedul shell systemctl restart kubeschedul,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,12.0,0.0,0.0,0.0,e2706618b9ac3f571d25afbf195b2c45c79a9feb,0.0,1514592154.0,0.0,no,roles/kubectl/tasks/main.yml,0.0,3.0,25.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,7.0,100.0,7.0,0.0,0.0,roles/kubectl/tasks/main.yml,easzlab/kubeasz,5.35,name 下载kubectl二进制 copi src base dir binkubectl dest bin dir kubectl mode name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,12.0,12.0,12.0,de743d7fd17f79621fd948251e9aea42e8d26543,1.0,1519610208.0,1.0,no,roles/etcd/tasks/main.yml,100.0,7.0,28.0,4.0,12.0,12.0,12.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,94.0,8.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.76,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 注册变量result command path regist result ignor error name 创建etcd证书目录 file nameetcetcdssl statedirectori resultfail name 创建etcd证书请求 templat path path resultfail name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd resultfail name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,0.0,0.0,1.0,7.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,1.0,0.0,1.0,0.22
0.0,4.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,7.0,27.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,103.0,7.0,0.0,0.0,roles/ca/tasks/main.yml,easzlab/kubeasz,5.47,name prepar dir file name item statedirectori item bin dir dir base dir rolespreparefil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 准备ca配置文件 templat path dest dir path name 准备ca签名请求 templat path dest dir path name 证书和私钥 shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备分发 ca证书 copi src dir item dest base dir rolespreparefil item forceno item path path path path name kubedns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,41.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,7.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,16.0,166.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.3,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name yum安装 psmisc yum namepsmisc statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,yes,roles/docker/tasks/main.yml,0.0,9.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,142.0,10.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.76,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name 缓存ansilb setup信息 setup gather subsetmin tag dockertag name apt安装轻量json处理程序 apt namejq statelatest ansibl distribut ubuntu ansibl distribut major version tag dockertag name yum安装轻量json处理程序 yum namejq statelatest ansibl distribut cent ansibl distribut major version tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,16.0,28.0,28.0,28.0,de743d7fd17f79621fd948251e9aea42e8d26543,1.0,1519610208.0,1.0,no,roles/flannel/tasks/main.yml,100.0,5.0,21.0,2.0,28.0,28.0,28.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,70.0,5.0,0.0,0.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.66,name 创建flannel cni 相关目录 file name item statedirectori item path rootlocalkubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name flannel网络 shell bin dir kubectl creat rootlocalkubesystemflannel sleep node defin node node ignor error name 删除默认cni配置 file path stateabs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,16.0,13.0,4.0,8.0,de743d7fd17f79621fd948251e9aea42e8d26543,3.0,1519610208.0,1.0,yes,roles/calico/tasks/main.yml,100.0,10.0,34.0,7.0,26.0,9.0,20.0,13.0,4.0,12.0,1.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,11.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,11.0,129.0,11.0,0.0,0.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.14,name 创建calico 相关目录 file name item statedirectori item etccalicossl rootlocalkubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name calico网络 shell bin dir kubectl creat rootlocalkubesystemcalico sleep node defin node node ignor error name 删除默认cni配置 file path stateabs name 删除默认cni插件网卡mynet shell link del mynet ignor error name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,2.0,4.0,7.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,17.0,2.0,0.0,0.0,0.18
0.0,3.0,4.0,16.0,-12.0,-6.0,2.0,de743d7fd17f79621fd948251e9aea42e8d26543,2.0,1519610208.0,2.0,no,roles/kube-node/tasks/main.yml,58.97,15.0,85.0,8.0,33.0,16.0,17.0,45.0,22.0,30.0,5.5,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,21.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,52.0,0.0,2.0,0.0,0.0,0.0,0.0,15.0,0.0,21.0,304.0,13.0,0.0,0.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.42,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback name kubeletbootstrapset shell sleep bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap node defin node node ignor error name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag kubelet name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet tag kubelet name approvekubeletcsr shell sleep bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv node defin node node ignor error name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path path name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi,0.0,0.0,-3.0,-6.0,-2.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,-4.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-11.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,-4.0,-37.0,-4.0,0.0,0.0,0.0
0.0,4.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,no,roles/harbor/tasks/main.yml,0.0,7.0,34.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,5.0,2.0,3.0,de743d7fd17f79621fd948251e9aea42e8d26543,3.0,1519610208.0,2.0,yes,roles/prepare/tasks/main.yml,57.14,11.0,52.0,8.0,6.0,2.0,3.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,5.0,0.0,0.0,0.0,0.0,3.0,0.0,11.0,143.0,11.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.08,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 分发ca copi src item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name 删除centos默认安装 ansibl distribut cent yum name item stateabs item firewalld firewalldfilesystem pythonfirewal name selinux shell setenforc echo selinuxdis etcselinuxconfig ansibl distribut cent ignor error name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres name 生效系统参数 shell sysctl path ignor error,0.0,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,7.0,1.0,0.0,0.0,0.07
0.0,3.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,no,roles/kube-master/tasks/main.yml,0.0,14.0,41.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,15.0,138.0,15.0,0.0,0.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,5.62,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl kubeproxi kubelet name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name daemonreload shell systemctl daemonreload name enablekubeapiserv shell systemctl enabl kubeapiserv name enablekubecontrollermanag shell systemctl enabl kubecontrollermanag name enablekubeschedul shell systemctl enabl kubeschedul name startkubeapiserv shell systemctl restart kubeapiserv name startkubecontrollermanag shell systemctl restart kubecontrollermanag name startkubeschedul shell systemctl restart kubeschedul,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,de743d7fd17f79621fd948251e9aea42e8d26543,0.0,1519610208.0,0.0,no,roles/kubectl/tasks/main.yml,0.0,3.0,25.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,7.0,100.0,7.0,0.0,0.0,roles/kubectl/tasks/main.yml,easzlab/kubeasz,5.35,name 下载kubectl二进制 copi src base dir binkubectl dest bin dir kubectl mode name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,25.0,0.0,0.0,0.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,0.0,1521532333.0,0.0,no,roles/etcd/tasks/main.yml,0.0,7.0,28.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,94.0,8.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.76,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 注册变量result command path regist result ignor error name 创建etcd证书目录 file nameetcetcdssl statedirectori resultfail name 创建etcd证书请求 templat path path resultfail name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd resultfail name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,25.0,89.0,44.0,86.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,2.0,1521532333.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,15.0,99.0,11.0,103.0,52.0,96.0,14.0,7.0,10.0,7.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,25.0,0.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,25.0,350.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.04,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 注册变量result command dir path regist result ignor error name 准备ca配置文件 templat path dest dir path resultfail name 准备ca签名请求 templat path dest dir path resultfail name 证书和私钥 resultfail shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name kubedns的部署文件 path templat path dest base dir path,0.0,-1.0,8.0,72.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,-1.0,0.0,0.0,0.0,0.0,16.0,0.0,18.0,247.0,6.0,0.0,1.0,0.57
0.0,3.0,5.0,25.0,-5.0,-5.0,-5.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,1.0,1521532333.0,1.0,yes,roles/lb/tasks/main.yml,100.0,14.0,38.0,1.0,0.0,0.0,0.0,5.0,5.0,5.0,1.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,15.0,152.0,15.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.3,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,0.0,0.0,-1.0,-3.0,-1.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-14.0,-1.0,0.0,0.0,0.0
0.0,4.0,5.0,25.0,0.0,0.0,0.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,0.0,1521532333.0,0.0,yes,roles/docker/tasks/main.yml,0.0,9.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,142.0,10.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.76,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name 缓存ansilb setup信息 setup gather subsetmin tag dockertag name apt安装轻量json处理程序 apt namejq statelatest ansibl distribut ubuntu ansibl distribut major version tag dockertag name yum安装轻量json处理程序 yum namejq statelatest ansibl distribut cent ansibl distribut major version tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,25.0,5.0,2.0,5.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,2.0,1521532333.0,2.0,no,roles/flannel/tasks/main.yml,73.33,6.0,25.0,2.0,10.0,5.0,8.0,5.0,2.0,3.0,2.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,80.0,6.0,0.0,1.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.75,name 创建flannel cni 相关目录 file name item statedirectori item path rootlocalkubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name flannel网络 shell bin dir kubectl creat rootlocalkubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs,0.0,0.0,1.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,1.0,0.0,1.0,0.09
0.0,3.0,5.0,25.0,9.0,3.0,5.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,3.0,1521532333.0,3.0,yes,roles/calico/tasks/main.yml,57.89,12.0,40.0,8.0,14.0,5.0,8.0,5.0,2.0,3.0,2.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,156.0,13.0,0.0,1.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.29,name 创建calico 相关目录 file name item statedirectori item etccalicossl rootlocalkubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name calico网络 shell bin dir kubectl creat rootlocalkubesystemcalico sleep run calico pod path name 删除默认cni配置 file path stateabs name 删除默认cni插件网卡mynet shell link del mynet ignor error name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,2.0,6.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,27.0,2.0,0.0,1.0,0.15
0.0,4.0,5.0,25.0,-45.0,-22.0,4.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,2.0,1521532333.0,2.0,no,roles/kube-node/tasks/main.yml,80.22,11.0,46.0,6.0,23.0,12.0,12.0,68.0,34.0,61.0,7.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,12.0,0.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,2.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,159.0,12.0,0.0,1.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.14,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag kubelet name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet tag kubelet name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi name approvekubeletcsr shell sleep bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv run ignor error,0.0,1.0,-4.0,-39.0,-2.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,-9.0,0.0,0.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-16.0,0.0,0.0,0.0,0.0,0.0,0.0,-10.0,0.0,-9.0,-145.0,-1.0,0.0,1.0,-0.28
0.0,4.0,5.0,25.0,0.0,0.0,0.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,0.0,1521532333.0,0.0,no,roles/harbor/tasks/main.yml,0.0,7.0,34.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,25.0,17.0,3.0,19.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,6.0,1521532333.0,3.0,yes,roles/prepare/tasks/main.yml,61.19,11.0,73.0,5.0,42.0,7.0,30.0,25.0,4.0,11.0,3.5,1.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,187.0,15.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.42,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 安装基础软件包 yum name item stateinstal item vim git wget psmisc nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 shell sed kubectl completiond path echo sourc kubectl complet bash path name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,1.0,0.0,21.0,-3.0,0.0,1.0,0.0,-1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,4.0,0.0,0.0,0.34
0.0,3.0,5.0,25.0,1.0,0.0,10.0,e215f1edd5b384b9f464a638fb8a954c4a4b4dac,3.0,1521532333.0,3.0,no,roles/kube-master/tasks/main.yml,61.7,11.0,42.0,3.0,24.0,8.0,10.0,23.0,8.0,23.0,3.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,156.0,12.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.08,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul name 注册变量result command path regist result ignor error name kubernet 证书签名请求 templat path dest dir path resultfail name kubernet 证书和私钥 resultfail shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run,0.0,0.0,-3.0,1.0,3.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,-3.0,18.0,-3.0,0.0,2.0,0.46
0.0,3.0,3.0,6.0,-4.0,-4.0,-4.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,1.0,1522242321.0,1.0,no,roles/etcd/tasks/main.yml,100.0,7.0,26.0,2.0,8.0,8.0,8.0,12.0,12.0,12.0,5.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,8.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,95.0,8.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.78,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开启etcd服务 shell systemctl daemonreload systemctl enabl etcd systemctl restart etcd,0.0,0.0,0.0,-2.0,-2.0,0.0,0.0,-1.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.02
0.0,3.0,3.0,6.0,-2.0,-2.0,-2.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,1.0,1522242321.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,15.0,98.0,10.0,8.0,8.0,8.0,10.0,10.0,10.0,4.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,25.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,25.0,356.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.1,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name kubedns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,-1.0,-1.0,0.0,0.0,-1.0,6.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.06
0.0,3.0,3.0,6.0,0.0,0.0,0.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,0.0,1522242321.0,0.0,yes,roles/lb/tasks/main.yml,0.0,14.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,15.0,152.0,15.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.3,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 重启haproxy服务 shell systemctl enabl haproxi systemctl restart haproxi name 重启keepalived服务 shell systemctl enabl keepaliv systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,6.0,0.0,0.0,0.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,0.0,1522242321.0,0.0,yes,roles/docker/tasks/main.yml,0.0,9.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,142.0,10.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.76,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开启docker shell systemctl daemonreload systemctl enabl docker systemctl restart docker name 缓存ansilb setup信息 setup gather subsetmin tag dockertag name apt安装轻量json处理程序 apt namejq statelatest ansibl distribut ubuntu ansibl distribut major version tag dockertag name yum安装轻量json处理程序 yum namejq statelatest ansibl distribut cent ansibl distribut major version tag dockertag name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,6.0,0.0,0.0,0.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,0.0,1522242321.0,0.0,no,roles/flannel/tasks/main.yml,0.0,6.0,25.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,80.0,6.0,0.0,1.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.75,name 创建flannel cni 相关目录 file name item statedirectori item path rootlocalkubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name flannel网络 shell bin dir kubectl creat rootlocalkubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,6.0,-5.0,-5.0,-5.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,1.0,1522242321.0,1.0,yes,roles/calico/tasks/main.yml,100.0,11.0,37.0,7.0,0.0,0.0,0.0,5.0,5.0,5.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,147.0,12.0,0.0,1.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.22,name 创建calico 相关目录 file name item statedirectori item etccalicossl rootlocalkubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name calico网络 shell bin dir kubectl creat rootlocalkubesystemcalico sleep run calico pod path name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,-1.0,-3.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-1.0,-9.0,-1.0,0.0,0.0,-0.07
0.0,4.0,3.0,6.0,19.0,5.0,13.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,4.0,1522242321.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,14.0,62.0,6.0,28.0,7.0,17.0,9.0,2.0,4.0,2.5,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,15.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,52.0,0.0,2.0,0.0,0.0,0.0,0.0,8.0,0.0,15.0,218.0,15.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.47,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag kubelet name 开启kubelet shell systemctl daemonreload systemctl enabl kubelet systemctl restart kubelet tag kubelet name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl enabl kubeproxi systemctl restart kubeproxi name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get nodegrep node awk print regist node statu node path readi node path readi schedul disabl retri delay,0.0,0.0,3.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,3.0,0.0,0.0,2.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,3.0,59.0,3.0,0.0,3.0,0.33
0.0,4.0,3.0,6.0,0.0,0.0,0.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,0.0,1522242321.0,0.0,no,roles/harbor/tasks/main.yml,0.0,7.0,34.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,6.0,0.0,0.0,0.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,0.0,1522242321.0,0.0,yes,roles/prepare/tasks/main.yml,0.0,11.0,73.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,187.0,15.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.42,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 安装基础软件包 yum name item stateinstal item vim git wget psmisc nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 shell sed kubectl completiond path echo sourc kubectl complet bash path name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,6.0,-2.0,-2.0,-2.0,51caf57b1e44d1e7ce42dec9dee85ebfca66bcf5,1.0,1522242321.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,11.0,41.0,2.0,7.0,7.0,7.0,9.0,9.0,9.0,3.0,0.0,0.0,0.0,1.0,4.0,2.0,0.0,0.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,159.0,12.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.13,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul name 读取kubernetes证书stat信息 stat path path regist name kubernet 证书签名请求 templat path dest dir path path defin name kubernet 证书和私钥 path defin shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run,0.0,0.0,0.0,-1.0,-1.0,0.0,0.0,-1.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.05
0.0,3.0,2.0,8.0,4.0,4.0,4.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,1.0,1523885429.0,1.0,no,roles/etcd/tasks/main.yml,100.0,8.0,29.0,2.0,5.0,5.0,5.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,99.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.83,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd,0.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,4.0,1.0,0.0,0.0,0.05
0.0,3.0,2.0,8.0,3.0,3.0,3.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,1.0,1523885429.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,15.0,100.0,11.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,26.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,26.0,365.0,14.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.14,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name kubedns的部署文件 path templat path dest base dir path name coredns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,9.0,1.0,0.0,0.0,0.04
0.0,3.0,2.0,8.0,0.0,0.0,0.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,0.0,1523885429.0,0.0,yes,roles/calico/tasks/main.yml,0.0,11.0,37.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,147.0,12.0,0.0,1.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.22,name 创建calico 相关目录 file name item statedirectori item etccalicossl rootlocalkubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name calico网络 shell bin dir kubectl creat rootlocalkubesystemcalico sleep run calico pod path name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,0.0,0.0,0.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,0.0,1523885429.0,0.0,no,roles/harbor/tasks/main.yml,0.0,7.0,34.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,8.0,8.0,8.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,1.0,1523885429.0,1.0,yes,roles/lb/tasks/main.yml,100.0,16.0,44.0,1.0,10.0,10.0,10.0,2.0,2.0,2.0,3.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,17.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,17.0,160.0,17.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.35,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,2.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,2.0,8.0,2.0,0.0,0.0,0.05
0.0,4.0,2.0,8.0,-10.0,-5.0,4.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,2.0,1523885429.0,1.0,yes,roles/docker/tasks/main.yml,100.0,7.0,30.0,3.0,6.0,3.0,5.0,16.0,8.0,15.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,110.0,8.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.41,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,-2.0,-8.0,0.0,0.0,0.0,0.0,-4.0,-2.0,0.0,0.0,-2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,-2.0,-32.0,-2.0,0.0,0.0,-0.35
0.0,4.0,2.0,8.0,0.0,0.0,0.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,0.0,1523885429.0,0.0,no,roles/flannel/tasks/main.yml,0.0,6.0,25.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,80.0,6.0,0.0,1.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.75,name 创建flannel cni 相关目录 file name item statedirectori item path rootlocalkubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name flannel网络 shell bin dir kubectl creat rootlocalkubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,8.0,8.0,8.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,1.0,1523885429.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,16.0,68.0,6.0,10.0,10.0,10.0,2.0,2.0,2.0,4.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,17.0,0.0,0.0,5.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,2.0,0.0,0.0,0.0,0.0,10.0,0.0,17.0,228.0,17.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.46,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag kubelet name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag kubelet name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi tag reloadkubeproxi shell systemctl daemonreload systemctl restart kubeproxi name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get nodegrep node awk print regist node statu node path readi node path readi schedul disabl retri delay,0.0,0.0,2.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,2.0,10.0,2.0,0.0,0.0,-0.01
0.0,6.0,2.0,8.0,11.0,2.0,7.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,5.0,1523885429.0,1.0,yes,roles/prepare/tasks/main.yml,100.0,12.0,82.0,13.0,21.0,4.0,12.0,10.0,2.0,5.0,2.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,12.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,49.0,0.0,7.0,0.0,0.0,0.0,0.0,3.0,0.0,13.0,205.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.44,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path shell sed export pathd etcprofil echo export path bin dir path etcprofil name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 shell sed kubectl completiond path echo sourc kubectl complet bash path name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,0.0,1.0,9.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,1.0,0.0,0.0,0.02
0.0,3.0,2.0,8.0,1.0,1.0,1.0,3bf3908d3ae1fb861e939280fd4fe84bb05539a0,1.0,1523885429.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,11.0,42.0,2.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,4.0,2.0,0.0,0.0,12.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,161.0,12.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.15,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul name 读取kubernetes证书stat信息 stat path path regist name kubernet 证书签名请求 templat path dest dir path path defin name kubernet 证书和私钥 path defin shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.02
0.0,3.0,5.0,36.0,2.0,2.0,2.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/etcd/tasks/main.yml,100.0,8.0,31.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.05
0.0,3.0,5.0,36.0,0.0,0.0,0.0,20ebd73bc491aab5c9945e39d8721232b1105443,0.0,1526035519.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,15.0,100.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,26.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,26.0,365.0,14.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.14,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name kubedns的部署文件 path templat path dest base dir path name coredns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,5.0,36.0,27.0,27.0,27.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/meta/main.yml,100.0,0.0,26.0,0.0,27.0,27.0,27.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,9.0,5.0,36.0,9.0,9.0,9.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/Amazon.yml,100.0,1.0,4.0,3.0,9.0,9.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,36.0,7.0,7.0,7.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/RedHat-6.yml,100.0,1.0,3.0,2.0,7.0,7.0,7.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,36.0,0.0,0.0,0.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,yes,roles/calico/tasks/main.yml,100.0,11.0,37.0,7.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,147.0,12.0,0.0,1.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.22,name 创建calico 相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name calico网络 shell bin dir kubectl creat optkubekubesystemcalico sleep run calico pod path name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,5.0,36.0,30.0,30.0,30.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/Debian.yml,100.0,5.0,22.0,3.0,30.0,30.0,30.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,20.0,5.0,36.0,30.0,30.0,30.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/RedHat.yml,100.0,6.0,20.0,3.0,30.0,30.0,30.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,36.0,56.0,56.0,56.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/main.yml,100.0,14.0,41.0,0.0,56.0,56.0,56.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,38.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,106.0,2.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.2,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,105.0,5.0,36.0,245.0,245.0,245.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/defaults/main.yml,100.0,43.0,90.0,111.0,245.0,245.0,245.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,5.0,5.0,36.0,23.0,23.0,23.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/rhosts.yml,100.0,3.0,19.0,0.0,23.0,23.0,23.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,5.0,36.0,0.0,0.0,0.0,20ebd73bc491aab5c9945e39d8721232b1105443,0.0,1526035519.0,0.0,no,roles/harbor/tasks/main.yml,0.0,7.0,34.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,113.0,8.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,5.79,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 注册变量result command dataregistri regist result ignor error name 解压harbor离线安装包 unarch src base dir path dest rootloc copi ye keep newer ye resultfail name 导入harbor所需 docker imag shell bin dir docker load path resultfail name 创建harbor证书请求 templat path dest dir path resultfail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor resultfail name path templat path path resultfail name harbor shell rootlocalharbor export path bin dir path path resultfail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,5.0,36.0,110.0,110.0,110.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/main.yml,100.0,4.0,71.0,49.0,110.0,110.0,110.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,36.0,0.0,0.0,0.0,20ebd73bc491aab5c9945e39d8721232b1105443,0.0,1526035519.0,0.0,yes,roles/lb/tasks/main.yml,0.0,16.0,44.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,17.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,17.0,160.0,17.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.35,name 缓存ansilb setup信息 setup gather subsetmin name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,36.0,1.0,1.0,1.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,yes,roles/docker/tasks/main.yml,100.0,7.0,31.0,3.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,112.0,8.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.44,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.03
0.0,6.0,5.0,36.0,15.0,15.0,15.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/profile.yml,100.0,1.0,13.0,0.0,15.0,15.0,15.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,5.0,36.0,0.0,0.0,0.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/flannel/tasks/main.yml,100.0,6.0,25.0,2.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,80.0,6.0,0.0,1.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.75,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name flannel网络 shell bin dir kubectl creat optkubekubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,36.0,47.0,47.0,47.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/yum.yml,100.0,5.0,38.0,3.0,47.0,47.0,47.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,5.0,36.0,102.0,102.0,102.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/pam.yml,100.0,14.0,87.0,0.0,102.0,102.0,102.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,14.0,5.0,36.0,35.0,35.0,35.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/limits.yml,100.0,6.0,28.0,0.0,35.0,35.0,35.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,19.0,5.0,36.0,26.0,26.0,26.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/vars/Oracle Linux.yml,100.0,4.0,19.0,3.0,26.0,26.0,26.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,5.0,36.0,14.0,14.0,14.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/modprobe.yml,100.0,2.0,11.0,0.0,14.0,14.0,14.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,8.0,5.0,36.0,44.0,44.0,44.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/minimize_access.yml,100.0,4.0,38.0,1.0,44.0,44.0,44.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,5.0,5.0,36.0,45.0,45.0,45.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/user_accounts.yml,100.0,6.0,38.0,0.0,45.0,45.0,45.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,8.0,5.0,36.0,32.0,32.0,32.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/suid_sgid.yml,100.0,3.0,28.0,0.0,32.0,32.0,32.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,36.0,8.0,8.0,8.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/securetty.yml,100.0,0.0,7.0,0.0,8.0,8.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,36.0,69.0,69.0,69.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/sysctl.yml,100.0,8.0,60.0,0.0,69.0,69.0,69.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,5.0,36.0,3.0,3.0,3.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,16.0,71.0,6.0,7.0,7.0,7.0,4.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,17.0,0.0,0.0,5.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,2.0,0.0,0.0,0.0,0.0,10.0,0.0,17.0,231.0,17.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.48,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get nodegrep node awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.02
0.0,7.0,5.0,36.0,8.0,8.0,8.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/apt.yml,100.0,0.0,7.0,0.0,8.0,8.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,36.0,7.0,1.0,4.0,20ebd73bc491aab5c9945e39d8721232b1105443,5.0,1526035519.0,3.0,yes,roles/prepare/tasks/main.yml,43.48,12.0,89.0,14.0,15.0,3.0,6.0,8.0,2.0,2.0,1.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,12.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,7.0,0.0,0.0,0.0,0.0,1.0,0.0,13.0,208.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.42,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 缓存ansilb setup信息 setup gather subsetmin name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,1.0,0.0,7.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,3.0,0.0,0.0,0.0,-0.02
0.0,4.0,5.0,36.0,3.0,3.0,3.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,11.0,45.0,2.0,3.0,3.0,3.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,1.0,4.0,2.0,0.0,0.0,12.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,167.0,12.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.19,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 读取kubernetes证书stat信息 stat path path regist name kubernet 证书签名请求 templat path dest dir path path defin name kubernet 证书和私钥 path defin shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path name 创建kubecontrollermanager的systemd unit文件 templat path path name 创建kubescheduler的systemd unit文件 templat path path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.04
36.0,36.0,5.0,36.0,70.0,70.0,70.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/default.yml,100.0,3.0,66.0,0.0,70.0,70.0,70.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,64.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,2.0,135.0,2.0,0.0,11.0,roles/os-harden/default.yml,easzlab/kubeasz,6.22,name wrapper playbook kitchen test ansibleosharden custom var test host localhost role ansibleosharden pre task name run equival aptget updat separ step apt updat cach ye ansibl famili debian var secur user allow chang user secur kernel enabl core dump secur suid sgid remov unknown auth pam passwdqc enabl desktop enabl env extra user path home auth allow homeless secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space name wrapper playbook kitchen test ansibleosharden host localhost pre task name run equival aptget updat separ step apt updat cach ye ansibl famili debian role ansibleosharden,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,36.0,9.0,9.0,9.0,20ebd73bc491aab5c9945e39d8721232b1105443,1.0,1526035519.0,1.0,no,roles/os-harden/tasks/login_defs.yml,100.0,1.0,7.0,0.0,9.0,9.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,15.0,100.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,26.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,26.0,365.0,14.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.14,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name kubedns的部署文件 path templat path dest base dir path name coredns的部署文件 path templat path dest base dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,58.0,11.0,11.0,11.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,no,roles/flannel/defaults/main.yml,100.0,3.0,3.0,5.0,11.0,11.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.25,flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,58.0,-4.0,-4.0,-4.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,yes,roles/lb/tasks/main.yml,100.0,15.0,42.0,0.0,0.0,0.0,0.0,4.0,4.0,4.0,1.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,155.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.27,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,-1.0,-2.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-5.0,-1.0,0.0,0.0,-0.08
0.0,6.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,no,roles/flannel/tasks/main.yml,100.0,6.0,25.0,2.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,81.0,6.0,0.0,1.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,5.77,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get daemonset kubesystem regist pod info run name flannel网络 shell bin dir kubectl creat optkubekubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.02
4.0,4.0,5.0,58.0,5.0,5.0,5.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,no,roles/os-harden/os-harden.yml,100.0,1.0,3.0,1.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,58.0,3.0,0.0,4.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,6.0,1528811380.0,2.0,no,roles/kube-node/tasks/main.yml,86.21,17.0,73.0,6.0,16.0,3.0,5.0,13.0,2.0,5.0,2.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,18.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,2.0,0.0,0.0,0.0,0.0,11.0,0.0,18.0,254.0,18.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.5,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,-1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,23.0,1.0,0.0,0.0,0.02
0.0,4.0,5.0,58.0,63.0,16.0,55.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,4.0,1528811380.0,2.0,no,roles/helm/tasks/main.yml,77.92,10.0,52.0,1.0,70.0,18.0,55.0,7.0,2.0,3.0,2.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
9.0,9.0,5.0,58.0,11.0,3.0,9.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,4.0,1528811380.0,3.0,no,roles/helm/helm.yml,73.33,0.0,9.0,2.0,13.0,3.0,9.0,2.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,9.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,yes,roles/calico/tasks/main.yml,100.0,11.0,37.0,7.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,148.0,12.0,0.0,1.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.24,name 创建calico 相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get daemonset kubesystem regist pod info run name calico网络 shell bin dir kubectl creat optkubekubesystemcalico sleep run caliconod pod path name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.02
0.0,20.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,58.0,4.0,2.0,7.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,2.0,1528811380.0,1.0,no,roles/os-harden/tasks/main.yml,100.0,15.0,44.0,0.0,7.0,4.0,7.0,3.0,2.0,3.0,1.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,9.0,1.0,0.0,0.0,0.1
0.0,105.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,2.0,1528811380.0,1.0,no,roles/os-harden/defaults/main.yml,100.0,43.0,90.0,112.0,3.0,2.0,2.0,3.0,2.0,2.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,58.0,12.0,4.0,6.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,3.0,1528811380.0,2.0,yes,roles/harbor/tasks/main.yml,52.38,9.0,44.0,3.0,27.0,9.0,11.0,15.0,5.0,10.0,5.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,10.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,144.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.03,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 创建data目录 file path data state directori mode name 注册变量result command dataregistri regist result ignor error name 安装解压工具 yum name item statelatest item zip unzip name 解压harbor离线安装包 unarch src base dir path dest data copi ye keep newer ye result fail name 导入harbor所需 docker imag shell bin dir docker load path result fail name 创建harbor证书请求 templat path dest dir path result fail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor result fail name path templat path path result fail name harbor shell dataharbor export path bin dir path path result fail,0.0,0.0,2.0,10.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,0.24
0.0,75.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,5.0,58.0,5.0,2.0,4.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,3.0,1528811380.0,2.0,no,roles/lb/defaults/main.yml,53.85,0.0,1.0,4.0,9.0,3.0,4.0,4.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,1.0,router,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,5.0,58.0,2.0,2.0,2.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,yes,roles/docker/tasks/main.yml,100.0,7.0,33.0,3.0,2.0,2.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,8.0,116.0,8.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.47,name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag restart dockerd name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.03
0.0,6.0,5.0,58.0,8.0,2.0,5.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,4.0,1528811380.0,3.0,no,roles/helm/defaults/main.yml,58.33,0.0,6.0,2.0,10.0,2.0,5.0,2.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,58.0,0.0,0.0,4.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,3.0,1528811380.0,3.0,yes,roles/prepare/tasks/main.yml,40.0,13.0,89.0,13.0,5.0,2.0,4.0,5.0,2.0,4.0,1.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,7.0,0.0,0.0,0.0,0.0,1.0,0.0,12.0,208.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.4,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,0.0,1.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,-0.02
0.0,4.0,5.0,58.0,9.0,3.0,6.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,3.0,1528811380.0,2.0,yes,roles/kube-master/tasks/main.yml,68.42,12.0,52.0,3.0,14.0,5.0,6.0,5.0,2.0,5.0,3.0,0.0,0.0,0.0,1.0,6.0,3.0,0.0,0.0,13.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,13.0,198.0,13.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.27,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 读取kubernetes证书stat信息 stat path path regist name kubernet 证书签名请求 templat path dest dir path path defin name kubernet 证书和私钥 path defin shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad restart master,0.0,0.0,1.0,7.0,1.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,31.0,1.0,0.0,0.0,0.08
0.0,6.0,5.0,58.0,17.0,17.0,17.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,1.0,1528811380.0,1.0,no,roles/calico/defaults/main.yml,100.0,6.0,6.0,5.0,17.0,17.0,17.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,3.81,calico ipvpool ipip alway felix log lvl warn autodetect method canreach master calico node ver calico cni ver calico kube control ver,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,58.0,0.0,0.0,0.0,1eca6b0da9b675a243cc76e5bd4fb1b5adac6ebf,0.0,1528811380.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,-7.0,-7.0,-7.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,1.0,1529765427.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,14.0,96.0,9.0,0.0,0.0,0.0,7.0,7.0,7.0,1.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,24.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,24.0,347.0,12.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.04,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet,0.0,0.0,-1.0,-4.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,-18.0,-2.0,0.0,0.0,-0.1
0.0,27.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/flannel/defaults/main.yml,0.0,3.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.25,flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,15.0,5.0,12.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,3.0,1529765427.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,4.0,6.0,17.0,6.0,12.0,2.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,2.75,router enabl firewal enabl imag cloudnativelabskuberout pull polici present,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,155.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.27,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,7.0,21.0,8.0,8.0,8.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,1.0,1529765427.0,1.0,no,roles/flannel/tasks/main.yml,100.0,7.0,31.0,3.0,8.0,8.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,7.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,112.0,7.0,0.0,2.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.14,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get daemonset kubesystem regist pod info run name flannel网络 shell bin dir kubectl creat optkubekubesystemflannel sleep run flannel pod path name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,1.0,1.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,31.0,1.0,0.0,1.0,0.37
4.0,4.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,37.0,9.0,28.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,4.0,1529765427.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,8.0,27.0,2.0,41.0,10.0,28.0,4.0,1.0,4.0,2.5,0.0,0.0,0.0,1.0,15.0,10.0,0.0,0.0,8.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,0.0,0.0,1.0,0.0,0.0,5.0,0.0,8.0,159.0,8.0,0.0,1.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,5.41,name kubedns的部署文件 path templat path dest base dir path name coredns的部署文件 path templat path dest base dir path name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info name dn backend shell sleep bin dir kubectl appli base dir manifest dn backend dn backend pod path dn instal ye ignor error name metricsserver部署 shell sleep bin dir kubectl appli base dir manifestsmetricsserv metricsserv pod path metricsserv instal ye ignor error name dashboard部署 shell sleep bin dir kubectl appli base dir manifestsdashboard kubernetesdashboard pod path dashboard instal ye ignor error name traefikingress部署 shell sleep bin dir kubectl appli base dir path traefikingresscontrol pod path ingress instal ye ignor error name heapster部署 shell sleep bin dir kubectl appli base dir manifestsheapst heapster pod path heapster instal ye ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,7.0,21.0,21.0,7.0,22.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,3.0,1529765427.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,6.0,6.0,9.0,28.0,9.0,22.0,7.0,2.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,3.02,dn instal ye dn backend coredn metricsserv instal ye dashboard instal ye ingress instal heapster instal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,5.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,7.0,21.0,5.0,5.0,5.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,1.0,1529765427.0,1.0,no,roles/kube-router/kube-router.yml,100.0,0.0,5.0,0.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,7.0,21.0,2.0,1.0,2.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,2.0,1529765427.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,17.0,75.0,6.0,4.0,2.0,2.0,2.0,1.0,2.0,1.5,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,18.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,2.0,0.0,0.0,0.0,0.0,11.0,0.0,18.0,270.0,18.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.57,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error cluster network kuberout servic proxi ipv name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node cluster network kuberout servic proxi ipv name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.07
0.0,4.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,9.0,9.0,9.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,1.0,1529765427.0,1.0,yes,roles/calico/tasks/main.yml,100.0,13.0,43.0,8.0,9.0,9.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,179.0,13.0,0.0,2.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.49,name 创建calico 相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 获取所有已经创建的pod信息 command bin dir kubectl get daemonset kubesystem regist pod info run name calico网络 shell bin dir kubectl creat optkubekubesystemcalico sleep run caliconod pod path name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,2.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,31.0,1.0,0.0,1.0,0.25
0.0,20.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,15.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,105.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,43.0,90.0,112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,yes,roles/harbor/tasks/main.yml,0.0,9.0,44.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,10.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,144.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.03,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 创建data目录 file path data state directori mode name 注册变量result command dataregistri regist result ignor error name 安装解压工具 yum name item statelatest item zip unzip name 解压harbor离线安装包 unarch src base dir path dest data copi ye keep newer ye result fail name 导入harbor所需 docker imag shell bin dir docker load path result fail name 创建harbor证书请求 templat path dest dir path result fail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor result fail name path templat path path result fail name harbor shell dataharbor export path bin dir path path result fail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/lb/defaults/main.yml,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,1.0,router,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,6.0,6.0,6.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,1.0,1529765427.0,1.0,yes,roles/docker/tasks/main.yml,100.0,8.0,38.0,3.0,6.0,6.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.6,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag restart dockerd name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,1.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,1.0,0.0,0.0,0.13
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,57.0,19.0,32.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,3.0,1529765427.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,10.0,42.0,5.0,60.0,20.0,32.0,3.0,1.0,2.0,2.0,0.0,0.0,0.0,1.0,6.0,1.0,0.0,0.0,10.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,160.0,10.0,0.0,2.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.31,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubekubesystemkuberout name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name 准备配置 kuberout daemon set without ipv templat path path servic proxi kubeproxi name kubeproxi shell systemctl stop path systemctl disabl path servic proxi ipv ignor error name kubeproxy产生的iptables规则 shell bin dir kubeproxi cleanup servic proxi ipv ignor error name 准备配置 kuberout daemon set ipv templat path path servic proxi ipv name 获取所有已经创建的pod信息 command bin dir kubectl get daemonset kubesystem regist pod info run name kuberout daemon set shell bin dir kubectl creat optkubekubesystemkuberout sleep run kuberout pod path name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,8.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,yes,roles/prepare/tasks/main.yml,0.0,13.0,89.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,7.0,0.0,0.0,0.0,0.0,1.0,0.0,12.0,208.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.4,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,7.0,21.0,5.0,2.0,13.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,2.0,1529765427.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,13.0,57.0,2.0,15.0,8.0,13.0,10.0,5.0,10.0,3.5,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,14.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,225.0,14.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.2,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad restart master,0.0,0.0,1.0,5.0,-1.0,0.0,0.0,0.0,-4.0,-2.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,27.0,1.0,0.0,-1.0,-0.07
0.0,6.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/calico/defaults/main.yml,0.0,6.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,3.81,calico ipvpool ipip alway felix log lvl warn autodetect method canreach master calico node ver calico cni ver calico kube control ver,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,7.0,21.0,0.0,0.0,0.0,c4775ccd779ec5d18c5216961e505edd1381f8aa,0.0,1529765427.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,14.0,96.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,24.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,24.0,347.0,12.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.04,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,3.0,3.0,3.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/flannel/defaults/main.yml,100.0,4.0,4.0,6.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.75,flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.5
0.0,5.0,4.0,6.0,2.0,2.0,2.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,5.0,7.0,2.0,2.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.12,router enabl firewal enabl imag cloudnativelabskuberout pull polici present kuberout offlin kuberout path,0.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.37
0.0,3.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,155.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.27,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,6.0,19.0,19.0,19.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/flannel/tasks/main.yml,100.0,10.0,44.0,6.0,26.0,26.0,26.0,7.0,7.0,7.0,5.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,10.0,0.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,154.0,10.0,0.0,2.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path flannel offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag flannel offlin flannel offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,3.0,13.0,3.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,3.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,3.0,42.0,3.0,0.0,0.0,0.1
4.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,11.0,4.0,6.0,44.0,22.0,25.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,2.0,1530269966.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,8.0,70.0,3.0,55.0,28.0,36.0,11.0,6.0,11.0,12.0,0.0,0.0,5.0,1.0,34.0,12.0,0.0,0.0,3.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,70.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,8.0,360.0,18.0,0.0,1.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,5.81,name kubedns的部署文件 path templat path dest base dir path hostvar inventori hostnam group name path deploy name coredns的部署文件 path templat path dest base dir path hostvar inventori hostnam group name path deploy name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin hostvar inventori hostnam group name path kubenod name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin hostvar inventori hostnam group name path kubenod name dn backend shell sleep bin dir kubectl appli base dir manifest dn backend hostvar inventori hostnam group name path deploy kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin hostvar inventori hostnam group name path kubenod name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin hostvar inventori hostnam group name path kubenod name metricsserver部署 shell sleep bin dir kubectl appli base dir manifestsmetricsserv hostvar inventori hostnam group name path deploy metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin hostvar inventori hostnam group name path kubenod name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin hostvar inventori hostnam group name path kubenod name dashboard部署 shell sleep bin dir kubectl appli base dir manifestsdashboard hostvar inventori hostnam group name path deploy kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin hostvar inventori hostnam group name path kubenod name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin hostvar inventori hostnam group name path kubenod name traefik部署 shell sleep bin dir kubectl appli base dir path hostvar inventori hostnam group name path deploy traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin hostvar inventori hostnam group name path kubenod name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin hostvar inventori hostnam group name path kubenod name heapster部署 shell sleep bin dir kubectl appli base dir manifestsheapst hostvar inventori hostnam group name path deploy heapster pod path heapster instal ye ignor error,0.0,7.0,0.0,43.0,1.0,0.0,5.0,0.0,19.0,2.0,0.0,0.0,-5.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,43.0,0.0,0.0,0.0,2.0,0.0,0.0,-5.0,0.0,0.0,201.0,10.0,0.0,0.0,0.4
0.0,13.0,4.0,6.0,7.0,2.0,6.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,3.0,1530269966.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,6.0,13.0,9.0,8.0,3.0,6.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,4.44,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path,0.0,7.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,1.42
0.0,5.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/kube-node/tasks/main.yml,0.0,17.0,75.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,18.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,2.0,0.0,0.0,0.0,0.0,11.0,0.0,18.0,270.0,18.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.57,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error cluster network kuberout servic proxi ipv name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node cluster network kuberout servic proxi ipv name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,20.0,20.0,20.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,yes,roles/calico/tasks/main.yml,100.0,16.0,57.0,11.0,27.0,27.0,27.0,7.0,7.0,7.0,4.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,16.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,3.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,222.0,16.0,0.0,2.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.59,name 创建calico 相关目录 file name item statedirectori item etccalicossl path optkubekubesystemcalico optkubeimag name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path calico offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag calico offlin calico offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,1.0,3.0,14.0,3.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,3.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,3.0,43.0,3.0,0.0,0.0,0.1
0.0,20.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,15.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,105.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,43.0,90.0,112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/harbor/tasks/main.yml,100.0,9.0,44.0,3.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,10.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,144.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.03,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 创建data目录 file path data state directori mode name 注册变量result command dataregistri regist result ignor error name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir path dest data copi ye keep newer ye result fail name 导入harbor所需 docker imag shell bin dir docker load path result fail name 创建harbor证书请求 templat path dest dir path result fail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor result fail name path templat path path result fail name harbor shell dataharbor export path bin dir path path result fail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,6.0,6.0,6.0,6.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/cluster-addon/vars/main.yml,100.0,1.0,5.0,0.0,6.0,6.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.54,dn offlin dn backend coredn coredn offlin els kubedn offlin endif,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,1.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/lb/defaults/main.yml,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,1.0,router,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,yes,roles/docker/tasks/main.yml,0.0,8.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.6,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag restart dockerd name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,6.0,19.0,19.0,19.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,13.0,55.0,8.0,25.0,25.0,25.0,6.0,6.0,6.0,4.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,13.0,0.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,3.0,0.0,0.0,0.0,0.0,6.0,0.0,13.0,202.0,13.0,0.0,2.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.39,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubekubesystemkuberout optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name 准备配置 kuberout daemon set without ipv templat path path servic proxi kubeproxi name kubeproxi shell systemctl stop path systemctl disabl path servic proxi ipv ignor error name kubeproxy产生的iptables规则 shell bin dir kubeproxi cleanup servic proxi ipv ignor error name 准备配置 kuberout daemon set ipv templat path path servic proxi ipv name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path kuberout offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag kuberout offlin kuberout offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,1.0,3.0,13.0,3.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,3.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,3.0,42.0,3.0,0.0,0.0,0.08
0.0,8.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,yes,roles/prepare/tasks/main.yml,0.0,13.0,89.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,7.0,0.0,0.0,0.0,0.0,1.0,0.0,12.0,208.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.4,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 设置系统参数 copi path path name 加载br netfilter模块 modprob namebr netfilt statepres ignor error name 生效系统参数 shell sysctl path ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,13.0,57.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,14.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,225.0,14.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.2,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,6.0,2.0,2.0,2.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,1.0,1530269966.0,1.0,no,roles/calico/defaults/main.yml,100.0,5.0,7.0,7.0,4.0,4.0,4.0,2.0,2.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.06,calico ipvpool ipip alway felix log lvl warn autodetect method canreach master calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,1.0,-1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.25
0.0,7.0,4.0,6.0,0.0,0.0,0.0,e23975da0c2cb9d6f74024ca5a28d62da028272a,0.0,1530269966.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,14.0,96.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,3.0,0.0,0.0,24.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,24.0,347.0,12.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.04,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.75,flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,6.0,6.0,2.0,2.0,2.0,2.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.42,router enabl firewal enabl servic proxi imag cloudnativelabskuberout pull polici present kuberout offlin kuberout path,0.0,1.0,0.0,1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.3
0.0,3.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,155.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.27,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major version name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major version name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/flannel/tasks/main.yml,0.0,10.0,44.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,10.0,0.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,154.0,10.0,0.0,2.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path flannel offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag flannel offlin flannel offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,11.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,8.0,70.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,1.0,34.0,12.0,0.0,0.0,3.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,70.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,8.0,360.0,18.0,0.0,1.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,5.81,name kubedns的部署文件 path templat path dest base dir path hostvar inventori hostnam group name path deploy name coredns的部署文件 path templat path dest base dir path hostvar inventori hostnam group name path deploy name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin hostvar inventori hostnam group name path kubenod name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin hostvar inventori hostnam group name path kubenod name dn backend shell sleep bin dir kubectl appli base dir manifest dn backend hostvar inventori hostnam group name path deploy kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin hostvar inventori hostnam group name path kubenod name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin hostvar inventori hostnam group name path kubenod name metricsserver部署 shell sleep bin dir kubectl appli base dir manifestsmetricsserv hostvar inventori hostnam group name path deploy metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin hostvar inventori hostnam group name path kubenod name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin hostvar inventori hostnam group name path kubenod name dashboard部署 shell sleep bin dir kubectl appli base dir manifestsdashboard hostvar inventori hostnam group name path deploy kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin hostvar inventori hostnam group name path kubenod name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin hostvar inventori hostnam group name path kubenod name traefik部署 shell sleep bin dir kubectl appli base dir path hostvar inventori hostnam group name path deploy traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin hostvar inventori hostnam group name path kubenod name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin hostvar inventori hostnam group name path kubenod name heapster部署 shell sleep bin dir kubectl appli base dir manifestsheapst hostvar inventori hostnam group name path deploy heapster pod path heapster instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/cluster-addon/defaults/main.yml,0.0,6.0,13.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,4.44,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,7.0,-2.0,-2.0,-2.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,17.0,73.0,6.0,0.0,0.0,0.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,18.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,2.0,0.0,0.0,0.0,0.0,11.0,0.0,18.0,254.0,18.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.49,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path copi path path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path copi path path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,-4.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-16.0,0.0,0.0,0.0,-0.08
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,yes,roles/calico/tasks/main.yml,0.0,16.0,57.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,16.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,3.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,222.0,16.0,0.0,2.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.59,name 创建calico 相关目录 file name item statedirectori item etccalicossl path optkubekubesystemcalico optkubeimag name 复制ca 证书到calico 证书目录 copi src dir path path name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name 重命名相关证书 shell etccalicossl path etcdca path etcdcert path etcdkey name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path calico offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag calico offlin calico offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,20.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,15.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,105.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,43.0,90.0,112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/harbor/tasks/main.yml,100.0,9.0,44.0,3.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,10.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,145.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.05,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 创建data目录 file path data state directori mode name 注册变量result command dataregistri regist result ignor error name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir path dest data copi ye keep newer ye result fail name 导入harbor所需 docker imag shell bin dir docker load path result fail name 创建harbor证书请求 templat path dest dir path result fail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor result fail name path templat path path result fail name harbor shell dataharbor export path bin dir path path withclair result fail,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.02
0.0,75.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/cluster-addon/vars/main.yml,0.0,1.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.54,dn offlin dn backend coredn coredn offlin els kubedn offlin endif,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,7.0,7.0,7.0,7.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/lb/defaults/main.yml,100.0,1.0,2.0,9.0,10.0,10.0,10.0,3.0,3.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.0,router balanc alg roundrobin,0.0,1.0,1.0,1.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,yes,roles/docker/tasks/main.yml,0.0,8.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.6,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 copi path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag restart dockerd name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,3.0,7.0,3.0,3.0,3.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,1.0,1.0,1.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,1.0,proxi mode iptabl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,13.0,55.0,8.0,7.0,7.0,7.0,7.0,7.0,7.0,4.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,13.0,0.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,3.0,0.0,0.0,0.0,0.0,5.0,0.0,13.0,201.0,13.0,0.0,2.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.41,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubekubesystemkuberout optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name 准备配置 kuberout daemon set without ipv templat path path servic proxi name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 准备配置 kuberout daemon set ipv templat path path servic proxi name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path kuberout offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag kuberout offlin kuberout offlin imag path ignor error name pause的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimagespaus path paus imag path ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.02
0.0,8.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,7.0,7.0,7.0,7.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,1.0,1531538891.0,1.0,yes,roles/prepare/tasks/main.yml,100.0,13.0,96.0,13.0,9.0,9.0,9.0,2.0,2.0,2.0,1.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,11.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,0.0,12.0,217.0,16.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.43,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 安装kubeconfig配置文件 copi path path name 分发ca copi src dir item dest dir item mode item path path path path name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item socat nfscommon conntrack bashcomplet block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item socat psmisc nfsutil nettool bashcomplet name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 设置系统参数 copi path path name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 生效系统参数 shell sysctl path ignor error,0.0,1.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.03
0.0,4.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,13.0,57.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,14.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,225.0,14.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.2,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/calico/defaults/main.yml,0.0,5.0,7.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.06,calico ipvpool ipip alway felix log lvl warn autodetect method canreach master calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,7.0,0.0,0.0,0.0,fd75e942e5f9cba67cb3c8585e1db4146b509be5,0.0,1531538891.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,4.0,1.0,26.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,4.0,1534084340.0,2.0,yes,roles/deploy/tasks/main.yml,55.17,14.0,99.0,10.0,31.0,8.0,26.0,27.0,7.0,26.0,1.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,25.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,2.0,0.0,0.0,0.0,0.0,17.0,0.0,25.0,363.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.14,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeletbootstrap token bootstrap token path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeletbootstrap path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name manifests至 deploy节点 copi src base dir manifest dest base dir ansibl env ssh client path inventori hostnam,0.0,0.0,0.0,3.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,1.0,0.0,0.0,0.1
0.0,27.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,15.0,85.0,42.0,85.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,2.0,1534084340.0,1.0,yes,roles/cilium/tasks/main.yml,100.0,13.0,67.0,5.0,97.0,48.0,85.0,12.0,6.0,12.0,2.0,0.0,0.0,0.0,1.0,3.0,1.0,0.0,0.0,13.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,3.0,0.0,0.0,0.0,0.0,6.0,0.0,13.0,223.0,13.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.58,name 创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubekubesystemcilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path ignor error run name cilium daemon set yaml文件 templat path path tag reconf name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path cilium offlin busybox offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.75,flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,15.0,2.0,2.0,2.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,8.0,6.0,4.0,4.0,4.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.92,router enabl firewal enabl servic proxi kube router ver vbeta busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.5
0.0,13.0,3.0,15.0,17.0,4.0,9.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,4.0,1534084340.0,2.0,no,roles/cluster-storage/defaults/main.yml,60.0,1.0,13.0,3.0,36.0,9.0,15.0,19.0,5.0,13.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,yes,roles/lb/tasks/main.yml,100.0,15.0,42.0,0.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,155.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.38,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version name haproxi templat path path name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master name keepaliv 备节点 templat path path role backup name daemonreload path shell systemctl daemonreload name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.11
0.0,1.0,3.0,15.0,2.0,2.0,2.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/cluster-restore/defaults/main.yml,100.0,0.0,1.0,1.0,2.0,2.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,1.0,restor path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,3.0,15.0,11.0,11.0,11.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/docker/defaults/main.yml,100.0,3.0,6.0,2.0,11.0,11.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.58,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file,0.0,4.0,2.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-7.0,0.0,0.0,0.0,0.04
0.0,6.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,15.0,-3.0,-3.0,-3.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/flannel/tasks/main.yml,100.0,9.0,43.0,5.0,5.0,5.0,5.0,8.0,8.0,8.0,1.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,9.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,143.0,9.0,0.0,2.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.17,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path flannel offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,-1.0,-1.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,-1.0,-11.0,-1.0,0.0,0.0,-0.07
4.0,4.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,11.0,3.0,15.0,9.0,1.0,18.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,7.0,1534084340.0,2.0,yes,roles/cluster-addon/tasks/main.yml,53.02,18.0,71.0,1.0,79.0,11.0,38.0,70.0,10.0,37.0,1.0,0.0,0.0,5.0,1.0,17.0,12.0,0.0,0.0,3.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,64.0,0.0,2.0,0.0,3.0,0.0,0.0,0.0,0.0,8.0,311.0,18.0,0.0,1.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,5.93,name 创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin name traefik部署 shell bin dir kubectl appli base dir path deleg path run traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error,0.0,0.0,10.0,1.0,-2.0,0.0,0.0,0.0,-17.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-49.0,0.0,0.0,0.0,0.12
0.0,15.0,3.0,15.0,5.0,1.0,5.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,4.0,1534084340.0,2.0,no,roles/cluster-addon/defaults/main.yml,70.59,6.0,18.0,9.0,11.0,3.0,5.0,6.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,45.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,4.91,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path,0.0,2.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.47
0.0,5.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,15.0,30.0,30.0,30.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/cluster-restore/tasks/main.yml,100.0,7.0,23.0,0.0,30.0,30.0,30.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,3.0,15.0,2.0,1.0,2.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,2.0,1534084340.0,2.0,yes,roles/kube-node/tasks/main.yml,60.0,17.0,75.0,6.0,6.0,3.0,4.0,4.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,18.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,2.0,0.0,0.0,0.0,0.0,11.0,0.0,18.0,262.0,18.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.51,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name get clusterrolebind info shell bin dir kubectl get clusterrolebind allnamespac regist clusterrolebind info run name kubeletbootstrapset shell bin dir kubectl creat clusterrolebind kubeletbootstrap clusterrolesystem nodebootstrapp userkubeletbootstrap run kubeletbootstrap clusterrolebind path name path synchron path path deleg path name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.02
0.0,4.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,15.0,5.0,2.0,3.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,3.0,1534084340.0,1.0,yes,roles/calico/tasks/main.yml,100.0,15.0,65.0,9.0,20.0,7.0,11.0,15.0,5.0,8.0,2.0,0.0,0.0,0.0,1.0,3.0,1.0,0.0,0.0,15.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,4.0,0.0,0.0,0.0,0.0,6.0,0.0,15.0,231.0,15.0,0.0,3.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.53,name 创建calico 相关目录 file name item statedirectori item etccalicossl path optkubekubesystemcalico optkubeimag name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path ignor error run name calico daemon set yaml文件 templat path path name calico rbac文件 templat path path name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path calico offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,-1.0,8.0,-2.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,9.0,-1.0,0.0,1.0,-0.06
0.0,20.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,15.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,15.0,6.0,1.0,27.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,6.0,1534084340.0,2.0,no,roles/cluster-storage/tasks/main.yml,73.15,2.0,4.0,0.0,57.0,10.0,27.0,51.0,8.0,30.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,includ path path ye includ path path path ye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,105.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,43.0,90.0,112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,15.0,1.0,1.0,1.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/harbor/tasks/main.yml,100.0,9.0,45.0,3.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,10.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,147.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.05,name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 创建data目录 file path data state directori mode name 注册变量result command dataregistri regist result ignor error name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir path dest data copi ye keep newer ye mode result fail name 导入harbor所需 docker imag shell bin dir docker load path result fail name 创建harbor证书请求 templat path dest dir path result fail name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor result fail name path templat path path result fail name harbor shell dataharbor export path bin dir path path withclair result fail,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0
0.0,75.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/lb/defaults/main.yml,0.0,1.0,2.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.0,router balanc alg roundrobin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,yes,roles/docker/tasks/main.yml,100.0,8.0,38.0,3.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.61,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag restart dockerd name dockertag copi srcdockertag dest bin dir dockertag mode tag dockertag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.01
0.0,7.0,3.0,15.0,18.0,18.0,18.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/cilium/defaults/main.yml,100.0,5.0,7.0,6.0,18.0,18.0,18.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.73,debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,1.0,proxi mode iptabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,15.0,3.0,1.0,8.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,3.0,1534084340.0,2.0,yes,roles/cluster-storage/cluster-storage.yml,66.67,0.0,3.0,0.0,9.0,3.0,8.0,6.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,19.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,15.0,-1.0,-1.0,-1.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,12.0,56.0,7.0,8.0,8.0,8.0,9.0,9.0,9.0,4.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,12.0,0.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,43.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,196.0,12.0,0.0,2.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.34,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubekubesystemkuberout optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name 准备配置 kuberout daemon set without ipv templat path path servic proxi name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 准备配置 kuberout daemon set ipv templat path path servic proxi name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item paus path kuberout offlin busybox offlin ignor error name 获取目录下离线镜像信息 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,-1.0,1.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,-1.0,-5.0,-1.0,0.0,0.0,-0.07
0.0,8.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,10.0,5.0,10.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,2.0,1534084340.0,1.0,no,roles/cluster-storage/tasks/nfs-client.yml,100.0,2.0,8.0,0.0,12.0,6.0,10.0,2.0,1.0,2.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,15.0,17.0,6.0,12.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,3.0,1534084340.0,2.0,yes,roles/prepare/tasks/main.yml,70.91,16.0,108.0,15.0,36.0,12.0,22.0,19.0,6.0,17.0,2.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,14.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,73.0,0.0,9.0,0.0,0.0,0.0,0.0,2.0,0.0,15.0,255.0,19.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.57,name prepar dir file name item statedirectori item bin dir dir path etcdock name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name 删除ubuntu默认安装 ansibl distribut ubuntu apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name 安装系统通用软件 packag name item statelatest item socat bashcomplet rsync name ubuntu基础软件 ansibl distribut ubuntu apt name item statelatest item nfscommon conntrack block name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item psmisc nfsutil nettool name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis ansibl distribut cent name 安装kubeconfig配置文件 synchron path path deleg path name 分发ca synchron src dir item dest dir item item path path path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 设置系统参数 copi path path name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 生效系统参数 shell sysctl path ignor error,0.0,-1.0,3.0,12.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,38.0,3.0,0.0,0.0,0.14
0.0,4.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,13.0,57.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,14.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,225.0,14.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.2,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay run tag upgrad restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,14.0,14.0,14.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/cluster-backup/tasks/main.yml,100.0,3.0,11.0,0.0,14.0,14.0,14.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,1.0,1534084340.0,1.0,no,roles/calico/defaults/main.yml,100.0,5.0,7.0,7.0,4.0,4.0,4.0,4.0,4.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,3.79,calico ipvpool ipip alway felix log lvl warn autodetect method canreach master calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.27
0.0,7.0,3.0,15.0,0.0,0.0,0.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,0.0,1534084340.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,15.0,18.0,9.0,18.0,3475121aef58bfcde67d97a1bef9e868fdbfc17b,2.0,1534084340.0,1.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,100.0,4.0,14.0,0.0,20.0,10.0,18.0,2.0,1.0,2.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,51.0,5.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.48,name 准备alicloudnas配置目录 file name base dir manifestsstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest base dir manifestsstoragealicloudna path path name path name 复制aliclouddisk配置 copi src path dest base dir path name 开始部署aliclouddisk存储 shell bin dir kubectl appli base dir path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli base dir manifestsstoragealicloudna path path name path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,4.0,16.0,43.0,43.0,43.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/chrony/tasks/main.yml,100.0,10.0,33.0,0.0,43.0,43.0,43.0,0.0,0.0,0.0,1.0,0.0,0.0,2.0,0.0,20.0,9.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,153.0,2.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,4.9,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,16.0,-22.0,-22.0,-22.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,12.0,80.0,9.0,0.0,0.0,0.0,22.0,22.0,22.0,1.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,20.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,2.0,0.0,0.0,0.0,0.0,12.0,0.0,20.0,304.0,12.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.15,name prepar dir file name item statedirectori item bin dir dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name manifests至 deploy节点 copi src base dir manifest dest base dir ansibl env ssh client path inventori hostnam,0.0,0.0,-2.0,-19.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-10.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,-5.0,-59.0,-1.0,0.0,0.0,0.01
0.0,27.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,3.0,3.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/etcd/defaults/main.yml,100.0,0.0,2.0,1.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,3.97,tmp node group etcd hostvar node name http endfor etcd node tmp path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,22.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,22.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,42.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,4.99,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/cilium/tasks/main.yml,100.0,14.0,73.0,5.0,10.0,10.0,10.0,3.0,3.0,3.0,5.0,0.0,0.0,0.0,2.0,4.0,1.0,0.0,0.0,14.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,3.0,0.0,0.0,0.0,0.0,6.0,0.0,14.0,242.0,14.0,0.0,4.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.61,name 创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubekubesystemcilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path ignor error run name cilium daemon set yaml文件 templat path path tag reconf name 检查是否已下载离线cilium镜像 command base dir regist download info deleg path run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin busybox offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,1.0,6.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,1.0,0.0,1.0,0.03
0.0,5.0,4.0,16.0,4.0,2.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,1.0,no,roles/flannel/defaults/main.yml,100.0,5.0,5.0,8.0,5.0,2.0,3.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.12,node multipl network flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.37
0.0,1.0,4.0,16.0,2.0,2.0,2.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/harbor/defaults/main.yml,100.0,0.0,1.0,1.0,2.0,2.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,1.0,harbor ver,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,8.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,8.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.92,router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/lb/tasks/main.yml,100.0,15.0,49.0,0.0,7.0,7.0,7.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,169.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.43,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version tag restart name haproxi templat path path tag restart name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.05
0.0,4.0,4.0,16.0,4.0,4.0,4.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/cluster-restore/defaults/main.yml,100.0,1.0,3.0,2.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,3.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,0.0,0.0,3.14
0.0,7.0,4.0,16.0,3.0,3.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/docker/defaults/main.yml,100.0,4.0,7.0,3.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.81,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.23
0.0,6.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/flannel/tasks/main.yml,100.0,10.0,49.0,5.0,10.0,10.0,10.0,3.0,3.0,3.0,5.0,0.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,10.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,162.0,10.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.21,name 创建flannel cni 相关目录 file name item statedirectori item path optkubekubesystemflannel optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name flannel daemon set yaml文件 templat path path name 检查是否已下载离线flannel镜像 command base dir regist download info deleg path run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,1.0,6.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,1.0,0.0,1.0,0.04
4.0,4.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,3.55,host role role osharden harden defin harden ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,6.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,16.0,36.0,36.0,36.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/cluster-addon/tasks/main.yml,100.0,24.0,101.0,1.0,37.0,37.0,37.0,1.0,1.0,1.0,12.0,0.0,0.0,5.0,2.0,27.0,12.0,0.0,0.0,4.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,94.0,0.0,2.0,0.0,4.0,0.0,0.0,0.0,0.0,9.0,403.0,24.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.08,name 创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info run name 获取已下载离线镜像信息 command base dir regist download info deleg path run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error,0.0,2.0,6.0,30.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,92.0,6.0,0.0,6.0,0.15
0.0,6.0,4.0,16.0,31.0,16.0,29.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,1.0,no,roles/prepare/tasks/debian.yml,100.0,3.0,26.0,8.0,31.0,16.0,29.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,49.0,4.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.12,name 删除ubuntu默认安装 apt name item stateabs item ufw lxd lxdclient lxcf lxccommon name ubuntu基础软件 apt name item statelatest item nfscommon conntrack socat bashcomplet rsync ipset ipvsadm name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name ulimit templat path path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,15.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,6.0,18.0,9.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,45.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,4.91,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,16.0,25.0,12.0,21.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,21.0,97.0,5.0,41.0,20.0,37.0,16.0,8.0,16.0,2.5,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,22.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,72.0,0.0,2.0,0.0,0.0,0.0,0.0,15.0,0.0,22.0,342.0,22.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.67,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr deleg path regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path deleg path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,4.0,22.0,-1.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,4.0,80.0,4.0,0.0,-1.0,0.16
0.0,4.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name calico证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,16.0,4.0,4.0,4.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/kube-master/defaults/main.yml,100.0,1.0,2.0,1.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,3.77,tmp endpoint group etcd http endfor etcd endpoint tmp path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/calico/tasks/main.yml,100.0,16.0,71.0,9.0,11.0,11.0,11.0,4.0,4.0,4.0,6.0,0.0,0.0,0.0,2.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,250.0,16.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.57,name 创建calico 相关目录 file name item statedirectori item etccalicossl path optkubekubesystemcalico optkubeimag name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path ignor error run name calico daemon set yaml文件 templat path path name calico rbac templat path path name 检查是否已下载离线calico镜像 command base dir regist download info deleg path run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,1.0,6.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,1.0,0.0,1.0,0.04
0.0,20.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,20.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,38.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.72,modprob packag moduleinittool packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,15.0,44.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,1.0,2.0,41.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,115.0,3.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,5.3,name apt更新缓存刷新 apt updat cachey cach valid time ansibl famili debian name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag limit import task login path tag login def includ task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,34.0,17.0,43.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,5.0,29.0,6.0,44.0,22.0,43.0,10.0,5.0,10.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,56.0,6.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.23,name 删除centos默认安装 yum name item stateabs item firewalld pythonfirewal firewalldfilesystem name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name item statelatest item psmisc nfsutil socat bashcomplet rsync ipset ipvsadm name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name cento ulimit templat path path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/cluster-storage/tasks/main.yml,100.0,2.0,4.0,0.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,105.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,43.0,90.0,112.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,82.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,150.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,4.0,16.0,-7.0,-7.0,-7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/harbor/tasks/main.yml,100.0,9.0,40.0,1.0,41.0,41.0,41.0,48.0,48.0,48.0,5.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,131.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.24,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir downharborofflineinstal harbor ver path dest data copi ye keep newer ye mode name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,8.0,0.0,-5.0,-2.0,0.0,1.0,0.0,-4.0,1.0,0.0,0.0,-8.0,1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,-7.0,-16.0,0.0,0.0,0.0,0.19
0.0,75.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,1.0,0.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,3.0,1536982569.0,1.0,no,roles/lb/defaults/main.yml,100.0,2.0,3.0,8.0,5.0,2.0,3.0,4.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.58,router balanc alg roundrobin ingress nodeport,0.0,1.0,1.0,1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.58
0.0,4.0,4.0,16.0,-1.0,-1.0,-1.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,yes,roles/docker/tasks/main.yml,100.0,8.0,37.0,3.0,3.0,3.0,3.0,4.0,4.0,4.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.64,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.03
0.0,7.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/cilium/defaults/main.yml,100.0,5.0,7.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.73,debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,5.0,2.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,2.0,no,roles/kube-node/defaults/main.yml,60.0,2.0,3.0,3.0,5.0,2.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,2.58,proxi mode iptabl kubelet root dir varlibkubelet max pod,0.0,2.0,1.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,1.58
0.0,5.0,4.0,16.0,31.0,10.0,32.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,3.0,1536982569.0,1.0,yes,roles/prepare/tasks/common.yml,100.0,4.0,24.0,3.0,45.0,15.0,32.0,14.0,5.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,54.0,5.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.2,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,14.0,87.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,31.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,87.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,15.0,364.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,5.97,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred debian system apt name packag pam ccred state absent ansibl distribut debian ansibl distribut ubuntu name remov pam ccred redhat system yum name packag pam ccred state absent ansibl famili red hat name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src pam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src pam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src rhel system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src rhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,4.0,16.0,3.0,3.0,3.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/chrony/chrony.yml,100.0,0.0,3.0,0.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,19.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,30.0,3.0,0.0,0.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,4.42,name instal modprob disabl filesystem packag name modprob packag state present name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,4.0,38.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,120.0,5.0,0.0,1.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.51,name find directori minim access stat path item regist minim access directori item usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name minim access file path path mode gow recurs ye path item minim access path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,13.0,62.0,7.0,9.0,9.0,9.0,2.0,2.0,2.0,4.0,0.0,0.0,0.0,2.0,6.0,0.0,0.0,0.0,13.0,0.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,49.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,215.0,13.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.38,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubekubesystemkuberout optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name 准备配置 kuberout daemon set without ipv templat path path servic proxi name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 准备配置 kuberout daemon set ipv templat path path servic proxi name 检查是否已下载离线kuberouter镜像 command base dir regist download info deleg path run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay,0.0,0.0,1.0,6.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,1.0,0.0,1.0,0.04
0.0,8.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src rhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,16.0,7.0,7.0,7.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,1.0,1536982569.0,1.0,no,roles/chrony/defaults/main.yml,100.0,3.0,2.0,2.0,7.0,7.0,7.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,16.0,-78.0,-26.0,2.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,3.0,1536982569.0,2.0,no,roles/prepare/tasks/main.yml,98.57,8.0,42.0,3.0,31.0,10.0,18.0,109.0,36.0,96.0,4.0,1.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,127.0,6.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.91,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent name prepar dir file name item statedirectori item bin dir dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name kubeconfig配置文件 synchron path path deleg path name synchron src dir item dest dir item item path path path path deleg path name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash import task path,0.0,-2.0,-8.0,-66.0,-12.0,0.0,-1.0,0.0,0.0,1.0,0.0,0.0,-5.0,-1.0,0.0,0.0,-3.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,-42.0,0.0,-6.0,0.0,0.0,0.0,0.0,-2.0,0.0,-6.0,-128.0,-13.0,0.0,0.0,-0.66
0.0,4.0,4.0,16.0,-2.0,-1.0,1.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,2.0,1536982569.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,12.0,56.0,2.0,1.0,0.0,1.0,3.0,2.0,3.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,221.0,13.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.21,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-4.0,-1.0,0.0,0.0,0.01
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,4.0,16.0,7.0,2.0,4.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,4.0,1536982569.0,1.0,yes,roles/calico/defaults/main.yml,100.0,7.0,10.0,9.0,9.0,2.0,4.0,2.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,35.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.82,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,3.0,2.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,0.0,0.0,1.03
0.0,7.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,16.0,0.0,0.0,0.0,54465441d4245262d411a9aa74cd0aed9dc6b27b,0.0,1536982569.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,51.0,5.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.48,name 准备alicloudnas配置目录 file name base dir manifestsstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest base dir manifestsstoragealicloudna path path name path name 复制aliclouddisk配置 copi src path dest base dir path name 开始部署aliclouddisk存储 shell bin dir kubectl appli base dir path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli base dir manifestsstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,31.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,103.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.88,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,8.0,56.0,3.0,3.0,3.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,yes,roles/chrony/tasks/main.yml,100.0,11.0,35.0,0.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,2.0,0.0,20.0,9.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,158.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,4.97,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,-1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,1.0,0.0,0.0,0.07
0.0,3.0,8.0,56.0,10.0,3.0,7.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,3.0,1539701276.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,13.0,88.0,10.0,15.0,5.0,8.0,5.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,8.0,3.0,0.0,0.0,21.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,51.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,21.0,329.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.26,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name manifests至 deploy节点 synchron src base dir manifest dest base dir ansibl env ssh client path inventori hostnam name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host ansibl env ssh client path inventori hostnam,0.0,0.0,1.0,8.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,25.0,1.0,0.0,0.0,0.11
0.0,27.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/meta/main.yml,100.0,0.0,26.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/etcd/defaults/main.yml,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,3.97,tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,8.0,56.0,1.0,1.0,1.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/vars/Debian.yml,100.0,5.0,23.0,3.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.09
0.0,8.0,8.0,56.0,6.0,3.0,4.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,no,roles/cilium/tasks/main.yml,100.0,14.0,79.0,5.0,48.0,24.0,42.0,42.0,21.0,38.0,4.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,9.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,261.0,15.0,0.0,4.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.64,block name 在deploy 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl optkubekubesystemcilium name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin busybox offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,3.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,-5.0,1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,1.0,0.0,0.0,0.0,0.0,-3.0,0.0,-4.0,19.0,1.0,0.0,0.0,0.03
0.0,5.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/flannel/defaults/main.yml,0.0,5.0,5.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.12,node multipl network flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/harbor/defaults/main.yml,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,1.0,harbor ver,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,8.0,56.0,4.0,4.0,4.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,6.0,9.0,8.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.05
0.0,13.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/lb/tasks/main.yml,0.0,15.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,16.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,16.0,169.0,16.0,0.0,0.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.43,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version tag restart name haproxi templat path path tag restart name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/docker/defaults/main.yml,0.0,4.0,7.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.81,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/profile.yml,100.0,1.0,13.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,8.0,56.0,7.0,4.0,5.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,no,roles/flannel/tasks/main.yml,100.0,11.0,55.0,5.0,21.0,10.0,15.0,14.0,7.0,10.0,3.5,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,180.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.23,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,1.0,1.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,-1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,1.0,0.0,0.0,0.02
46.0,46.0,8.0,56.0,41.0,41.0,41.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/os-harden.yml,100.0,1.0,43.0,2.0,42.0,42.0,42.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,42.0,42.0,0.0,40.0,1.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,6.0,1.84
0.0,6.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,8.0,56.0,-1.0,-1.0,-1.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/limits.yml,100.0,5.0,28.0,0.0,3.0,3.0,3.0,4.0,4.0,4.0,4.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,8.0,56.0,3.0,2.0,2.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,yes,roles/cluster-addon/tasks/main.yml,100.0,24.0,104.0,1.0,28.0,14.0,22.0,25.0,12.0,21.0,2.0,0.0,0.0,6.0,1.0,27.0,12.0,0.0,0.0,1.0,6.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,97.0,0.0,2.0,0.0,4.0,0.0,0.0,0.0,0.0,7.0,411.0,24.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.1,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod kubesystem regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error,0.0,4.0,0.0,3.0,0.0,0.0,1.0,-1.0,0.0,0.0,0.0,0.0,-3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,8.0,0.0,0.0,0.0,0.02
0.0,7.0,8.0,56.0,2.0,2.0,2.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/prepare/tasks/debian.yml,100.0,3.0,28.0,8.0,19.0,19.0,19.0,17.0,17.0,17.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,45.0,17.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.92,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name ulimit templat path path,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,13.0,0.0,0.0,-0.2
0.0,15.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,3.0,1539701276.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,6.0,18.0,9.0,5.0,2.0,2.0,5.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,45.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,4.91,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/securetty.yml,100.0,0.0,7.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,8.0,56.0,12.0,12.0,12.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/find_files.yml,100.0,1.0,11.0,0.0,12.0,12.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/kube-node/tasks/main.yml,0.0,21.0,97.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,22.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,72.0,0.0,2.0,0.0,0.0,0.0,0.0,15.0,0.0,22.0,342.0,22.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.67,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr deleg path regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path deleg path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/helm/tasks/main.yml,100.0,10.0,52.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,221.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.92,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm命令别名 lineinfil dest path state present regexp alia helm line alia helmshelm tl tillernamespac helm namespac,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/helm/helm.yml,0.0,0.0,9.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,15.0,0.0,0.0,5.0,roles/helm/helm.yml,easzlab/kubeasz,3.91,host deploy role helm var helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,3.77,tmp endpoint group etcd http endfor etcd endpoint tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,13.0,6.0,11.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,yes,roles/calico/tasks/main.yml,100.0,17.0,83.0,9.0,57.0,28.0,51.0,44.0,22.0,40.0,4.5,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,286.0,18.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.61,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat path path name calico rbac templat path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,3.0,1.0,12.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,-5.0,1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,-3.0,0.0,-4.0,36.0,2.0,0.0,0.0,0.04
0.0,21.0,8.0,56.0,1.0,1.0,1.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/vars/RedHat.yml,100.0,6.0,21.0,3.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.1
0.0,2.0,8.0,56.0,-56.0,-56.0,-56.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/main.yml,100.0,1.0,2.0,0.0,2.0,2.0,2.0,58.0,58.0,58.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,-1.0,-14.0,-42.0,0.0,0.0,0.0,0.0,-4.0,-1.0,0.0,0.0,-15.0,0.0,0.0,0.0,0.0,0.0,0.0,-12.0,0.0,0.0,0.0,-2.0,-39.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,-15.0,-111.0,-3.0,0.0,0.0,-3.3
0.0,5.0,8.0,56.0,3.0,2.0,2.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,2.0,no,roles/prepare/tasks/centos.yml,96.97,5.0,32.0,7.0,18.0,9.0,17.0,15.0,8.0,15.0,1.5,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,53.0,18.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.11,name 删除centos默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name cento ulimit templat path path,0.0,0.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,12.0,0.0,0.0,-0.12
0.0,2.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,8.0,56.0,4.0,4.0,4.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/defaults/main.yml,100.0,44.0,91.0,113.0,8.0,8.0,8.0,4.0,4.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0
0.0,5.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/harbor/tasks/main.yml,0.0,9.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,131.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.24,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir downharborofflineinstal harbor ver path dest data copi ye keep newer ye mode name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,8.0,56.0,14.0,14.0,14.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/auditd.yml,100.0,2.0,11.0,0.0,14.0,14.0,14.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,3.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.58,router balanc alg roundrobin ingress nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/docker/tasks/main.yml,0.0,8.0,37.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.64,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,8.0,56.0,4.0,4.0,4.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/cilium/defaults/main.yml,100.0,6.0,8.0,8.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.82,node multipl network debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,0.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.09
0.0,6.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,2.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,2.58,proxi mode iptabl kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,4.0,24.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,54.0,5.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.2,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,8.0,56.0,-3.0,-3.0,-3.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/pam.yml,100.0,13.0,81.0,4.0,14.0,14.0,14.0,17.0,17.0,17.0,10.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,-1.0,-6.0,4.0,0.0,0.0,0.0,-1.0,1.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,-1.0,-23.0,0.0,0.0,0.0,0.03
3.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,8.0,56.0,10.0,10.0,10.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/modprobe.yml,100.0,4.0,19.0,0.0,11.0,11.0,11.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,-1.0,2.0,8.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,33.0,2.0,0.0,1.0,0.97
0.0,8.0,8.0,56.0,-9.0,-9.0,-9.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/minimize_access.yml,100.0,3.0,30.0,1.0,4.0,4.0,4.0,13.0,13.0,13.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,-1.0,-8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,-8.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-26.0,-2.0,0.0,-1.0,-0.22
0.0,6.0,8.0,56.0,6.0,3.0,4.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,14.0,68.0,6.0,26.0,13.0,20.0,20.0,10.0,16.0,4.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,233.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.4,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,1.0,1.0,6.0,-1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,-2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,18.0,1.0,0.0,0.0,0.02
0.0,8.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/sysctl.yml,100.0,8.0,60.0,0.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,8.0,56.0,2.0,2.0,2.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/prepare/tasks/main.yml,100.0,8.0,44.0,3.0,3.0,3.0,3.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,127.0,6.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.93,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent name prepar dir file name item statedirectori item bin dir dir path name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl tag upgrad name kubeconfig配置文件 synchron path path deleg path name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash import task path,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.02
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,12.0,56.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,221.0,13.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.21,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,8.0,56.0,1.0,0.0,1.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,2.0,1539701276.0,1.0,yes,roles/calico/defaults/main.yml,100.0,7.0,10.0,10.0,2.0,1.0,1.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,35.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.82,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/login_defs.yml,100.0,1.0,7.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,8.0,56.0,59.0,59.0,59.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,1.0,1539701276.0,1.0,no,roles/os-harden/tasks/hardening.yml,100.0,15.0,43.0,0.0,59.0,59.0,59.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,8.0,56.0,0.0,0.0,0.0,980cd7be78c3f4cc5978762b0b3b42fee7a7a28a,0.0,1539701276.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,51.0,5.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.48,name 准备alicloudnas配置目录 file name base dir manifestsstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest base dir manifestsstoragealicloudna path path name path name 复制aliclouddisk配置 copi src path dest base dir path name 开始部署aliclouddisk存储 shell bin dir kubectl appli base dir path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli base dir manifestsstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,1.0,1.0,1.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/etcd/tasks/main.yml,100.0,8.0,32.0,2.0,3.0,3.0,3.0,2.0,2.0,2.0,3.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,9.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,105.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.87,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd tag upgrad etcd,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,-0.01
0.0,9.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,20.0,9.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,158.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,4.97,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,13.0,88.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,3.0,0.0,0.0,21.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,51.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,21.0,329.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.26,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name manifests至 deploy节点 synchron src base dir manifest dest base dir ansibl env ssh client path inventori hostnam name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host ansibl env ssh client path inventori hostnam,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/etcd/defaults/main.yml,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,3.97,tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cilium/tasks/main.yml,0.0,14.0,79.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,9.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,261.0,15.0,0.0,4.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.64,block name 在deploy 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl optkubekubesystemcilium name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin busybox offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/flannel/defaults/main.yml,0.0,5.0,5.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.12,node multipl network flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/harbor/defaults/main.yml,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,1.0,harbor ver,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,8.0,8.0,8.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,yes,roles/lb/tasks/main.yml,100.0,17.0,54.0,1.0,8.0,8.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,14.0,6.0,0.0,0.0,18.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,18.0,189.0,18.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.71,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut major version tag restart name haproxi templat path path tag restart name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,20.0,2.0,0.0,1.0,0.28
0.0,4.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,2.0,8.0,33.0,33.0,33.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/deploy/create-admin-kubeconfig.yml,100.0,2.0,27.0,4.0,33.0,33.0,33.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,98.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.4,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/docker/defaults/main.yml,0.0,4.0,7.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.81,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,180.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.23,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,8.0,33.0,33.0,33.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,yes,roles/cluster-addon/tasks/main.yml,100.0,30.0,131.0,1.0,34.0,34.0,34.0,1.0,1.0,1.0,2.0,0.0,0.0,7.0,1.0,32.0,14.0,0.0,0.0,1.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,122.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,521.0,30.0,0.0,8.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.18,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run traefikingresscontrol pod path ingress instal ye ignor error block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,2.0,6.0,27.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,110.0,6.0,0.0,1.0,0.08
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,3.0,28.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,45.0,17.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.92,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,8.0,7.0,4.0,7.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,2.0,1544081859.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,7.0,22.0,11.0,8.0,4.0,7.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,53.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.18,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,4.0,1.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.27
0.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,yes,roles/kube-node/tasks/main.yml,0.0,21.0,97.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,22.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,72.0,0.0,2.0,0.0,0.0,0.0,0.0,15.0,0.0,22.0,342.0,22.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.67,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 获取csr 请求信息 shell sleep bin dir kubectl get csr deleg path regist csr info run name approvekubeletcsr shell bin dir kubectl get csrgrep pend awk print xarg bin dir kubectl certif approv pend csr path deleg path run name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,3.0,1544081859.0,2.0,no,roles/helm/tasks/main.yml,50.0,10.0,52.0,1.0,14.0,5.0,7.0,14.0,5.0,7.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,-0.01
3.0,3.0,2.0,8.0,-8.0,-8.0,-8.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/helm/helm.yml,100.0,0.0,3.0,0.0,0.0,0.0,0.0,8.0,8.0,8.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,-6.0,-6.0,0.0,-6.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-11.0,0.0,0.0,-5.0,-1.91
0.0,9.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,6.0,6.0,6.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/kube-master/defaults/main.yml,100.0,1.0,5.0,4.0,6.0,6.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.06,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path,0.0,3.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.29
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/calico/tasks/main.yml,100.0,17.0,83.0,9.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,286.0,18.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.61,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat path path name calico rbac templat path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,5.0,32.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,53.0,18.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.11,name 删除centos默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name cento ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/harbor/tasks/main.yml,0.0,9.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,131.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.24,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir downharborofflineinstal harbor ver path dest data copi ye keep newer ye mode name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,2.0,2.0,2.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/lb/defaults/main.yml,100.0,2.0,4.0,9.0,2.0,2.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.17
0.0,4.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,yes,roles/docker/tasks/main.yml,0.0,8.0,37.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.64,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cilium/defaults/main.yml,0.0,6.0,8.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.82,node multipl network debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/helm/defaults/main.yml,100.0,0.0,6.0,2.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,2.0,8.0,44.0,22.0,41.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,2.0,1544081859.0,1.0,no,roles/deploy/create-read-kubeconfig.yml,100.0,6.0,33.0,5.0,44.0,22.0,41.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,123.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.7,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti read clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet userread name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,2.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,2.58,proxi mode iptabl kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,5.0,5.0,5.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,yes,roles/prepare/tasks/common.yml,100.0,5.0,28.0,3.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,68.0,6.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.44,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 加载nf conntrack kernel modprob namenf conntrack statepres ignor error ansibl kernel name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,0.24
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,68.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,233.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.4,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,8.0,4.0,4.0,4.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/lb/lb.yml,100.0,1.0,3.0,0.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,2.0,2.0,2.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/prepare/tasks/main.yml,100.0,9.0,45.0,3.0,4.0,4.0,4.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,33.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,136.0,7.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.97,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name kubectl copi src base dir binkubectl dest bin dir kubectl mode tag upgrad name kubeconfig配置文件 synchron path path deleg path name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash import task path,0.0,-1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,9.0,1.0,0.0,0.0,0.04
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,8.0,2.0,2.0,2.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,12.0,58.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,225.0,13.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.21,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0
0.0,10.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,yes,roles/calico/defaults/main.yml,100.0,7.0,10.0,10.0,4.0,4.0,4.0,4.0,4.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,35.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.82,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico node ver calico cni ver calico kube control ver calico offlin calico calico node ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,0.0,1544081859.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,8.0,0.0,0.0,0.0,c3033dc4de1059bf1b908a6576020f156fafc5c2,1.0,1544081859.0,1.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,100.0,4.0,8.0,6.0,9.0,9.0,9.0,9.0,9.0,9.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,-6.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-26.0,-2.0,0.0,0.0,-0.27
0.0,4.0,3.0,11.0,9.0,9.0,9.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/etcd/tasks/main.yml,100.0,9.0,40.0,2.0,9.0,9.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,126.0,10.0,0.0,2.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,6.07,name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 创建etcd证书目录 file nameetcetcdssl statedirectori name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd工作目录 file namevarlibetcd statedirectori name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,1.0,1.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,21.0,1.0,0.0,1.0,0.2
0.0,9.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,yes,roles/chrony/tasks/main.yml,100.0,11.0,35.0,0.0,4.0,4.0,4.0,4.0,4.0,4.0,4.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.09
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,13.0,88.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,3.0,0.0,0.0,21.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,51.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,21.0,329.0,13.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.26,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name manifests至 deploy节点 synchron src base dir manifest dest base dir ansibl env ssh client path inventori hostnam name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host ansibl env ssh client path inventori hostnam,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/etcd/defaults/main.yml,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,3.97,tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cilium/tasks/main.yml,0.0,14.0,79.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,9.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,261.0,15.0,0.0,4.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.64,block name 在deploy 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl optkubekubesystemcilium name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin busybox offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/flannel/defaults/main.yml,0.0,5.0,5.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.12,node multipl network flannel backend vxlan instal cni imag jmgaoflannel vamd flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/harbor/defaults/main.yml,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,1.0,harbor ver,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,2.0,1547565421.0,2.0,no,roles/lb/tasks/main.yml,75.0,17.0,54.0,1.0,4.0,2.0,3.0,4.0,2.0,3.0,2.0,0.0,0.0,0.0,0.0,17.0,9.0,0.0,0.0,18.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,18.0,201.0,18.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.76,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name apt安装 haproxi apt namehaproxi statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 haproxi yum namehaproxi statelatest ansibl distribut cent ansibl distribut red hat ansibl distribut major version name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name apt安装 keepaliv apt namekeepaliv statelatest ansibl distribut ubuntu ansibl distribut major versionint name yum安装 keepaliv yum namekeepaliv statelatest ansibl distribut cent ansibl distribut red hat ansibl distribut major version name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,0.05
0.0,19.0,3.0,11.0,39.0,39.0,39.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/cluster-addon/tasks/ingress.yml,100.0,7.0,32.0,0.0,39.0,39.0,39.0,0.0,0.0,0.0,1.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/deploy/create-admin-kubeconfig.yml,0.0,2.0,27.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,98.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.4,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/docker/defaults/main.yml,0.0,4.0,7.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.81,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,180.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.23,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,3.0,11.0,-17.0,-8.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,2.0,1547565421.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,27.0,117.0,1.0,3.0,2.0,2.0,20.0,10.0,19.0,1.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,463.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,-2.0,-3.0,-14.0,0.0,0.0,-1.0,0.0,-2.0,0.0,0.0,0.0,1.0,-1.0,0.0,0.0,-1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,-14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-58.0,-4.0,0.0,-1.0,0.03
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,3.0,28.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,45.0,17.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.92,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,20.0,3.0,11.0,2.0,1.0,2.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,2.0,1547565421.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,8.0,23.0,11.0,10.0,5.0,9.0,8.0,4.0,7.0,2.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,55.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.25,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path nginx ingress offlin nginx ingress path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.07
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,21.0,86.0,16.0,12.0,12.0,12.0,12.0,12.0,12.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,2.0,0.0,0.0,0.0,0.0,13.0,0.0,20.0,293.0,20.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.58,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubelet kubeproxi bridg hostloc loopback tag upgrad name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,-11.0,11.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-2.0,0.0,0.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-10.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,-2.0,-49.0,-2.0,0.0,-1.0,-0.09
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,1.0,5.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.06,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/calico/tasks/main.yml,100.0,17.0,83.0,9.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,288.0,18.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.63,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver path path name calico rbac templat path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.02
0.0,21.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,5.0,32.0,7.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,53.0,18.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.11,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name cento ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/harbor/tasks/main.yml,0.0,9.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,131.0,10.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.24,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下载docker compos 二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 安装解压工具 packag name item statepres item zip unzip name 解压harbor离线安装包 unarch src base dir downharborofflineinstal harbor ver path dest data copi ye keep newer ye mode name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,yes,roles/docker/tasks/main.yml,0.0,8.0,37.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,128.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.64,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cilium/defaults/main.yml,0.0,6.0,8.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.82,node multipl network debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/deploy/create-read-kubeconfig.yml,0.0,6.0,33.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,123.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.7,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti read clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet userread name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,4.0,4.0,4.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,3.0,4.0,5.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.0,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod,0.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.42
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,5.0,28.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,68.0,6.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.44,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv ignor error name 加载nf conntrack kernel modprob namenf conntrack statepres ignor error ansibl kernel name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,68.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,233.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.4,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,no,roles/prepare/tasks/main.yml,100.0,9.0,45.0,3.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,33.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,140.0,7.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.98,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name kubectl copi src base dir binkubectl dest bin dir kubectl mode tag upgrad name kubeconfig配置文件 synchron path path deleg path name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash import task path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.01
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,12.0,58.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,13.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,13.0,225.0,13.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.21,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,11.0,-1.0,-1.0,-1.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,1.0,1547565421.0,1.0,yes,roles/calico/defaults/main.yml,100.0,7.0,8.0,11.0,3.0,3.0,3.0,4.0,4.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,31.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.76,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico offlin calico calico ver path,0.0,-2.0,0.0,-2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,-0.06
0.0,7.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,11.0,0.0,0.0,0.0,802dd6c6ec7a1879cb2a1368e8a075a908ff73a1,0.0,1547565421.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,11.0,11.0,11.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/etcd/tasks/main.yml,100.0,9.0,51.0,4.0,16.0,16.0,16.0,5.0,5.0,5.0,3.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,156.0,10.0,0.0,2.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,6.12,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,1.0,0.0,11.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,0.0,0.0,0.05
0.0,9.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,3.0,3.0,3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,14.0,90.0,10.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,8.0,3.0,0.0,0.0,22.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,53.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,22.0,335.0,14.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.31,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir ansibl env ssh client path inventori hostnam name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host ansibl env ssh client path inventori hostnam,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,1.0,0.0,0.0,0.05
0.0,27.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/etcd/defaults/main.yml,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,3.97,tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cilium/tasks/main.yml,0.0,14.0,79.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,9.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,261.0,15.0,0.0,4.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.64,block name 在deploy 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl optkubekubesystemcilium name 创建cilium 证书请求 templat path path name cilium证书和私钥 shell etcciliumssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare cilium name get ciliumetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name ciliumetcdsecret shell etcciliumssl bin dir kubectl creat secret gener kubesystem ciliumetcdsecret fromfileetcdca dir path path path ciliumetcdsecret secret path name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item etcciliumssl path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin busybox offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin busybox offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,-3.0,-3.0,-3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/flannel/defaults/main.yml,100.0,4.0,4.0,7.0,2.0,2.0,2.0,5.0,5.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,-1.0,-1.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-0.12
0.0,2.0,4.0,20.0,4.0,4.0,4.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/harbor/defaults/main.yml,100.0,1.0,2.0,3.0,6.0,6.0,6.0,2.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,2.0
0.0,9.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,62.0,62.0,62.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/ex-lb/tasks/main.yml,100.0,15.0,46.0,1.0,62.0,62.0,62.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,4.0,20.0,15.0,15.0,15.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/ex-lb/defaults/main.yml,100.0,2.0,4.0,9.0,15.0,15.0,15.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,4.0,20.0,-10.0,-10.0,-10.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/lb/tasks/main.yml,100.0,15.0,46.0,1.0,4.0,4.0,4.0,14.0,14.0,14.0,2.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,-2.0,-8.0,0.0,0.0,0.0,0.0,-10.0,-6.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,-52.0,-2.0,0.0,0.0,0.01
0.0,19.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,7.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/deploy/create-admin-kubeconfig.yml,0.0,2.0,27.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,98.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.4,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,20.0,3.0,2.0,3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,2.0,1550591740.0,1.0,no,roles/docker/defaults/main.yml,100.0,5.0,8.0,4.0,4.0,2.0,3.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.91,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.1
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,180.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.23,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,62.0,62.0,62.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/new-etcd/tasks/main.yml,100.0,9.0,51.0,4.0,62.0,62.0,62.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,156.0,10.0,0.0,2.0,roles/new-etcd/tasks/main.yml,easzlab/kubeasz,6.12,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,14.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,117.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,463.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,20.0,-3.0,-3.0,-3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/prepare/tasks/debian.yml,100.0,2.0,26.0,8.0,0.0,0.0,0.0,3.0,3.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,39.0,16.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.78,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn,0.0,2.0,-1.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-6.0,-1.0,0.0,0.0,-0.14
0.0,20.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-addon/defaults/main.yml,0.0,8.0,23.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,55.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.25,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path nginx ingress offlin nginx ingress path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,22.0,22.0,22.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,24.0,105.0,16.0,22.0,22.0,22.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,23.0,344.0,23.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.75,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,51.0,3.0,0.0,0.0,0.17
17.0,17.0,4.0,20.0,19.0,19.0,19.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/new-etcd/clean-etcd.yml,100.0,1.0,17.0,1.0,19.0,19.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,33.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.64,host etcd newetcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,4.0,20.0,4.0,4.0,4.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/new-etcd/defaults/main.yml,100.0,0.0,2.0,2.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,28.0,0.0,0.0,0.0,roles/new-etcd/defaults/main.yml,easzlab/kubeasz,4.52,tmp node group etcd hostvar node name http endfor group newetcd length hostvar group newetcd node name http group newetcd endif etcd node tmp path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
31.0,31.0,4.0,20.0,36.0,36.0,36.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/ex-lb/clean-ex-lb.yml,100.0,5.0,31.0,0.0,36.0,36.0,36.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,1.0,5.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.06,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,20.0,-2.0,-2.0,-2.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/calico/tasks/main.yml,100.0,17.0,81.0,9.0,1.0,1.0,1.0,3.0,3.0,3.0,2.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,61.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,281.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.6,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-7.0,-1.0,0.0,0.0,-0.03
0.0,21.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,-3.0,-3.0,-3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,4.0,30.0,7.0,0.0,0.0,0.0,3.0,3.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,46.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,4.91,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis,0.0,1.0,-1.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-7.0,-1.0,0.0,0.0,-0.2
0.0,2.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,20.0,3.0,3.0,3.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/harbor/tasks/main.yml,100.0,10.0,42.0,1.0,18.0,18.0,18.0,15.0,15.0,15.0,5.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,151.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.25,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,1.0,0.0,0.0,0.01
0.0,75.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,1.0,1.0,1.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/docker/tasks/main.yml,100.0,8.0,38.0,3.0,2.0,2.0,2.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,133.0,9.0,0.0,0.0,roles/docker/tasks/main.yml,easzlab/kubeasz,5.67,name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.03
0.0,8.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cilium/defaults/main.yml,0.0,6.0,8.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,20.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.82,node multipl network debug mode clean start legaci host polici busybox ver cilium ver cilium offlin cilium cilium ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/helm/defaults/main.yml,100.0,0.0,6.0,2.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/deploy/create-read-kubeconfig.yml,0.0,6.0,33.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,123.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.7,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti read clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet userread name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,3.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.0,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,5.0,5.0,5.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/prepare/tasks/common.yml,100.0,7.0,31.0,5.0,10.0,10.0,10.0,5.0,5.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,71.0,8.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.49,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv conntrack ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path,0.0,-1.0,2.0,3.0,2.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,3.0,2.0,0.0,0.0,0.05
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,68.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,233.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.4,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,4.0,20.0,5.0,5.0,5.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,no,roles/ex-lb/ex-lb.yml,100.0,0.0,5.0,0.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,20.0,-27.0,-14.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,2.0,1550591740.0,1.0,no,roles/prepare/tasks/main.yml,100.0,5.0,22.0,3.0,3.0,2.0,3.0,30.0,15.0,27.0,2.5,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,17.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,75.0,3.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.47,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,-4.0,-23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-16.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,-65.0,-4.0,0.0,0.0,-0.51
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,20.0,11.0,11.0,11.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,13.0,68.0,2.0,11.0,11.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,2.0,1.0,0.0,0.0,14.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,50.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,249.0,14.0,0.0,1.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.29,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master name 创建kubeapiserv v的systemd unit文件 templat srckubeapiserv ver path path tag upgrad restart master ver defin ver name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,1.0,1.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,24.0,1.0,0.0,0.0,0.08
0.0,9.0,4.0,20.0,2.0,2.0,2.0,8a4035a579888016a7f0a80b8221afaf4add23a8,1.0,1550591740.0,1.0,yes,roles/calico/defaults/main.yml,100.0,8.0,9.0,11.0,5.0,5.0,5.0,3.0,3.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.16
0.0,7.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,20.0,0.0,0.0,0.0,8a4035a579888016a7f0a80b8221afaf4add23a8,0.0,1550591740.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/etcd/tasks/main.yml,0.0,9.0,51.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,156.0,10.0,0.0,2.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,6.12,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,16.0,5.0,9.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,3.0,1551798654.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,18.0,101.0,11.0,28.0,9.0,21.0,12.0,4.0,12.0,1.0,0.0,0.0,1.0,0.0,9.0,4.0,0.0,0.0,20.0,1.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,21.0,389.0,18.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.62,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 生成随机 basic auth shell export pwd date mdsum head sed sbasic auth pass basic auth pass pwd base dir host connect local path defin name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet block name ansibl 执行节点创建 path file path statedirectori name kubeconfig fetch path path flaty name kubectl 命令的软连接 file src base dir binkubectl destusrbinkubectl statelink connect local name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir name ssh 密钥对至 deploy节点 copi path item path item mode item rsa known host run ansibl env ssh client path inventori hostnam,0.0,1.0,4.0,11.0,1.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,-2.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,-1.0,54.0,4.0,0.0,0.0,0.31
0.0,27.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,3.0,3.0,3.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/etcd/defaults/main.yml,100.0,1.0,3.0,2.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.17
0.0,23.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,-22.0,-11.0,1.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,2.0,1551798654.0,1.0,no,roles/cilium/tasks/main.yml,100.0,11.0,60.0,5.0,13.0,6.0,12.0,35.0,18.0,35.0,3.0,0.0,0.0,0.0,2.0,4.0,1.0,0.0,0.0,12.0,0.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,53.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,203.0,12.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.45,name 在deploy 节点创建cilium 相关目录 file nameoptkubekubesystemcilium statedirectori deleg path run name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 检查内核版本 fail msg kernel ansibl kernel old cilium instal ansibl path path int ansibl path path int name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,-3.0,-3.0,-19.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,3.0,-1.0,0.0,-1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,-58.0,-3.0,0.0,-1.0,-0.19
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,15.0,46.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,2.0,2.0,2.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/lb/tasks/main.yml,100.0,15.0,48.0,1.0,2.0,2.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,153.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.73,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,-0.04
0.0,19.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,7.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/deploy/create-admin-kubeconfig.yml,0.0,2.0,27.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,98.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.4,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/docker/defaults/main.yml,0.0,5.0,8.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.91,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,1.0,1.0,1.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/flannel/tasks/main.yml,100.0,11.0,56.0,5.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,182.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.22,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,-0.01
46.0,46.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,117.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,463.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,2.0,26.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,39.0,16.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.78,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,20.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-addon/defaults/main.yml,0.0,8.0,23.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,55.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.25,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path nginx ingress offlin nginx ingress path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/kube-node/tasks/main.yml,0.0,24.0,105.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,23.0,344.0,23.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.75,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
31.0,31.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,1.0,5.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.06,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,13.0,5.0,5.0,5.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/cilium/cilium.yml,100.0,0.0,5.0,0.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,5.0,0.0,-9.0,-46.0,-4.0,0.0,0.0,0.0,-4.0,-2.0,0.0,0.0,-10.0,1.0,0.0,-1.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-35.0,0.0,-3.0,0.0,0.0,1.0,1.0,-4.0,0.0,-9.0,-151.0,-10.0,0.0,-2.0,-3.8
0.0,7.0,4.0,13.0,1.0,1.0,1.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/calico/tasks/main.yml,100.0,17.0,82.0,9.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,283.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.6,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0
0.0,21.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,4.0,13.0,-1.0,-1.0,-1.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/etcd/clean-etcd.yml,100.0,1.0,16.0,1.0,1.0,1.0,1.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,-1.0,-1.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-0.06
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,4.0,30.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,46.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,4.91,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,42.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,151.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.25,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,-8.0,-8.0,-8.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/cilium/defaults/main.yml,100.0,4.0,4.0,6.0,5.0,5.0,5.0,13.0,13.0,13.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,-4.0,-2.0,-4.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-10.0,0.0,0.0,0.0,-0.7
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/deploy/create-read-kubeconfig.yml,0.0,6.0,33.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,123.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.7,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti read clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet userread name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,3.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.0,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,7.0,31.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,71.0,8.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.49,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv conntrack ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,13.0,1.0,1.0,1.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,14.0,69.0,6.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,235.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.39,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,-0.01
0.0,8.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,13.0,4.0,1.0,3.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,3.0,1551798654.0,1.0,no,roles/prepare/tasks/main.yml,100.0,6.0,25.0,3.0,8.0,3.0,3.0,4.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,20.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,87.0,4.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.69,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink connect local name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,1.0,0.0,0.0,0.22
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,13.0,6.0,6.0,6.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,1.0,1551798654.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,14.0,73.0,2.0,9.0,9.0,9.0,3.0,3.0,3.0,5.0,0.0,0.0,0.0,1.0,3.0,1.0,0.0,0.0,15.0,0.0,0.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,55.0,0.0,2.0,0.0,0.0,0.0,0.0,5.0,0.0,15.0,262.0,15.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.32,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad name path templat path dest dir path name 版本信息 shell bin dir kubeapiserv version regist ver tag upgrad restart master name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master path name 创建kubeapiserv v的systemd unit文件 templat path path tag upgrad restart master path name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,1.0,5.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,13.0,1.0,0.0,1.0,0.03
0.0,9.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,yes,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,13.0,0.0,0.0,0.0,523d25c59fdb574098f4eb5df54c520dcfa9e15c,0.0,1551798654.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/etcd/tasks/main.yml,0.0,9.0,51.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,10.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,156.0,10.0,0.0,2.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,6.12,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 读取etcd证书stat信息 stat path path regist name 创建etcd证书请求 templat path path path defin name etcd证书和私钥 path defin shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,-6.0,-6.0,-6.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,17.0,97.0,10.0,0.0,0.0,0.0,6.0,6.0,6.0,1.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,19.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,61.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,20.0,361.0,17.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.49,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet block name ansibl 执行节点创建 path file path statedirectori name kubeconfig fetch path path flaty name kubectl 命令的软连接 file src base dir binkubectl destusrbinkubectl statelink connect local name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir name ssh 密钥对至 deploy节点 copi path item path item mode item rsa known host run ansibl env ssh client path inventori hostnam,0.0,0.0,-1.0,-4.0,-1.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,-1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-1.0,-28.0,-1.0,0.0,0.0,-0.13
0.0,27.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,4.0,4.0,4.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,no,roles/cilium/tasks/main.yml,100.0,12.0,63.0,5.0,5.0,5.0,5.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,13.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,13.0,208.0,13.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.44,name 在deploy 节点创建cilium 相关目录 file nameoptkubekubesystemcilium statedirectori deleg path run name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel ver name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,-1.0,-1.0,0.0,0.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,1.0,0.0,0.0,-0.01
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,no,roles/harbor/defaults/main.yml,100.0,1.0,2.0,3.0,4.0,4.0,4.0,4.0,4.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,15.0,46.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/lb/tasks/main.yml,0.0,15.0,48.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,153.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.73,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,7.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/deploy/create-admin-kubeconfig.yml,0.0,2.0,27.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,98.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.4,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti admin clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet useradmin name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/docker/defaults/main.yml,0.0,5.0,8.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.91,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,56.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,182.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.22,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,2.0,10.0,2.0,2.0,2.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,27.0,118.0,2.0,3.0,3.0,3.0,1.0,1.0,1.0,2.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,472.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard bin dir kubectl appli base dir manifestsheapsterheapsteronli deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,2.0,26.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,39.0,16.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,4.78,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,20.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,8.0,23.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,55.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.25,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path nginx ingress offlin nginx ingress path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,10.0,5.0,9.0,af63fcfdff59f763b4565bccd323ce541779227b,2.0,1553248335.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,25.0,114.0,16.0,10.0,5.0,9.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,84.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,24.0,368.0,24.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.82,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash connect local run ignor error name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,1.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,24.0,1.0,0.0,0.0,0.07
31.0,31.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,10.0,6.0,3.0,7.0,af63fcfdff59f763b4565bccd323ce541779227b,2.0,1553248335.0,1.0,no,roles/kube-master/defaults/main.yml,100.0,2.0,8.0,8.0,9.0,4.0,7.0,3.0,2.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,24.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.5,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd,0.0,3.0,1.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.44
5.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/calico/tasks/main.yml,0.0,17.0,82.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,283.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.6,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,4.0,30.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,46.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,4.91,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,42.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,151.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.25,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,10.0,-21.0,-10.0,-3.0,af63fcfdff59f763b4565bccd323ce541779227b,2.0,1553248335.0,1.0,yes,roles/docker/tasks/main.yml,100.0,15.0,77.0,7.0,10.0,5.0,10.0,31.0,16.0,28.0,4.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,3.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,55.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,4.0,256.0,15.0,0.0,3.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.47,name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker ver name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker ver name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink kubeasz instal path,0.0,15.0,7.0,39.0,4.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,-6.0,1.0,0.0,3.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,-5.0,123.0,6.0,0.0,3.0,0.8
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/deploy/create-read-kubeconfig.yml,0.0,6.0,33.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,123.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.7,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti read clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext kubernet clusterkubernet userread name 选择默认上下文 shell bin dir kubectl config usecontext kubernet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,3.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.0,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,7.0,31.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,71.0,8.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.49,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv conntrack ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,69.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,235.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.39,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,10.0,6.0,6.0,6.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,no,roles/prepare/tasks/main.yml,100.0,7.0,30.0,3.0,7.0,7.0,7.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,104.0,5.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.86,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey connect local run name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink connect local run name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,1.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,0.17
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,10.0,26.0,13.0,14.0,af63fcfdff59f763b4565bccd323ce541779227b,2.0,1553248335.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,18.0,95.0,2.0,26.0,13.0,14.0,0.0,0.0,0.0,1.5,0.0,0.0,1.0,1.0,8.0,2.0,0.0,0.0,17.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,18.0,345.0,19.0,0.0,3.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.67,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd name path templat path dest dir path basic auth enabl ye name basic auth user 用户rbac权限 templat path path basic auth enabl ye deleg path run name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye deleg path run name 版本信息 shell bin dir kubeapiserv version regist ver tag upgrad restart master name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master path name 创建kubeapiserv v的systemd unit文件 templat path path tag upgrad restart master path name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master,0.0,0.0,4.0,22.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,2.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,3.0,83.0,4.0,0.0,1.0,0.35
0.0,9.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,1.0,1553248335.0,1.0,yes,roles/calico/defaults/main.yml,100.0,8.0,9.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,10.0,0.0,0.0,0.0,af63fcfdff59f763b4565bccd323ce541779227b,0.0,1553248335.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,-9.0,-4.0,-1.0,94fd7a53b029367382a8624b68fca60677f7d884,2.0,1553960086.0,1.0,no,roles/etcd/tasks/main.yml,100.0,8.0,45.0,2.0,0.0,0.0,0.0,9.0,4.0,8.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,139.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,-1.0,-6.0,-2.0,0.0,0.0,0.0,-4.0,-2.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-17.0,-1.0,0.0,-1.0,-0.19
0.0,9.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statelatest block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,1.0,0.0,1.0,94fd7a53b029367382a8624b68fca60677f7d884,2.0,1553960086.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,17.0,98.0,10.0,6.0,3.0,5.0,5.0,2.0,5.0,2.5,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,19.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,61.0,0.0,3.0,0.0,0.0,0.0,0.0,12.0,0.0,20.0,374.0,17.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.48,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust cluster name certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti user name clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell bin dir kubectl config usecontext context name name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet block name ansibl 执行节点创建 path file path statedirectori name kubeconfig fetch path path flaty name kubectl 命令的软连接 file src base dir binkubectl destusrbinkubectl statelink connect local name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host run ansibl env ssh client path inventori hostnam,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,-0.01
0.0,27.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cilium/tasks/main.yml,0.0,12.0,63.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,13.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,13.0,208.0,13.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.44,name 在deploy 节点创建cilium 相关目录 file nameoptkubekubesystemcilium statedirectori deleg path run name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel ver name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,15.0,46.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/lb/tasks/main.yml,0.0,15.0,48.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,153.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.73,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statelatest name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statelatest name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,7.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
22.0,22.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,no,roles/deploy/create-admin-kubeconfig.yml,100.0,2.0,27.0,4.0,5.0,5.0,5.0,5.0,5.0,5.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,110.0,7.0,0.0,0.0,roles/deploy/create-admin-kubeconfig.yml,easzlab/kubeasz,5.34,host deploy task name 删除原有kubeconfig file path stateabs name 准备kubectl使用的admin 证书签名请求 templat path dest dir path name admin证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare admin name 设置集群参数 shell bin dir kubectl config setclust cluster name certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti user name clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell bin dir kubectl config usecontext context name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,-0.06
0.0,8.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/docker/defaults/main.yml,0.0,5.0,8.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,15.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.91,reg mirror http path reg mirror http path log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,56.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,182.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.22,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,118.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,472.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard bin dir kubectl appli base dir manifestsheapsterheapsteronli deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,13.0,13.0,13.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,no,roles/prepare/tasks/debian.yml,100.0,5.0,35.0,9.0,13.0,13.0,13.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,65.0,19.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.5,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state latest name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,-3.0,3.0,9.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,26.0,3.0,0.0,0.0,0.72
0.0,20.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-addon/defaults/main.yml,0.0,8.0,23.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,55.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.25,dn instal ye dn backend coredn kubedn offlin kubedn path coredn offlin coredn path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metricsserv offlin metricsserv path dashboard instal ye dashboard offlin dashboard path ingress instal ingress backend traefik traefik offlin traefik path nginx ingress offlin nginx ingress path heapster instal heapster offlin heapster path metallb instal metallb protocol layer metallb offlin metallb path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,-1.0,-1.0,-1.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,25.0,113.0,16.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,84.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,24.0,367.0,24.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.82,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash connect local run ignor error name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0
31.0,31.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,9.0,4.0,5.0,94fd7a53b029367382a8624b68fca60677f7d884,2.0,1553960086.0,1.0,no,roles/deploy/defaults/main.yml,100.0,2.0,5.0,2.0,9.0,4.0,5.0,0.0,0.0,0.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.32,expiri cert expiri cluster name cluster user name user context name context,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
3.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,2.0,8.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,24.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.5,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/calico/tasks/main.yml,0.0,17.0,82.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,283.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.6,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,11.0,11.0,11.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,6.0,38.0,9.0,11.0,11.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,71.0,19.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.44,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加epel仓库 yum nameepelreleas statelatest name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state latest name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 重启rsyslog服务 servic namersyslog staterestart,0.0,-1.0,2.0,8.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,25.0,2.0,0.0,0.0,0.53
0.0,2.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,7.0,-1.0,-1.0,-1.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,no,roles/harbor/tasks/main.yml,100.0,10.0,41.0,1.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,150.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.23,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,-1.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-0.02
0.0,75.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,2.0,7.0,1.0,0.0,1.0,94fd7a53b029367382a8624b68fca60677f7d884,2.0,1553960086.0,1.0,yes,roles/docker/tasks/main.yml,100.0,15.0,81.0,4.0,6.0,3.0,5.0,5.0,2.0,5.0,2.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,4.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,266.0,16.0,0.0,3.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.5,name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,-3.0,0.0,4.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,1.0,0.0,0.0,0.03
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
28.0,27.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,1.0,1553960086.0,1.0,no,roles/deploy/create-read-kubeconfig.yml,100.0,6.0,33.0,5.0,5.0,5.0,5.0,5.0,5.0,5.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,22.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,135.0,10.0,0.0,0.0,roles/deploy/create-read-kubeconfig.yml,easzlab/kubeasz,5.65,host deploy task name 在deploy 节点创建相关目录 file pathoptkubekubesystem statedirectori name group read rbac copi path path name 创建group read rbac shell bin dir kubectl appli path name 删除原有kubeconfig file path stateabs name 准备kubectl使用的read 证书签名请求 templat path dest dir path name read证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare read name 设置集群参数 shell bin dir kubectl config setclust cluster name certificateauthor dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell bin dir kubectl config setcredenti user name clientcertif dir path embedcertstru clientkey dir path name 设置上下文参数 shell bin dir kubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell bin dir kubectl config usecontext context name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,-0.05
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,3.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.0,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,3.0,1.0,13.0,94fd7a53b029367382a8624b68fca60677f7d884,3.0,1553960086.0,1.0,yes,roles/prepare/tasks/common.yml,100.0,8.0,33.0,5.0,16.0,5.0,13.0,13.0,4.0,13.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,76.0,9.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.57,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr conntrack ipv conntrack ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,1.0,0.0,0.0,0.08
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,69.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,235.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.39,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/chrony/defaults/main.yml,0.0,3.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,2.0,ntp server path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/prepare/tasks/main.yml,0.0,7.0,30.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,104.0,5.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.86,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey connect local run name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink connect local run name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,-1.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,2.0,1553960086.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,18.0,94.0,2.0,12.0,6.0,12.0,13.0,6.0,12.0,1.5,0.0,0.0,1.0,1.0,8.0,2.0,0.0,0.0,17.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,18.0,344.0,19.0,0.0,3.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.66,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd name path templat path dest dir path basic auth enabl ye name 版本信息 shell bin dir kubeapiserv version regist ver tag upgrad restart master name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master path name 创建kubeapiserv v的systemd unit文件 templat path path tag upgrad restart master path name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye deleg path run name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye deleg path run,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-0.01
0.0,9.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,yes,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,94fd7a53b029367382a8624b68fca60677f7d884,0.0,1553960086.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,45.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,139.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,yes,roles/chrony/tasks/main.yml,100.0,11.0,35.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statepres block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,21.0,21.0,21.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,24.0,116.0,6.0,31.0,31.0,31.0,10.0,10.0,10.0,9.0,0.0,0.0,1.0,0.0,9.0,3.0,0.0,0.0,22.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,78.0,0.0,3.0,0.0,2.0,0.0,0.0,13.0,0.0,23.0,439.0,20.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.61,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet optkubekubesystem name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 删除原有kubeconfig file path stateabs tag creat kctl cfg name group read rbac copi path path kubectl user read tag creat kctl cfg name 创建group read rbac shell bin dir kubectl appli path kubectl user read tag creat kctl cfg name 准备kubectl使用的 kubectl user 证书签名请求 templat src kubectl user path dest dir kubectl user path tag creat kctl cfg name kubectl user 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet kubectl user path bin dir cfssljson bare kubectl user tag creat kctl cfg name 设置集群参数 shell bin dir kubectl config setclust cluster name certificateauthor dir path embedcertstru server kube apiserv tag creat kctl cfg name 设置客户端认证参数 shell bin dir kubectl config setcredenti user name clientcertif dir kubectl user path embedcertstru clientkey dir kubectl user path tag creat kctl cfg name 设置上下文参数 shell bin dir kubectl config setcontext context name cluster cluster name user user name tag creat kctl cfg name 选择默认上下文 shell bin dir kubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet block name ansibl 执行节点创建 path file path statedirectori name kubeconfig fetch path path flaty name kubectl 命令的软连接 file src base dir binkubectl destusrbinkubectl statelink connect local name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host run ansibl env ssh client path inventori hostnam,0.0,1.0,7.0,18.0,-4.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,3.0,65.0,3.0,0.0,0.0,0.13
0.0,27.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/cilium/tasks/main.yml,100.0,12.0,63.0,5.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,13.0,0.0,0.0,5.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,56.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,13.0,208.0,13.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.45,name 在deploy 节点创建cilium 相关目录 file nameoptkubekubesystemcilium statedirectori deleg path run name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin ignor error name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.01
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,yes,roles/ex-lb/tasks/main.yml,100.0,15.0,46.0,1.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statepres name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/lb/tasks/main.yml,100.0,15.0,48.0,1.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,153.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.73,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statepres name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,7.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,128.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.38,block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,5.0,1.0,0.0,2.0,305278e5f715d288f368d5f59996bfd3f77f45d3,2.0,1556935486.0,2.0,no,roles/docker/defaults/main.yml,57.14,5.0,9.0,4.0,4.0,2.0,3.0,3.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.81,reg mirror http path http path log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-0.1
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/flannel/tasks/main.yml,0.0,11.0,56.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,2.0,0.0,0.0,0.0,9.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,10.0,182.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.22,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
46.0,46.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,118.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,1.0,30.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,108.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,472.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.21,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard bin dir kubectl appli base dir manifestsheapsterheapsteronli deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/prepare/tasks/debian.yml,100.0,5.0,35.0,9.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,65.0,19.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.5,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state present name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,28.0,2.0,5.0,8.0,8.0,8.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,8.0,31.0,11.0,16.0,16.0,16.0,8.0,8.0,8.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,87.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.65,dn instal ye dn backend coredn kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path ingress instal ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path heapster instal heapster ver heapster offlin heapster heapster ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,8.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,0.0,0.0,0.4
0.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,yes,roles/kube-node/tasks/main.yml,0.0,25.0,113.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,84.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,24.0,367.0,24.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.82,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash connect local run ignor error name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
31.0,31.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,4.0,4.0,4.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/deploy/defaults/main.yml,100.0,2.0,6.0,5.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.58,expiri cert expiri cluster name cluster user name user context name context kubectl user admin,0.0,1.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.26
3.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,5.0,7.0,4.0,5.0,305278e5f715d288f368d5f59996bfd3f77f45d3,2.0,1556935486.0,1.0,no,roles/kube-master/defaults/main.yml,100.0,3.0,9.0,11.0,12.0,6.0,7.0,5.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.62,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,1.0,1.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.12
5.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/calico/tasks/main.yml,0.0,17.0,82.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,4.0,1.0,0.0,0.0,11.0,1.0,0.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,6.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,283.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.6,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,7.0,4.0,7.0,305278e5f715d288f368d5f59996bfd3f77f45d3,2.0,1556935486.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,7.0,41.0,12.0,12.0,6.0,8.0,5.0,2.0,4.0,2.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,30.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,77.0,18.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.38,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state present name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,1.0,1.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,-1.0,0.0,0.0,-0.06
0.0,2.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,41.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,150.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.23,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,yes,roles/docker/tasks/main.yml,0.0,15.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,4.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,266.0,16.0,0.0,3.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.5,name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,6.0,6.0,6.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,5.0,6.0,7.0,6.0,6.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.58,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv cpum memorymi ephemeralstoragegi hard evict path path,0.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.58
0.0,4.0,2.0,5.0,12.0,12.0,12.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,yes,roles/prepare/tasks/common.yml,100.0,11.0,42.0,3.0,14.0,14.0,14.0,2.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,107.0,12.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.79,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,3.0,9.0,-2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,3.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,31.0,3.0,0.0,0.0,0.22
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,14.0,69.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,6.0,0.0,0.0,0.0,11.0,1.0,0.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,57.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,235.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.39,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,4.0,4.0,4.0,305278e5f715d288f368d5f59996bfd3f77f45d3,1.0,1556935486.0,1.0,no,roles/chrony/defaults/main.yml,100.0,2.0,7.0,2.0,6.0,6.0,6.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.0,ntp server path path path path path local network,0.0,5.0,-1.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,1.0
6.0,6.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/prepare/tasks/main.yml,0.0,7.0,30.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,104.0,5.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.86,import task path ansibl distribut ubuntu ansibl distribut debian import task path ansibl distribut cent ansibl distribut red hat import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey connect local run name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink connect local run name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,5.0,5.0,2.0,5.0,305278e5f715d288f368d5f59996bfd3f77f45d3,2.0,1556935486.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,18.0,99.0,2.0,7.0,4.0,5.0,2.0,1.0,2.0,3.5,0.0,0.0,1.0,1.0,8.0,2.0,0.0,0.0,17.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,80.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,18.0,354.0,19.0,0.0,3.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.61,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run tag restart master name basicauth 随机密码 set fact basic auth pass tmp path tag restart master basic auth enabl ye basic auth pass pwd name path templat path dest dir path basic auth enabl ye tag restart master name 版本信息 shell bin dir kubeapiserv version regist ver tag upgrad restart master name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master path name 创建kubeapiserv v的systemd unit文件 templat path path tag upgrad restart master path name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye deleg path run tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye deleg path run tag restart master,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,-0.05
0.0,9.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,yes,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,5.0,0.0,0.0,0.0,305278e5f715d288f368d5f59996bfd3f77f45d3,0.0,1556935486.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,45.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,139.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/chrony/tasks/main.yml,0.0,11.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,24.0,13.0,0.0,0.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,35.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,174.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.06,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statepres block name chroni server templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent ansibl distribut red hat ansibl distribut major version name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/deploy/tasks/main.yml,0.0,24.0,116.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,9.0,3.0,0.0,0.0,22.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,78.0,0.0,3.0,0.0,2.0,0.0,0.0,13.0,0.0,23.0,439.0,20.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.61,name prepar dir file name item statedirectori item bin dir dir base dir etckubernet optkubekubesystem name 下载证书工具 cfssl和 kubectl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson kubectl name 读取ca证书stat信息 stat path dir path regist name 准备ca配置文件 templat path dest dir path path defin name 准备ca签名请求 templat path dest dir path path defin name 证书和私钥 path defin shell dir bin dir cfssl gencert initca path bin dir cfssljson bare name 删除原有kubeconfig file path stateabs tag creat kctl cfg name group read rbac copi path path kubectl user read tag creat kctl cfg name 创建group read rbac shell bin dir kubectl appli path kubectl user read tag creat kctl cfg name 准备kubectl使用的 kubectl user 证书签名请求 templat src kubectl user path dest dir kubectl user path tag creat kctl cfg name kubectl user 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet kubectl user path bin dir cfssljson bare kubectl user tag creat kctl cfg name 设置集群参数 shell bin dir kubectl config setclust cluster name certificateauthor dir path embedcertstru server kube apiserv tag creat kctl cfg name 设置客户端认证参数 shell bin dir kubectl config setcredenti user name clientcertif dir kubectl user path embedcertstru clientkey dir kubectl user path tag creat kctl cfg name 设置上下文参数 shell bin dir kubectl config setcontext context name cluster cluster name user user name tag creat kctl cfg name 选择默认上下文 shell bin dir kubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest dir path name kubeproxy证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubeproxi name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti kubeproxi clientcertif dir path clientkey dir path embedcertstru path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet userkubeproxi path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet block name ansibl 执行节点创建 path file path statedirectori name kubeconfig fetch path path flaty name kubectl 命令的软连接 file src base dir binkubectl destusrbinkubectl statelink connect local name rsync packag namersync statepres name manifests至 deploy节点 synchron src base dir manifest dest base dir name ssh 密钥对至 deploy节点 copi path item path item mode item rsa path known host run ansibl env ssh client path inventori hostnam,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,2.0,2.0,2.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/cilium/tasks/main.yml,100.0,12.0,65.0,5.0,28.0,28.0,28.0,26.0,26.0,26.0,2.0,0.0,0.0,1.0,0.0,4.0,0.0,0.0,0.0,9.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,10.0,213.0,13.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.49,name 在deploy 节点创建cilium 相关目录 file nameoptkubekubesystemcilium statedirectori deleg path run name cilium daemon set yaml文件 templat path path tag reconf deleg path run name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path cilium offlin ignor error contain runtim docker name cilium网络 shell bin dir kubectl appli optkubekubesystemcilium sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,2.0,0.0,2.0,0.0,0.0,1.0,-2.0,1.0,0.0,0.0,0.0,-4.0,1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-3.0,5.0,0.0,0.0,0.0,0.04
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/flannel/defaults/main.yml,0.0,4.0,4.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,3.0,node multipl network flannel backend vxlan flanneld imag jmgaoflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,6.0,9.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,22.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.97,node multipl network router enabl firewal enabl servic proxi kube router ver busybox ver pull polici present kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,15.0,46.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,46.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,149.0,16.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.77,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp name 设置变量 set fact path name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statepres name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/lb/tasks/main.yml,0.0,15.0,48.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,3.0,0.0,0.0,16.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,16.0,153.0,16.0,0.0,1.0,roles/lb/tasks/main.yml,easzlab/kubeasz,5.73,name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent ansibl distribut red hat ansibl distribut major version tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statepres name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,4.0,24.0,4.0,4.0,4.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/cluster-addon/tasks/ingress.yml,100.0,7.0,36.0,0.0,26.0,26.0,26.0,22.0,22.0,22.0,2.0,0.0,0.0,2.0,0.0,8.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,138.0,8.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.43,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik部署 shell bin dir kubectl appli base dir path deleg path run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress部署 shell bin dir kubectl appli base dir path deleg path run ingress backend nginxingress ignor error,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.05
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,-6.0,-6.0,-6.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/docker/defaults/main.yml,100.0,3.0,6.0,3.0,0.0,0.0,0.0,6.0,6.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.46,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,-3.0,-2.0,-3.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,-0.35
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,2.0,2.0,2.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/flannel/tasks/main.yml,100.0,11.0,58.0,5.0,26.0,26.0,26.0,24.0,24.0,24.0,4.0,0.0,0.0,2.0,0.0,3.0,0.0,0.0,0.0,5.0,2.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,187.0,11.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.26,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemflannel statedirectori name flannel daemon set yaml文件 templat path path deleg path run name 创建flannel cni 相关目录 file name item statedirectori item path optkubeimag name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path flannel offlin ignor error contain runtim docker name flannel网络 shell bin dir kubectl appli optkubekubesystemflannel sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,3.0,0.0,2.0,0.0,0.0,1.0,-2.0,1.0,0.0,0.0,0.0,-4.0,1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-3.0,5.0,0.0,0.0,0.0,0.04
46.0,46.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,43.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,61.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.39,host var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,18.0,4.0,24.0,10.0,10.0,10.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,27.0,128.0,2.0,65.0,65.0,65.0,55.0,55.0,55.0,5.0,0.0,0.0,6.0,1.0,35.0,14.0,0.0,0.0,2.0,6.0,0.0,0.0,5.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,118.0,0.0,3.0,0.0,4.0,0.0,0.0,0.0,0.0,8.0,497.0,26.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.23,block name 在deploy 节点创建相关目录 file path item statedirectori item optkubekubesystemkubedn optkubekubesystemcoredn name dns的部署文件 templat src item path destoptkubekubesystem item item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info deleg path run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend shell bin dir kubectl appli optkubekubesystem dn backend run deleg path kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver部署 shell bin dir kubectl appli base dir manifestsmetricsserv deleg path run metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard镜像若执行失败可忽略 copi src base dir dashboard offlin destoptkubeimag dashboard offlin dashboard offlin download path name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dashboard offlin dashboard offlin imag path contain runtim docker name dashboard部署 shell bin dir kubectl appli base dir manifestsdashboard bin dir kubectl appli base dir manifestsheapsterheapsteronli deleg path run kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 heapster镜像若执行失败可忽略 copi src base dir heapster offlin destoptkubeimag heapster offlin heapster offlin download path name 获取heapster离线镜像推送情况 command optkubeimag regist imag info name heapster的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag heapster offlin heapster offlin imag path contain runtim docker name heapster部署 shell bin dir kubectl appli base dir path deleg path run heapster pod path heapster instal ye ignor error block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path deleg path run name metallb control shell bin dir kubectl appli path deleg path run name metallb configmap shell bin dir kubectl appli optkubekubesystem metallb protocol path deleg path run metallb pod path metallb instal ye ignor error,0.0,1.0,0.0,10.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,0.0,0.0,0.02
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,5.0,35.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,65.0,19.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.5,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state present name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,28.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,8.0,31.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,87.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.65,dn instal ye dn backend coredn kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path ingress instal ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path heapster instal heapster ver heapster offlin heapster heapster ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/kube-node/tasks/main.yml,0.0,25.0,113.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,24.0,0.0,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,84.0,0.0,3.0,0.0,0.0,0.0,0.0,13.0,0.0,24.0,367.0,24.0,0.0,2.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.82,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad name kubeconfig配置文件 synchron path path deleg path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash connect local run ignor error name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name path shell path etckubernet name cni配置文件 templat path path name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path synchron path path deleg path name 创建kubeproxi 服务文件 tag reloadkubeproxi upgrad restart node templat path path name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu deleg path node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error deleg path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
31.0,31.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,97.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.47,host exlb task name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error tag ntp ansibl distribut ubuntu ansibl distribut debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error tag ntp ansibl distribut cent ansibl distribut red hat name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,52.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,33.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,218.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.91,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error name 安装tiller shell bin dir helm init tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/deploy/defaults/main.yml,0.0,2.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.58,expiri cert expiri cluster name cluster user name user context name context kubectl user admin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.0,host deploy role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,3.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.62,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,2.0,2.0,2.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/calico/tasks/main.yml,100.0,17.0,84.0,9.0,28.0,28.0,28.0,26.0,26.0,26.0,2.0,0.0,0.0,2.0,0.0,5.0,1.0,0.0,0.0,7.0,2.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,64.0,0.0,6.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,288.0,17.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.63,block name 在deploy 节点创建相关目录 file name item statedirectori item etccalicossl optkubekubesystemcalico name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path name calico daemon set yaml文件 templat srccalico calico ver main path path deleg path run name node 节点创建calico 相关目录 file name item statedirectori item etccalicossl path optkubeimag block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path calico offlin ignor error contain runtim docker name calico网络 shell bin dir kubectl appli optkubekubesystemcalico sleep deleg path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl name calico synchron srcetccalicossl item destetccalicossl item item path path deleg path name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,2.0,0.0,2.0,0.0,0.0,1.0,-2.0,1.0,0.0,0.0,0.0,-4.0,1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-3.0,5.0,0.0,0.0,0.0,0.03
0.0,21.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,5.0,5.0,5.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,8.0,45.0,12.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,90.0,19.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.66,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state present name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,13.0,1.0,0.0,0.0,0.28
0.0,2.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,41.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,150.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.23,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 synchron src dir item dest dir item item path path path deleg path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,61.0,20.0,56.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,3.0,1558447506.0,1.0,no,roles/containerd/tasks/main.yml,100.0,11.0,50.0,0.0,63.0,21.0,56.0,2.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,5.0,3.0,0.0,0.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,2.0,0.0,0.0,0.0,0.0,3.0,0.0,12.0,157.0,12.0,0.0,1.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.21,name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name libseccomp packag namelibseccomp statepres ansibl distribut ubuntu ansibl distribut debian name libseccomp packag namelibseccomp statepres ansibl distribut cent ansibl distribut red hat ansibl distribut amazon name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ingress tl nodeport,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/docker/tasks/main.yml,0.0,15.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,4.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,5.0,266.0,16.0,0.0,3.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.5,name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.58,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag jmgaotil repo url http path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,4.0,24.0,5.0,2.0,10.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,2.0,1558447506.0,1.0,no,roles/containerd/defaults/main.yml,100.0,1.0,2.0,2.0,10.0,5.0,10.0,5.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.0,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/kube-node/defaults/main.yml,0.0,5.0,6.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,3.58,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv cpum memorymi ephemeralstoragegi hard evict path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,11.0,42.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,107.0,12.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.79,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
4.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,9.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.17,host role role chroni hostvar path ntp enabl ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,4.0,24.0,2.0,2.0,2.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,1.0,1558447506.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,14.0,71.0,6.0,30.0,30.0,30.0,28.0,28.0,28.0,2.0,0.0,0.0,2.0,0.0,7.0,0.0,0.0,0.0,7.0,2.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,4.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,240.0,14.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.41,block name 在deploy 节点创建相关目录 file nameoptkubekubesystemkuberout statedirectori name 准备配置 kuberout daemon set without ipv templat path path servic proxi name 准备配置 kuberout daemon set ipv templat path path servic proxi deleg path run name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap name kubeproxi servic namekubeproxi statestop enabledno servic proxi ignor error name kubeproxy产生的iptables或ipvs规则 shell bin dir kubeproxi cleanup ipvsadm servic proxi ignor error block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item imag path item paus path kuberout offlin busybox offlin ignor error contain runtim docker name kuberout daemon set shell bin dir kubectl appli optkubekubesystemkuberout sleep deleg path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run deleg path retri delay ignor error,0.0,2.0,0.0,2.0,0.0,0.0,1.0,-2.0,1.0,0.0,0.0,0.0,-4.0,1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-3.0,5.0,0.0,0.0,0.0,0.02
0.0,8.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/lb/lb.yml,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/lb/lb.yml,easzlab/kubeasz,1.5,host role,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/chrony/defaults/main.yml,0.0,2.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.0,ntp server path path path path path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni hostvar path ntp enabl ye prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,2.0,1558447506.0,2.0,no,roles/prepare/tasks/main.yml,66.67,7.0,30.0,3.0,3.0,2.0,2.0,3.0,2.0,2.0,1.5,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,96.0,5.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.82,import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey connect local run name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink connect local run name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-8.0,0.0,0.0,0.0,-0.04
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,18.0,99.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,8.0,2.0,0.0,0.0,17.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,80.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,18.0,354.0,19.0,0.0,3.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.61,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul tag upgrad name 分发证书相关 synchron src dir item dest dir item item path path path path path deleg path name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path tag upgrad name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi tag upgrad block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run tag restart master name basicauth 随机密码 set fact basic auth pass tmp path tag restart master basic auth enabl ye basic auth pass pwd name path templat path dest dir path basic auth enabl ye tag restart master name 版本信息 shell bin dir kubeapiserv version regist ver tag upgrad restart master name 创建kubeapiserver的systemd unit文件 templat path path tag upgrad restart master path name 创建kubeapiserv v的systemd unit文件 templat path path tag upgrad restart master path name 创建kubecontrollermanager的systemd unit文件 templat path path tag upgrad restart master name 创建kubescheduler的systemd unit文件 templat path path tag upgrad restart master name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay deleg path run tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye deleg path run tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye deleg path run tag restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,yes,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach path calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,4.0,24.0,0.0,0.0,0.0,bdc49299dec31ba3ca7632aaeae6a0a64b6b5601,0.0,1558447506.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,20.0,-1.0,-1.0,-1.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/etcd/tasks/main.yml,100.0,8.0,44.0,2.0,1.0,1.0,1.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,135.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,0.0
0.0,8.0,5.0,20.0,1.0,1.0,1.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,yes,roles/chrony/tasks/main.yml,100.0,11.0,36.0,0.0,8.0,8.0,8.0,7.0,7.0,7.0,7.0,0.0,0.0,2.0,0.0,16.0,5.0,0.0,0.0,3.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,144.0,3.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.05,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu ansibl distribut major versionint ignor error name 确保已卸载ntp packag namentp stateabs name chroni packag namechroni statepres block name chroni server templat path path ansibl distribut cent red hat amazon name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent red hat amazon name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,-1.0,0.0,1.0,0.0,0.0,0.0,0.0,-8.0,-8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-30.0,0.0,0.0,0.0,-0.01
0.0,6.0,5.0,20.0,-21.0,-4.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,6.0,1561332023.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,20.0,100.0,6.0,119.0,20.0,80.0,140.0,23.0,114.0,2.5,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,15.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,69.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,16.0,385.0,16.0,0.0,1.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.44,name prepar dir file name item statedirectori item base dir path name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey name 读取ca证书stat信息 stat path base dir path regist name 准备ca配置文件和签名请求 templat src item path dest base dir path item item path path path defin name 证书和私钥 path defin shell base dir path base dir bincfssl gencert initca path base dir bincfssljson bare block name 删除原有kubeconfig file path stateabs ignor error name group read rbac copi path path user name read name 创建group read rbac shell base dir binkubectl appli path user name read name 准备kubectl使用的 user name 证书签名请求 templat src user name path dest base dir path user name path name user name 证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet user name path base dir bincfssljson bare user name name 设置集群参数 shell base dir binkubectl config setclust cluster name certificateauthor base dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell base dir binkubectl config setcredenti user name clientcertif base dir path user name path embedcertstru clientkey base dir path user name path name 设置上下文参数 shell base dir binkubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell base dir binkubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest base dir path name kubeproxy证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet path base dir bincfssljson bare kubeproxi name 设置集群参数 shell base dir binkubectl config setclust kubernet certificateauthor base dir path embedcertstru server kube apiserv kubeconfig base dir path name 设置客户端认证参数 shell base dir binkubectl config setcredenti kubeproxi clientcertif base dir path clientkey base dir path embedcertstru kubeconfig base dir path name 设置上下文参数 shell base dir binkubectl config setcontext default clusterkubernet userkubeproxi kubeconfig base dir path name 选择默认上下文 shell base dir binkubectl config usecontext default kubeconfig base dir path name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink name ansibl 控制端写入环境变量 path lineinfil dest path state present regexp kubeasz line export path base dir bin path ignor error name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash ignor error name ansibl 控制端创建 kubectl 软链接 file src base dir binkubectl destusrbinkubectl statelink ignor error,0.0,1.0,-4.0,-16.0,0.0,0.0,0.0,0.0,-3.0,-1.0,0.0,0.0,-7.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-9.0,0.0,-1.0,0.0,0.0,0.0,0.0,-7.0,0.0,-7.0,-54.0,-4.0,0.0,0.0,-0.17
0.0,27.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,20.0,68.0,11.0,30.0,8faefc65123b347bca2d60ad595352b68b283270,6.0,1561332023.0,1.0,no,roles/kube-node/tasks/node_lb.yml,100.0,12.0,52.0,4.0,70.0,12.0,30.0,2.0,0.0,2.0,1.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,9.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,50.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,10.0,166.0,13.0,0.0,0.0,roles/kube-router/templates/kuberouter-all.yaml.j2,easzlab/kubeasz,6.1,name fail info fail msg kubenod node exlb node time inventori hostnam group exlb tag restart name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 停止haproxy服务 shell systemctl stop haproxi tag restart name 开启haproxy服务 shell systemctl start haproxi group kubemast length tag restart block name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name restart kubenod servic servic name item staterestart item kubelet kubeproxi ignor error master chg ye group kubemast length tag restart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,8.0,5.0,20.0,-1.0,0.0,7.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/cilium/tasks/main.yml,100.0,12.0,64.0,5.0,17.0,8.0,9.0,18.0,9.0,16.0,3.5,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,8.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,212.0,11.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.52,name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag optkubekubesystem name cilium daemon set yaml文件 templat path path tag reconf name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim docker name cilium的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim containerd name cilium网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,1.0,0.0,-1.0,0.0,0.0,0.0,0.0,2.0,2.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-1.0,-2.0,0.0,0.0,0.03
0.0,4.0,5.0,20.0,28.0,28.0,28.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/clean/tasks/main.yml,100.0,5.0,22.0,0.0,28.0,28.0,28.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,17.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,56.0,1.0,0.0,0.0,roles/clean/tasks/main.yml,easzlab/kubeasz,4.68,import task clean path del master ye import task clean path del node ye import task clean path del etcd ye import task clean path del ye import task clean path del chroni ye name clean env path lineinfil dest path state absent regexp item item kubeasz helm complet kubectl complet crictl complet helm tl enabl del env ye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,3.0,5.0,20.0,-4.0,-2.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/flannel/defaults/main.yml,100.0,3.0,3.0,5.0,2.0,1.0,1.0,6.0,3.0,5.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.58,flannel backend vxlan flanneld imag easzlabflannel vamd flannel offlin flannel path,0.0,-1.0,-1.0,-1.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-0.42
0.0,10.0,5.0,20.0,11.0,11.0,11.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/clean/tasks/clean_chrony.yml,100.0,1.0,10.0,0.0,11.0,11.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_chrony.yml,easzlab/kubeasz,4.45,block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,-5.0,-5.0,-5.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/kube-router/defaults/main.yml,100.0,5.0,6.0,7.0,5.0,5.0,5.0,10.0,10.0,10.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.62,overlay type full firewal enabl kube router ver busybox ver kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,-3.0,-1.0,-3.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,0.0,0.0,-0.35
0.0,13.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,20.0,7.0,7.0,7.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,yes,roles/ex-lb/tasks/main.yml,100.0,16.0,51.0,2.0,10.0,10.0,10.0,3.0,3.0,3.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,17.0,0.0,0.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,51.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,17.0,162.0,17.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.87,name fail info fail msg exlb node kubenod node time inventori hostnam group kubenod name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu debian name haproxi packag namehaproxi statepres name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name keepaliv packag namekeepaliv statepres name 创建keepalived配置目录 file nameetckeepaliv statedirectori name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,1.0,5.0,1.0,0.0,0.0,0.0,-2.0,-3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,1.0,0.0,0.0,0.1
0.0,4.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,2.0,4.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,2.75,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,26.0,5.0,20.0,6.0,3.0,6.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/cluster-addon/tasks/ingress.yml,100.0,9.0,40.0,0.0,14.0,7.0,10.0,8.0,4.0,4.0,2.0,0.0,0.0,2.0,0.0,12.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,176.0,6.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.57,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag traefik offlin traefik offlin imag path contain runtim containerd name traefik部署 shell base dir binkubectl appli base dir path connect local run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim containerd name nginx ingress部署 shell base dir binkubectl appli base dir path connect local run ingress backend nginxingress ignor error,0.0,4.0,2.0,4.0,0.0,0.0,0.0,0.0,4.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,-2.0,0.0,0.0,0.14
0.0,4.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/docker/defaults/main.yml,0.0,3.0,6.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.46,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,5.0,20.0,-1.0,0.0,7.0,8faefc65123b347bca2d60ad595352b68b283270,3.0,1561332023.0,1.0,no,roles/flannel/tasks/main.yml,100.0,10.0,58.0,5.0,20.0,7.0,9.0,21.0,7.0,11.0,4.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,191.0,9.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name flannel daemon set yaml文件 templat path path name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim docker name flannel的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim containerd name flannel网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,-1.0,0.0,0.0,0.0,-1.0,0.0,2.0,2.0,0.0,0.0,1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,-2.0,0.0,0.0,-0.02
51.0,51.0,5.0,20.0,5.0,2.0,5.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/os-harden/os-harden.yml,100.0,1.0,48.0,2.0,8.0,4.0,6.0,3.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,67.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.42,host kubemast kubenod etcd exlb chroni var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,5.0,5.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.03
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,17.0,17.0,17.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/clean/defaults/main.yml,100.0,5.0,6.0,6.0,17.0,17.0,17.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cilium/templates/cilium-csr.json.j2,easzlab/kubeasz,2.29,del master del node del etcd del del chroni del env,0.0,3.0,-10.0,-42.0,5.0,0.0,0.0,0.0,-7.0,-3.0,0.0,0.0,-16.0,1.0,0.0,-2.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-42.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,-15.0,-141.0,-16.0,0.0,-1.0,-3.44
0.0,14.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,5.0,20.0,-5.0,-1.0,15.0,8faefc65123b347bca2d60ad595352b68b283270,5.0,1561332023.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,27.0,122.0,3.0,79.0,16.0,25.0,84.0,17.0,37.0,2.0,0.0,0.0,4.0,2.0,37.0,20.0,0.0,0.0,7.0,4.0,0.0,2.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,106.0,0.0,6.0,0.0,5.0,0.0,0.0,1.0,0.0,11.0,519.0,21.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.4,name node 节点创建相关目录 file path item statedirectori item optkubekubesystem name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc name 设置变量 cluster dn svc set fact cluster dn svc dn svc path name dns的部署文件 templat src item path destoptkubekubesystem item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend 的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag dn offlin dn offlin imag path contain runtim containerd name dn backend shell bin dir kubectl appli optkubekubesystem dn backend path run kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim containerd name metricsserver部署 shell base dir binkubectl appli base dir manifestsmetricsserv run connect local metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard heapster镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item dashboard offlin heapster offlin name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard heapster的离线镜像dock shell bin dir docker load optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim docker name dashboard heapster的离线镜像containerd shell bin dir ctr path imag import optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim containerd name dashboard部署 shell base dir binkubectl appli base dir manifestsdashboard base dir binkubectl appli base dir manifestsheapsterheapsteronli run connect local kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metallb offlin metallb offlin imag path contain runtim containerd name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path name metallb control shell bin dir kubectl appli path bin dir kubectl appli optkubekubesystem metallb protocol path run metallb pod path metallb instal ye ignor error,0.0,-5.0,0.0,-6.0,1.0,0.0,-2.0,1.0,2.0,6.0,0.0,0.0,5.0,-2.0,0.0,2.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-12.0,0.0,3.0,0.0,1.0,0.0,0.0,1.0,0.0,3.0,22.0,-5.0,0.0,0.0,0.17
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/prepare/tasks/debian.yml,0.0,5.0,35.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,65.0,19.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.5,name 删除ubuntu默认安装 apt name ufw lxd lxdclient lxcf lxccommon state absent name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state present name ulimit lineinfil dest etcprofil regexp ulimit shn line ulimit shn name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,5.0,20.0,-2.0,-1.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,7.0,30.0,11.0,6.0,3.0,5.0,8.0,4.0,7.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,85.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.62,dn instal ye dn backend coredn kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path heapster ver heapster offlin heapster heapster ver path ingress instal ye ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,-1.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-0.03
0.0,5.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,5.0,20.0,18.0,18.0,18.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,yes,roles/clean/tasks/clean_etcd.yml,100.0,1.0,16.0,1.0,18.0,18.0,18.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,3.0,0.0,0.0,roles/clean/tasks/clean_etcd.yml,easzlab/kubeasz,4.86,block name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path dir inventori hostnam group etcd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file namebackupk statedirectori name 准备指定的备份etcd copi src base dir rolesclusterbackupfilessnapshot restor dest path name 清理原备份出来数据 file namebackupk node name path stateabs name etcd 数据恢复 shell backupk etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell backupk node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,20.0,-24.0,-5.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,5.0,1561332023.0,1.0,yes,roles/kube-node/tasks/main.yml,100.0,24.0,100.0,6.0,67.0,13.0,41.0,91.0,18.0,57.0,4.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,23.0,0.0,0.0,4.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,0.0,0.0,0.0,13.0,0.0,23.0,339.0,22.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.82,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad import task node path inventori hostnam group kubemast name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name cni配置文件 templat path path name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc tag restart node name 设置变量 cluster dn svc set fact cluster dn svc dn svc path tag restart node name 创建kubelet的systemd unit文件 templat path path tag restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path apiserv lineinfil dest path regexp server line server kube apiserv name 创建kubeproxi 服务文件 templat path path tag reloadkubeproxi restart node name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay tag reloadkubeproxi upgrad restart node name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,-1.0,-13.0,-10.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,-1.0,0.0,0.0,2.0,-1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,-9.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-28.0,-2.0,0.0,1.0,0.0
31.0,31.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/ex-lb/clean-ex-lb.yml,100.0,5.0,31.0,0.0,11.0,11.0,11.0,11.0,11.0,11.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,90.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.4,host exlb task block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-7.0,0.0,0.0,0.0,-0.07
0.0,4.0,5.0,20.0,3.0,3.0,3.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/helm/tasks/main.yml,100.0,10.0,55.0,1.0,6.0,6.0,6.0,3.0,3.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,225.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.95,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error run name 安装tiller shell bin dir helm init historymax histori max tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url upgrad ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.04
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/deploy/defaults/main.yml,100.0,2.0,6.0,5.0,7.0,4.0,6.0,7.0,4.0,6.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.95,expiri cert expiri kube apiserv http group kubemast cluster name cluster user name admin context name context cluster name user name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.37
3.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/helm/helm.yml,100.0,0.0,3.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.58,host group kubemast role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.58
0.0,9.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,3.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.62,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,5.0,20.0,18.0,18.0,18.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/clean/tasks/clean_master.yml,100.0,1.0,16.0,1.0,18.0,18.0,18.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,44.0,2.0,0.0,0.0,roles/clean/tasks/clean_master.yml,easzlab/kubeasz,4.96,name stop disabl kubemast servic servic name item statestop enabledno item kubeapiserv kubecontrollermanag kubeschedul ignor error inventori hostnam group kubemast name remov file dir kubemast node file name item stateabs item varrunkubernet path path path inventori hostnam group kubemast,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,7.0,5.0,20.0,-8.0,-3.0,7.0,8faefc65123b347bca2d60ad595352b68b283270,3.0,1561332023.0,1.0,no,roles/calico/tasks/main.yml,100.0,15.0,78.0,9.0,40.0,13.0,30.0,48.0,16.0,46.0,2.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,274.0,14.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.58,name 在节点创建相关目录 file name item statedirectori item etccalicossl path optkubeimag optkubekubesystem name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path run name calico daemon set yaml文件 templat srccalico calico ver main path path block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path calico offlin ignor error item imag path contain runtim docker name calico的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path calico offlin ignor error item imag path contain runtim containerd name calico网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl ignor error name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,-2.0,-2.0,-6.0,0.0,0.0,-1.0,0.0,2.0,2.0,0.0,0.0,4.0,-1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,-1.0,0.0,0.0,0.0,0.0,3.0,0.0,3.0,-14.0,-3.0,0.0,0.0,-0.05
0.0,13.0,5.0,20.0,15.0,8.0,16.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/clean/tasks/clean_lb.yml,100.0,1.0,13.0,1.0,21.0,10.0,16.0,6.0,3.0,6.0,1.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_lb.yml,easzlab/kubeasz,4.72,block name servic keepaliv haproxi servic name item statestop enabledno item keepaliv haproxi ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv inventori hostnam group kubenod inventori hostnam group exlb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,21.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,8.0,45.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,90.0,19.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.66,name 删除centosredhat默认安装 yum name firewalld pythonfirewal firewalldfilesystem state absent name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state present name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,112.0,5.0,20.0,138.0,69.0,141.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/clean/tasks/clean_node.yml,100.0,15.0,120.0,3.0,169.0,84.0,141.0,31.0,16.0,31.0,1.5,0.0,0.0,1.0,0.0,7.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,356.0,16.0,0.0,1.0,roles/clean/tasks/clean_node.yml,easzlab/kubeasz,6.76,block name stop disabl kubenod servic servic name item statestop enabledno item kubelet kubeproxi ignor error name umount kubelet filesystem shell mount grep varlibkubelet awk print xarg umount exit arg warn ignor error name remov file dir kubenod node file name item stateabs item varlibkubelet varlibkubeproxi path path optkubekubesystem etckubernet dir path block name check contain kubeasz run shell docker psgrep kubeasz echo found regist instal info block name stop disabl docker servic servic name docker state stop enabl ignor error name unmount docker filesystem mount pathvarrundockernetnsdefault stateunmount name unmount docker filesystem mount pathvarlibdockeroverlay stateunmount name remov file dir file name item stateabs item varlibdock varrundock etcdock path path path etcbash path usrbindock kubeasz instal path contain runtim docker block name stop disabl containerd servic servic name containerd state stop enabl ignor error name umount containerd filesystem shell mount grep path awk print xarg umount exit arg warn ignor error name remov file dir file name item stateabs item etccontainerd path path optcontainerd varlibcontainerd varruncontainerd contain runtim containerd name remov file dir file name item stateabs item etccni runflannel etccalico varruncalico varlibcalico varlogcalico etccilium varruncilium sysfsbpftc varlibcni varlibkuberout optkubekubeovn optkubekubesystem varrunopenvswitch etcoriginopenvswitch etcopenvswitch varlogopenvswitch name cleanup network shell link del tunl link del flannel link del cni link del mynet link del kubebridg link del dummi link del kubeipv link del cilium net link del cilium vxlan link del ovn link del ovssystem ignor error name cleanup network shell systemctl restart network systemctl restart network ignor error name cleanup calico rout shell routegrep birds sblackhol awk print rout del done cluster network calico ignor error name cleanup iptabl shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl inventori hostnam group kubemast inventori hostnam group kubenod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,5.0,20.0,5.0,5.0,5.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/kube-ovn/defaults/main.yml,100.0,1.0,2.0,2.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/kube-ovn/defaults/main.yml,easzlab/kubeasz,2.58,ovn node group kubemast kube ovn offlin kube ovn path,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,5.0,20.0,-1.0,-1.0,-1.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/harbor/tasks/main.yml,100.0,10.0,40.0,1.0,1.0,1.0,1.0,2.0,2.0,2.0,2.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,146.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.22,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-4.0,0.0,0.0,0.0,-0.01
0.0,75.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,5.0,20.0,8.0,3.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,3.0,1561332023.0,1.0,no,roles/containerd/tasks/main.yml,100.0,13.0,56.0,0.0,11.0,4.0,8.0,3.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,169.0,14.0,0.0,2.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.32,name 获取是否已经安装docker shell systemctl statu dockergrep activ echo found regist docker statu name fail info fail msg docker alreadi instal run docker path name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name libseccomp packag namelibseccomp statepres ansibl distribut ubuntu debian name libseccomp packag namelibseccomp statepres ansibl distribut cent red hat amazon name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,0.0,0.0,2.0,6.0,0.0,0.0,0.0,0.0,-2.0,-3.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,12.0,2.0,0.0,1.0,0.11
0.0,22.0,5.0,20.0,8.0,4.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,yes,roles/docker/tasks/main.yml,100.0,17.0,87.0,4.0,26.0,13.0,25.0,18.0,9.0,17.0,2.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,3.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,4.0,290.0,18.0,0.0,4.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.6,name 获取是否已经安装containerd shell systemctl statu containerdgrep activ echo found regist containerd statu name fail info fail msg containerd alreadi instal run containerd path name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker block name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,6.0,2.0,6.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,24.0,2.0,0.0,1.0,0.1
0.0,4.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,20.0,1.0,1.0,1.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/helm/defaults/main.yml,100.0,0.0,7.0,2.0,2.0,2.0,2.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.81,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag easzlabtil repo url http path histori max,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.23
0.0,2.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/containerd/defaults/main.yml,0.0,1.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.0,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,5.0,20.0,23.0,5.0,7.0,8faefc65123b347bca2d60ad595352b68b283270,5.0,1561332023.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,8.0,19.0,14.0,27.0,5.0,10.0,4.0,1.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,52.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,4.83,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv enabl ye kube reserv cpum memorymi ephemeralstoragegi sy reserv cpum memorymi ephemeralstoragegi hard evict path path balanc alg roundrobin kube apiserv inventori hostnam group kubemast http inventori hostnam els group kubemast length http els http group kubemast endif endif master chg,0.0,8.0,3.0,13.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,1.25
0.0,4.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,yes,roles/prepare/tasks/common.yml,0.0,11.0,42.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,107.0,12.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.79,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,5.0,20.0,5.0,2.0,5.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/chrony/chrony.yml,100.0,0.0,8.0,0.0,7.0,4.0,6.0,2.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.55,host kubemast kubenod etcd exlb chroni role role chroni group chroni length,5.0,5.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.38
0.0,8.0,5.0,20.0,69.0,34.0,78.0,8faefc65123b347bca2d60ad595352b68b283270,2.0,1561332023.0,1.0,no,roles/kube-ovn/tasks/main.yml,100.0,10.0,54.0,5.0,85.0,42.0,78.0,16.0,8.0,16.0,3.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,43.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,195.0,9.0,0.0,3.0,roles/kube-ovn/tasks/main.yml,easzlab/kubeasz,6.23,name 创建相关目录 file name item statedirectori item path optkubeimag optkubekubeovn name path templat path path name path templat path path block name 检查是否已下载离线kube ovn镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kube ovn offlin ignor error name 获取kube ovn离线镜像推送情况 command optkubeimag regist imag info name kube ovn的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim docker name kube ovn的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim containerd name kubeovn网络 shell bin dir kubectl label node ovn node kubeovnrolemast overwrit bin dir kubectl appli path sleep bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kubeovn 运行视下载镜像速度而定 shell bin dir kubectl get pod kubeovn widegrep kubeovncnigrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,19.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,5.0,20.0,-16.0,-4.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,4.0,1561332023.0,1.0,no,roles/kube-router/tasks/main.yml,100.0,10.0,60.0,5.0,17.0,4.0,10.0,33.0,8.0,16.0,2.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,201.0,9.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.2,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name 准备配置 kuberout daemon set without ipv templat path path name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim docker name kuberouter的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim containerd name kuberout daemon set shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,1.0,-4.0,-11.0,-1.0,0.0,-1.0,0.0,-2.0,2.0,0.0,0.0,-1.0,-1.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-15.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-39.0,-5.0,0.0,0.0,-0.21
0.0,8.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/chrony/defaults/main.yml,0.0,2.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.0,ntp server path path path path path local network,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
6.0,6.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/ex-lb/ex-lb.yml,100.0,0.0,5.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni group chroni length prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,5.0,20.0,15.0,5.0,24.0,8faefc65123b347bca2d60ad595352b68b283270,3.0,1561332023.0,1.0,no,roles/prepare/tasks/main.yml,100.0,9.0,43.0,3.0,25.0,8.0,24.0,10.0,3.0,10.0,1.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,127.0,7.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.97,import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path block name 分发证书相关 copi src base dir path item dest dir item item path path path path path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name kubeconfig配置文件 copi path path name path copi src base dir path path inventori hostnam group kubemast inventori hostnam group kubenod,0.0,2.0,2.0,13.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,-2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,31.0,2.0,0.0,0.0,0.15
0.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-backup/tasks/main.yml,0.0,3.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,31.0,3.0,0.0,0.0,roles/cluster-backup/tasks/main.yml,easzlab/kubeasz,4.67,name 准备备份目录 file namebackupk statedirectori name 执行etcd 数据备份 shell backupk etcdctl api bin dir etcdctl snapshot save path name 获取etcd 数据备份 fetch src path dest etcansiblerolesclusterbackupfil flat ye run,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,5.0,20.0,-5.0,-1.0,8.0,8faefc65123b347bca2d60ad595352b68b283270,7.0,1561332023.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,18.0,93.0,3.0,35.0,5.0,18.0,40.0,6.0,20.0,2.0,0.0,0.0,1.0,1.0,6.0,1.0,0.0,0.0,17.0,1.0,0.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,18.0,342.0,19.0,0.0,4.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.84,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl tag upgrad name 注册变量 kubernet svc shell echo servic cidr cut fawk print regist kubernet svc tag chang cert name 设置变量 cluster kubernet svc set fact cluster kubernet svc kubernet svc path tag chang cert name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd tag restart master name path templat path dest dir path basic auth enabl ye tag restart master name master 服务的 systemd unit templat src item path destetcsystemdsystem item item path path path tag restart master name 版本信息 shell bin dir kubeapiserv version regist ver tag restart master name 创建kubeapiserv v的systemd unit文件 templat path path tag restart master path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name kubeconfig apiserv lineinfil dest path regexp server line server http inventori hostnam tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye run tag restart master,0.0,0.0,0.0,-6.0,1.0,0.0,0.0,0.0,-2.0,-1.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,-12.0,0.0,0.0,1.0,0.23
0.0,9.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,1.0,1561332023.0,1.0,no,roles/calico/defaults/main.yml,100.0,8.0,9.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach group kubemast calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,5.0,20.0,0.0,0.0,0.0,8faefc65123b347bca2d60ad595352b68b283270,0.0,1561332023.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,44.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,135.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,14.0,5.0,7.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/chrony/tasks/main.yml,100.0,13.0,47.0,1.0,18.0,6.0,9.0,4.0,1.0,2.0,1.0,0.0,0.0,2.0,0.0,20.0,5.0,1.0,0.0,5.0,2.0,0.0,0.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,181.0,4.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.32,name apt更新缓存刷新 apt updat cachey cach valid time ansibl distribut ubuntu instal sourc offlin ignor error name apt ntp shell apt remov ntp ansibl distribut ubuntu ignor error name yum ntp shell yum remov ntp ansibl distribut cent red hat amazon arg warn ignor error name chroni packag namechroni statepres instal sourc offlin import task path instal sourc offlin block name chroni server templat path path ansibl distribut cent red hat amazon name chroni server templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni server servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path block name chroni client templat path path ansibl distribut cent red hat amazon name chroni client templat path path ansibl distribut ubuntu ansibl distribut major versionint name chroni client servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu ansibl distribut major versionint inventori hostnam path,0.0,-1.0,2.0,11.0,1.0,0.0,0.0,0.0,4.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,2.0,37.0,1.0,0.0,0.0,0.27
0.0,6.0,3.0,9.0,8.0,3.0,7.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,yes,roles/deploy/tasks/main.yml,100.0,21.0,106.0,7.0,10.0,3.0,8.0,2.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,8.0,2.0,0.0,0.0,16.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,74.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,17.0,404.0,17.0,0.0,2.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.51,name prepar dir file name item statedirectori item base dir path base dir path name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey name 读取ca证书stat信息 stat path base dir path regist name 准备ca配置文件和签名请求 templat src item path dest base dir path item item path path path defin name 证书和私钥 path defin shell base dir path base dir bincfssl gencert initca path base dir bincfssljson bare block name 删除原有kubeconfig file path stateabs ignor error name group read rbac copi path path user name read name 创建group read rbac shell base dir binkubectl appli path user name read name 准备kubectl使用的 user name 证书签名请求 templat src user name path dest base dir path user name path name user name 证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet user name path base dir bincfssljson bare user name name 设置集群参数 shell base dir binkubectl config setclust cluster name certificateauthor base dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell base dir binkubectl config setcredenti user name clientcertif base dir path user name path embedcertstru clientkey base dir path user name path name 设置上下文参数 shell base dir binkubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell base dir binkubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest base dir path name kubeproxy证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet path base dir bincfssljson bare kubeproxi name 设置集群参数 shell base dir binkubectl config setclust kubernet certificateauthor base dir path embedcertstru server kube apiserv kubeconfig base dir path name 设置客户端认证参数 shell base dir binkubectl config setcredenti kubeproxi clientcertif base dir path clientkey base dir path embedcertstru kubeconfig base dir path name 设置上下文参数 shell base dir binkubectl config setcontext default clusterkubernet userkubeproxi kubeconfig base dir path name 选择默认上下文 shell base dir binkubectl config usecontext default kubeconfig base dir path name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink name 注册变量以判断是否容器化运行ansible控制端 shell auxwc regist proc name ansibl 控制端写入环境变量 path lineinfil dest path state present regexp kubeasz line export path base dir bin path path ignor error name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash path ignor error name ansibl 控制端创建 kubectl 软链接 file src base dir binkubectl destusrbinkubectl statelink ignor error,0.0,0.0,1.0,6.0,1.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,19.0,1.0,0.0,1.0,0.07
0.0,27.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,5.0,f505588a95cd8aad3bc8e2ecee340411515c964b,4.0,1562247660.0,1.0,no,roles/prepare/tasks/ubuntu.yml,100.0,5.0,34.0,10.0,14.0,4.0,8.0,14.0,4.0,8.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,72.0,13.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.67,name 删除ubuntu默认安装 shell apt remov item item ufw lxd lxdclient lxcf lxccommon ansibl distribut ubuntu ignor error name ubuntu基础软件 apt name nfscommon conntrack socat bashcomplet rsync ipset ipvsadm state present instal sourc offlin import task path instal sourc offlin name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,-1.0,1.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,-1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,7.0,-6.0,0.0,0.0,0.17
0.0,4.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,5.0,5.0,5.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/kube-node/tasks/node_lb.yml,100.0,13.0,55.0,5.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,1.0,0.0,0.0,10.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,53.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,11.0,176.0,13.0,0.0,0.0,roles/kube-router/templates/kuberouter-all.yaml.j2,easzlab/kubeasz,6.18,name fail info fail msg kubenod node exlb node time inventori hostnam group exlb tag restart name haproxi packag namehaproxi statepres instal sourc offlin import task path instal sourc offlin name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 停止haproxy服务 shell systemctl stop haproxi tag restart name 开启haproxy服务 shell systemctl start haproxi group kubemast length tag restart block name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name restart kubenod servic servic name item staterestart item kubelet kubeproxi ignor error master chg ye group kubemast length tag restart,0.0,0.0,1.0,3.0,1.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,0.08
0.0,8.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cilium/tasks/main.yml,0.0,12.0,64.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,8.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,212.0,11.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.52,name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag optkubekubesystem name cilium daemon set yaml文件 templat path path tag reconf name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim docker name cilium的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim containerd name cilium网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/clean/tasks/main.yml,0.0,5.0,22.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,17.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,56.0,1.0,0.0,0.0,roles/clean/tasks/main.yml,easzlab/kubeasz,4.68,import task clean path del master ye import task clean path del node ye import task clean path del etcd ye import task clean path del ye import task clean path del chroni ye name clean env path lineinfil dest path state absent regexp item item kubeasz helm complet kubectl complet crictl complet helm tl enabl del env ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/flannel/defaults/main.yml,0.0,3.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.58,flannel backend vxlan flanneld imag easzlabflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/clean/tasks/clean_chrony.yml,0.0,1.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_chrony.yml,easzlab/kubeasz,4.45,block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,3.0,9.0,51.0,13.0,27.0,f505588a95cd8aad3bc8e2ecee340411515c964b,4.0,1562247660.0,1.0,no,roles/prepare/tasks/offline.yml,100.0,6.0,42.0,3.0,53.0,13.0,27.0,2.0,0.0,1.0,1.0,0.0,0.0,3.0,0.0,4.0,1.0,0.0,0.0,1.0,3.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,139.0,7.0,0.0,2.0,roles/prepare/tasks/offline.yml,easzlab/kubeasz,5.78,name 准备离线安装包目录 file nameoptkubepackagesbas statedirectori block name basic xenial 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic xenial 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas xenial ignor error block name basic bionic 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic bionic 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas bionic ignor error block name basic cento 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic cento 离线包 shell optkubepackagesbas tar zxf basic path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,5.0,6.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.62,overlay type full firewal enabl kube router ver busybox ver kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,1.0,1.0,1.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,yes,roles/ex-lb/tasks/main.yml,100.0,14.0,53.0,3.0,16.0,16.0,16.0,15.0,15.0,15.0,2.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,15.0,0.0,0.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,49.0,0.0,2.0,0.0,0.0,0.0,0.0,6.0,0.0,15.0,162.0,14.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.93,name fail info fail msg exlb node kubenod node time inventori hostnam group kubenod name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name 创建相关目录 file name item statedirectori item etchaproxi etckeepaliv name haproxykeepaliv packag name item statepres item haproxi keepaliv instal sourc offlin import task path instal sourc offlin name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,1.0,-2.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,-2.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,-3.0,0.0,0.0,0.06
0.0,1.0,3.0,9.0,2.0,1.0,2.0,f505588a95cd8aad3bc8e2ecee340411515c964b,2.0,1562247660.0,1.0,no,roles/prepare/defaults/main.yml,100.0,0.0,1.0,1.0,3.0,2.0,2.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/prepare/defaults/main.yml,easzlab/kubeasz,1.0,instal sourc onlin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,5.0,3.0,9.0,3.0,2.0,3.0,f505588a95cd8aad3bc8e2ecee340411515c964b,2.0,1562247660.0,1.0,no,roles/ex-lb/defaults/main.yml,100.0,3.0,5.0,10.0,4.0,2.0,3.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,3.12,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye instal sourc onlin,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.37
0.0,26.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,9.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,176.0,6.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.57,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag traefik offlin traefik offlin imag path contain runtim containerd name traefik部署 shell base dir binkubectl appli base dir path connect local run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim containerd name nginx ingress部署 shell base dir binkubectl appli base dir path connect local run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,1.0,1.0,1.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/cluster-restore/defaults/main.yml,100.0,1.0,3.0,3.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/docker/defaults/main.yml,0.0,3.0,6.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,3.46,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/flannel/tasks/main.yml,0.0,10.0,58.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,191.0,9.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name flannel daemon set yaml文件 templat path path name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim docker name flannel的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim containerd name flannel网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
51.0,51.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,48.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,67.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.42,host kubemast kubenod etcd exlb chroni var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/clean/defaults/main.yml,0.0,5.0,6.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cilium/templates/cilium-csr.json.j2,easzlab/kubeasz,2.29,del master del node del etcd del del chroni del env,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,122.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,37.0,20.0,0.0,0.0,7.0,4.0,0.0,2.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,106.0,0.0,6.0,0.0,5.0,0.0,0.0,1.0,0.0,11.0,519.0,21.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.4,name node 节点创建相关目录 file path item statedirectori item optkubekubesystem name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc name 设置变量 cluster dn svc set fact cluster dn svc dn svc path name dns的部署文件 templat src item path destoptkubekubesystem item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend 的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag dn offlin dn offlin imag path contain runtim containerd name dn backend shell bin dir kubectl appli optkubekubesystem dn backend path run kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim containerd name metricsserver部署 shell base dir binkubectl appli base dir manifestsmetricsserv run connect local metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard heapster镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item dashboard offlin heapster offlin name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard heapster的离线镜像dock shell bin dir docker load optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim docker name dashboard heapster的离线镜像containerd shell bin dir ctr path imag import optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim containerd name dashboard部署 shell base dir binkubectl appli base dir manifestsdashboard base dir binkubectl appli base dir manifestsheapsterheapsteronli run connect local kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metallb offlin metallb offlin imag path contain runtim containerd name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path name metallb control shell bin dir kubectl appli path bin dir kubectl appli optkubekubesystem metallb protocol path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,7.0,30.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,85.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.62,dn instal ye dn backend coredn kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path heapster ver heapster offlin heapster heapster ver path ingress instal ye ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,yes,roles/clean/tasks/clean_etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,3.0,0.0,0.0,roles/clean/tasks/clean_etcd.yml,easzlab/kubeasz,4.86,block name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path dir inventori hostnam group etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/cluster-restore/tasks/main.yml,100.0,7.0,23.0,0.0,7.0,7.0,7.0,7.0,7.0,7.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file nameetcd backup statedirectori name 准备指定的备份etcd copi src base dir path restor dest etcd path name 清理上次备份恢复数据 file nameetcd backup node name path stateabs name etcd 数据恢复 shell etcd backup etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell etcd backup node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,16.0,5.0,16.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,27.0,112.0,7.0,23.0,8.0,16.0,7.0,2.0,6.0,1.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,26.0,0.0,0.0,8.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,87.0,0.0,2.0,0.0,0.0,0.0,0.0,14.0,0.0,26.0,384.0,25.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.94,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad import task node path inventori hostnam group kubemast name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name cni配置文件 templat path path name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc tag upgrad restart node name 设置变量 cluster dn svc set fact cluster dn svc dn svc path tag upgrad restart node name 注册变量 tmp ver shell base dir binkubeapiserv versioncut fcut regist tmp ver connect local run tag upgrad restart node name kubernet 主版本号 set fact kube ver tmp path int tmp path int tag upgrad restart node name debug info debug var kube ver name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path apiserv lineinfil dest path regexp server line server kube apiserv name 创建kubeproxi 服务文件 templat path path tag reloadkubeproxi restart node upgrad name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay tag reloadkubeproxi upgrad restart node name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,3.0,12.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,45.0,3.0,0.0,1.0,0.12
31.0,31.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,90.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.4,host exlb task block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/helm/tasks/main.yml,0.0,10.0,55.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,34.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,11.0,225.0,11.0,0.0,0.0,roles/helm/tasks/main.yml,easzlab/kubeasz,5.95,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error run name 安装tiller shell bin dir helm init historymax histori max tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url upgrad ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,83.0,28.0,56.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/ex-lb/tasks/offline.yml,100.0,13.0,68.0,2.0,86.0,29.0,56.0,3.0,1.0,3.0,2.0,0.0,0.0,6.0,0.0,8.0,2.0,0.0,0.0,2.0,6.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,58.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,242.0,12.0,0.0,0.0,roles/ex-lb/tasks/offline.yml,easzlab/kubeasz,5.71,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error name 准备离线安装包目录 file nameoptkubepackageskeepaliv statedirectori block name keepaliv xenial 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv xenial 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name keepaliv bionic 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv bionic 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name keepaliv cento 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv cento 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/deploy/defaults/main.yml,0.0,2.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.95,expiri cert expiri kube apiserv http group kubemast cluster name cluster user name admin context name context cluster name user name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.58,host group kubemast role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,3.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.62,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/clean/tasks/clean_master.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,44.0,2.0,0.0,0.0,roles/clean/tasks/clean_master.yml,easzlab/kubeasz,4.96,name stop disabl kubemast servic servic name item statestop enabledno item kubeapiserv kubecontrollermanag kubeschedul ignor error inventori hostnam group kubemast name remov file dir kubemast node file name item stateabs item varrunkubernet path path path inventori hostnam group kubemast,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/calico/tasks/main.yml,0.0,15.0,78.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,274.0,14.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.58,name 在节点创建相关目录 file name item statedirectori item etccalicossl path optkubeimag optkubekubesystem name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path run name calico daemon set yaml文件 templat srccalico calico ver main path path block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path calico offlin ignor error item imag path contain runtim docker name calico的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path calico offlin ignor error item imag path contain runtim containerd name calico网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl ignor error name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/clean/tasks/clean_lb.yml,0.0,1.0,13.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_lb.yml,easzlab/kubeasz,4.72,block name servic keepaliv haproxi servic name item statestop enabledno item keepaliv haproxi ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv inventori hostnam group kubenod inventori hostnam group exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,7.0,2.0,5.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,9.0,50.0,13.0,14.0,5.0,6.0,7.0,2.0,6.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,1.0,0.0,9.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,108.0,16.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.97,name 删除centosredhat默认安装 shell yum remov item item firewalld pythonfirewal firewalldfilesystem arg warn ignor error name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name conntracktool psmisc nfsutil socat bashcomplet rsync ipset ipvsadm state present instal sourc offlin import task path instal sourc offlin name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,1.0,5.0,1.0,0.0,0.0,0.0,2.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,5.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,18.0,-3.0,0.0,0.0,0.31
0.0,109.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/clean/tasks/clean_node.yml,100.0,15.0,116.0,7.0,4.0,4.0,4.0,4.0,4.0,4.0,1.0,0.0,0.0,1.0,0.0,7.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,62.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,344.0,15.0,0.0,1.0,roles/clean/tasks/clean_node.yml,easzlab/kubeasz,6.73,block name stop disabl kubenod servic servic name item statestop enabledno item kubelet kubeproxi ignor error name umount kubelet filesystem shell mount grep varlibkubelet awk print xarg umount exit arg warn ignor error name remov file dir kubenod node file name item stateabs item varlibkubelet varlibkubeproxi path path optkubekubesystem etckubernet dir path block name check contain kubeasz run shell docker psgrep kubeasz echo found regist instal info block name stop disabl docker servic servic name docker state stop enabl ignor error name unmount docker filesystem mount pathvarrundockernetnsdefault stateunmount name unmount docker filesystem mount pathvarlibdockeroverlay stateunmount name remov file dir file name item stateabs item varlibdock varrundock etcdock path path path etcbash path usrbindock kubeasz instal path contain runtim docker block name stop disabl containerd servic servic name containerd state stop enabl ignor error name umount containerd filesystem shell mount grep path awk print xarg umount exit arg warn ignor error name remov file dir file name item stateabs item etccontainerd path path optcontainerd varlibcontainerd varruncontainerd contain runtim containerd name remov file dir file name item stateabs item etccni runflannel etccalico varruncalico varlibcalico varlogcalico etccilium varruncilium sysfsbpftc varlibcni varlibkuberout optkubekubeovn optkubekubesystem varrunopenvswitch etcoriginopenvswitch etcopenvswitch varlogopenvswitch name cleanup network shell link del tunl link del flannel link del cni link del mynet link del kubebridg link del dummi link del kubeipv link del cilium net link del cilium vxlan link del ovn link del ovssystem ignor error name cleanup calico rout shell routegrep birds sblackhol awk print rout del done cluster network calico ignor error name cleanup iptabl shell iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl inventori hostnam group kubemast inventori hostnam group kubenod,0.0,-3.0,0.0,-4.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-12.0,-1.0,0.0,0.0,-0.03
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-ovn/defaults/main.yml,0.0,1.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/kube-ovn/defaults/main.yml,easzlab/kubeasz,2.58,ovn node group kubemast kube ovn offlin kube ovn path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,41.0,10.0,27.0,f505588a95cd8aad3bc8e2ecee340411515c964b,4.0,1562247660.0,1.0,no,roles/kube-node/tasks/offline.yml,100.0,6.0,34.0,1.0,43.0,11.0,27.0,2.0,0.0,1.0,1.0,0.0,0.0,3.0,0.0,4.0,1.0,0.0,0.0,1.0,3.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,29.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,121.0,7.0,0.0,0.0,roles/kube-node/tasks/offline.yml,easzlab/kubeasz,5.53,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,146.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.22,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,41.0,14.0,27.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/chrony/tasks/offline.yml,100.0,6.0,34.0,1.0,42.0,14.0,27.0,1.0,0.0,1.0,1.0,0.0,0.0,3.0,0.0,4.0,1.0,0.0,0.0,1.0,3.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,29.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,121.0,7.0,0.0,0.0,roles/chrony/tasks/offline.yml,easzlab/kubeasz,5.53,name 准备离线安装包目录 file nameoptkubepackageschroni statedirectori block name chroni xenial 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni xenial 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name chroni bionic 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni bionic 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name chroni cento 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni cento 离线包 shell optkubepackageschroni tar zxf chroni path rpm uvh forc nodep path tmpinstal path ansibl distribut major version ansibl distribut cent ignor error,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,75.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/containerd/tasks/main.yml,0.0,13.0,56.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,48.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,14.0,169.0,14.0,0.0,2.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.32,name 获取是否已经安装docker shell systemctl statu dockergrep activ echo found regist docker statu name fail info fail msg docker alreadi instal run docker path name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name libseccomp packag namelibseccomp statepres ansibl distribut ubuntu debian name libseccomp packag namelibseccomp statepres ansibl distribut cent red hat amazon name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,22.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,yes,roles/docker/tasks/main.yml,0.0,17.0,87.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,3.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,0.0,4.0,290.0,18.0,0.0,4.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.6,name 获取是否已经安装containerd shell systemctl statu containerdgrep activ echo found regist containerd statu name fail info fail msg containerd alreadi instal run containerd path name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker block name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.81,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag easzlabtil repo url http path histori max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/containerd/defaults/main.yml,0.0,1.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.0,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,3.0,9.0,6.0,2.0,3.0,f505588a95cd8aad3bc8e2ecee340411515c964b,3.0,1562247660.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,9.0,21.0,17.0,7.0,2.0,3.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,56.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,4.97,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv enabl ye kube reserv cpum memorymi ephemeralstoragegi sy reserv enabl sy reserv cpum memorymi ephemeralstoragegi hard evict path path balanc alg roundrobin kube apiserv inventori hostnam group kubemast http inventori hostnam els group kubemast length http els http group kubemast endif endif master chg instal sourc onlin,0.0,2.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.14
0.0,3.0,3.0,9.0,4.0,4.0,4.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/prepare/tasks/common.yml,100.0,12.0,44.0,4.0,5.0,5.0,5.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,13.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,13.0,114.0,13.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.89,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name systemd 配置目录 file path statedirectori name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,-1.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,7.0,1.0,0.0,0.0,0.1
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,yes,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host deploy role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.55,host kubemast kubenod etcd exlb chroni role role chroni group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-ovn/tasks/main.yml,0.0,10.0,54.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,43.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,195.0,9.0,0.0,3.0,roles/kube-ovn/tasks/main.yml,easzlab/kubeasz,6.23,name 创建相关目录 file name item statedirectori item path optkubeimag optkubekubeovn name path templat path path name path templat path path block name 检查是否已下载离线kube ovn镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kube ovn offlin ignor error name 获取kube ovn离线镜像推送情况 command optkubeimag regist imag info name kube ovn的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim docker name kube ovn的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim containerd name kubeovn网络 shell bin dir kubectl label node ovn node kubeovnrolemast overwrit bin dir kubectl appli path sleep bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kubeovn 运行视下载镜像速度而定 shell bin dir kubectl get pod kubeovn widegrep kubeovncnigrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,10.0,60.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,201.0,9.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.2,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name 准备配置 kuberout daemon set without ipv templat path path name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim docker name kuberouter的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim containerd name kuberout daemon set shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.37,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell bin dir kubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,9.0,2.0,1.0,2.0,f505588a95cd8aad3bc8e2ecee340411515c964b,2.0,1562247660.0,1.0,no,roles/chrony/defaults/main.yml,100.0,2.0,8.0,3.0,3.0,2.0,2.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.32,ntp server path path path path path local network instal sourc onlin,0.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.32
6.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,3.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,3.28,host exlb role role chroni group chroni length prepar exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/prepare/tasks/main.yml,100.0,9.0,43.0,3.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,4.0,1.0,0.0,0.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,127.0,7.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,5.97,import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path block name 分发证书相关 copi src base dir path item dest dir item item path path path path path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name kubeconfig配置文件 copi path path name path copi src base dir path path inventori hostnam group kubemast inventori hostnam group kubenod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,18.0,93.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,0.0,0.0,1.0,1.0,6.0,1.0,0.0,0.0,17.0,1.0,0.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,18.0,345.0,19.0,0.0,4.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.87,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl tag upgrad name 注册变量 kubernet svc shell echo servic cidr cut fawk print regist kubernet svc tag chang cert name 设置变量 cluster kubernet svc set fact cluster kubernet svc kubernet svc path tag chang cert name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd tag restart master name path templat path dest dir path basic auth enabl ye tag restart master name master 服务的 systemd unit templat src item path destetcsystemdsystem item item path path path tag restart master upgrad name 版本信息 shell bin dir kubeapiserv version regist ver tag restart master upgrad name 创建kubeapiserv v的systemd unit文件 templat path path tag restart master upgrad path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name kubeconfig apiserv lineinfil dest path regexp server line server http inventori hostnam tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye run tag restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.03
0.0,9.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,1.0,1562247660.0,1.0,no,roles/calico/defaults/main.yml,100.0,8.0,9.0,11.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach group kubemast calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,9.0,0.0,0.0,0.0,f505588a95cd8aad3bc8e2ecee340411515c964b,0.0,1562247660.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell bin dir kubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,44.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,135.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/deploy/tasks/main.yml,100.0,21.0,106.0,7.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,1.0,0.0,8.0,2.0,0.0,0.0,16.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,74.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,17.0,404.0,17.0,0.0,2.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.51,name prepar dir file name item statedirectori item base dir path base dir path name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey name 读取ca证书stat信息 stat path base dir path regist name 准备ca配置文件和签名请求 templat src item path dest base dir path item item path path path defin name 证书和私钥 path defin shell base dir path base dir bincfssl gencert initca path base dir bincfssljson bare block name 删除原有kubeconfig file path stateabs ignor error name group read rbac copi path path user name read name 创建group read rbac shell base dir binkubectl appli path user name read name 准备kubectl使用的 user name 证书签名请求 templat src user name path dest base dir path user name path name user name 证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet user name path base dir bincfssljson bare user name name 设置集群参数 shell base dir binkubectl config setclust cluster name certificateauthor base dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell base dir binkubectl config setcredenti user name clientcertif base dir path user name path embedcertstru clientkey base dir path user name path name 设置上下文参数 shell base dir binkubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell base dir binkubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest base dir path name kubeproxy证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet path base dir bincfssljson bare kubeproxi name 设置集群参数 shell base dir binkubectl config setclust kubernet certificateauthor base dir path embedcertstru server kube apiserv kubeconfig base dir path name 设置客户端认证参数 shell base dir binkubectl config setcredenti kubeproxi clientcertif base dir path clientkey base dir path embedcertstru kubeconfig base dir path name 设置上下文参数 shell base dir binkubectl config setcontext default clusterkubernet userkubeproxi kubeconfig base dir path name 选择默认上下文 shell base dir binkubectl config usecontext default kubeconfig base dir path name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink name 注册变量以判断是否容器化运行ansible控制端 shell auxwc regist proc name ansibl 控制端写入环境变量 path lineinfil dest path state present regexp kubeasz line export path base dir bin path path ignor error name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash path ignor error name ansibl 控制端创建 kubectl 软链接 file src base dir binkubectl destusrbinkubectl statelink ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,8.0,1.0,1.0,1.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/chrony/tasks/main.yml,100.0,12.0,49.0,1.0,8.0,8.0,8.0,7.0,7.0,7.0,8.0,0.0,0.0,2.0,0.0,16.0,1.0,1.0,0.0,5.0,2.0,0.0,0.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,164.0,4.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.15,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin name apt ntp shell apt remov ntp ansibl distribut ubuntu debian ignor error name yum ntp shell yum remov ntp ansibl distribut cent red hat amazon arg warn ignor error name chroni packag namechroni statepres instal sourc offlin import task path instal sourc offlin block name chroni server templat path path ansibl distribut cent red hat amazon name chroni server templat path path ansibl distribut ubuntu debian name chroni server servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path block name chroni client templat path path ansibl distribut cent red hat amazon name chroni client templat path path ansibl distribut ubuntu debian name chroni client servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path,0.0,0.0,-1.0,2.0,0.0,0.0,0.0,0.0,-4.0,-4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-17.0,0.0,0.0,0.0,-0.17
0.0,27.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,2.0,1.0,1.0,57e06f61e1287f07331b0c5c728612f29392d1de,3.0,1563522065.0,1.0,no,roles/prepare/tasks/ubuntu.yml,100.0,5.0,36.0,14.0,9.0,3.0,6.0,7.0,2.0,5.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,74.0,15.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.72,name 删除ubuntu默认安装 shell apt remov item item ufw lxd lxdclient lxcf lxccommon ansibl distribut ubuntu ignor error name ubuntudebian基础软件 apt name bashcomplet conntrack ipset ipvsadm libseccomp nfscommon psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,2.0,0.0,0.0,0.05
0.0,4.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-node/tasks/node_lb.yml,0.0,13.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,1.0,0.0,0.0,10.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,53.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,11.0,176.0,13.0,0.0,0.0,roles/kube-router/templates/kuberouter-all.yaml.j2,easzlab/kubeasz,6.18,name fail info fail msg kubenod node exlb node time inventori hostnam group exlb tag restart name haproxi packag namehaproxi statepres instal sourc offlin import task path instal sourc offlin name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 停止haproxy服务 shell systemctl stop haproxi tag restart name 开启haproxy服务 shell systemctl start haproxi group kubemast length tag restart block name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name restart kubenod servic servic name item staterestart item kubelet kubeproxi ignor error master chg ye group kubemast length tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cilium/tasks/main.yml,0.0,12.0,64.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,8.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,212.0,11.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.52,name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag optkubekubesystem name cilium daemon set yaml文件 templat path path tag reconf name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim docker name cilium的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim containerd name cilium网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,5.0,5.0,5.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/clean/tasks/main.yml,100.0,6.0,26.0,0.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,77.0,2.0,0.0,0.0,roles/clean/tasks/main.yml,easzlab/kubeasz,5.4,import task clean path del master ye import task clean path del node ye import task clean path del etcd ye import task clean path del ye import task clean path del chroni ye name clean env path lineinfil dest path state absent regexp item item kubeasz helm complet kubectl complet crictl complet helm tl enabl del env ye name 重启提示 warn debug msg 请重启节点以确保清除系统残留的虚拟网卡路由信息iptalbesipvs规则等 import pleas reboot node makesur clean net interfac rout iptablesipv rule,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,21.0,1.0,0.0,0.0,0.72
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/flannel/defaults/main.yml,0.0,3.0,3.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.58,flannel backend vxlan flanneld imag easzlabflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/clean/tasks/clean_chrony.yml,0.0,1.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_chrony.yml,easzlab/kubeasz,4.45,block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,3.0,8.0,34.0,17.0,17.0,57e06f61e1287f07331b0c5c728612f29392d1de,2.0,1563522065.0,1.0,no,roles/prepare/tasks/offline.yml,100.0,10.0,70.0,5.0,34.0,17.0,17.0,0.0,0.0,0.0,1.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,231.0,11.0,0.0,4.0,roles/prepare/tasks/offline.yml,easzlab/kubeasz,5.83,name 准备离线安装包目录 file nameoptkubepackagesbas statedirectori block name basic xenial 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic xenial 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas xenial ignor error block name basic bionic 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic bionic 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas bionic ignor error block name basic cento 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic cento 离线包 shell optkubepackagesbas tar zxf basic path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name basic stretch 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic stretch 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas stretch ignor error block name basic buster 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic buster 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas buster ignor error,0.0,2.0,4.0,28.0,2.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,92.0,4.0,0.0,2.0,0.05
0.0,2.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,5.0,6.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.62,overlay type full firewal enabl kube router ver busybox ver kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,14.0,53.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,15.0,0.0,0.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,49.0,0.0,2.0,0.0,0.0,0.0,0.0,6.0,0.0,15.0,162.0,14.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.93,name fail info fail msg exlb node kubenod node time inventori hostnam group kubenod name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name 创建相关目录 file name item statedirectori item etchaproxi etckeepaliv name haproxykeepaliv packag name item statepres item haproxi keepaliv instal sourc offlin import task path instal sourc offlin name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/prepare/defaults/main.yml,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/prepare/defaults/main.yml,easzlab/kubeasz,1.0,instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,3.0,5.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,3.12,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,26.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,9.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,176.0,6.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.57,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag traefik offlin traefik offlin imag path contain runtim containerd name traefik部署 shell base dir binkubectl appli base dir path connect local run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim containerd name nginx ingress部署 shell base dir binkubectl appli base dir path connect local run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,6.0,6.0,6.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/docker/defaults/main.yml,100.0,5.0,8.0,5.0,6.0,6.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,4.0,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api enabl mirror registri reg mirror http path http path,0.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.54
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/flannel/tasks/main.yml,0.0,10.0,58.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,191.0,9.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name flannel daemon set yaml文件 templat path path name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim docker name flannel的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim containerd name flannel网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
51.0,51.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,48.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,67.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.42,host kubemast kubenod etcd exlb chroni var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/clean/defaults/main.yml,0.0,5.0,6.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cilium/templates/cilium-csr.json.j2,easzlab/kubeasz,2.29,del master del node del etcd del del chroni del env,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-addon/tasks/main.yml,0.0,27.0,122.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,2.0,37.0,20.0,0.0,0.0,7.0,4.0,0.0,2.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,106.0,0.0,6.0,0.0,5.0,0.0,0.0,1.0,0.0,11.0,519.0,21.0,0.0,7.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.4,name node 节点创建相关目录 file path item statedirectori item optkubekubesystem name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc name 设置变量 cluster dn svc set fact cluster dn svc dn svc path name dns的部署文件 templat src item path destoptkubekubesystem item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend 的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag dn offlin dn offlin imag path contain runtim containerd name dn backend shell bin dir kubectl appli optkubekubesystem dn backend path run kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim containerd name metricsserver部署 shell base dir binkubectl appli base dir manifestsmetricsserv run connect local metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard heapster镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item dashboard offlin heapster offlin name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard heapster的离线镜像dock shell bin dir docker load optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim docker name dashboard heapster的离线镜像containerd shell bin dir ctr path imag import optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim containerd name dashboard部署 shell base dir binkubectl appli base dir manifestsdashboard base dir binkubectl appli base dir manifestsheapsterheapsteronli run connect local kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metallb offlin metallb offlin imag path contain runtim containerd name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path name metallb control shell bin dir kubectl appli path bin dir kubectl appli optkubekubesystem metallb protocol path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-addon/defaults/main.yml,0.0,7.0,30.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,85.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.62,dn instal ye dn backend coredn kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path heapster ver heapster offlin heapster heapster ver path ingress instal ye ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,yes,roles/clean/tasks/clean_etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,3.0,0.0,0.0,roles/clean/tasks/clean_etcd.yml,easzlab/kubeasz,4.86,block name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path dir inventori hostnam group etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file nameetcd backup statedirectori name 准备指定的备份etcd copi src base dir path restor dest etcd path name 清理上次备份恢复数据 file nameetcd backup node name path stateabs name etcd 数据恢复 shell etcd backup etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell etcd backup node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,3.0,3.0,3.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,28.0,114.0,7.0,4.0,4.0,4.0,1.0,1.0,1.0,2.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,27.0,0.0,0.0,8.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,89.0,0.0,2.0,0.0,0.0,0.0,0.0,14.0,0.0,27.0,390.0,26.0,0.0,4.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.93,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad import task node path inventori hostnam group kubemast name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name cni配置文件 templat path path name 注册变量 dn svc shell echo servic cidr cut fawk print regist dn svc tag upgrad restart node name 设置变量 cluster dn svc set fact cluster dn svc dn svc path tag upgrad restart node name 注册变量 tmp ver shell base dir binkubeapiserv versioncut fcut regist tmp ver connect local tag upgrad restart node name kubernet 主版本号 set fact kube ver tmp path int tmp path int tag upgrad restart node name debug info debug var kube ver name 创建kubelet的配置文件 templat path path tag upgrad restart node name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path apiserv lineinfil dest path regexp server line server kube apiserv name 创建kubeproxi 服务文件 templat path path tag reloadkubeproxi restart node upgrad name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay tag reloadkubeproxi upgrad restart node name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,1.0,0.0,0.0,-0.01
31.0,31.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,90.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.4,host exlb task block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,5.0,5.0,5.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/helm/tasks/main.yml,100.0,11.0,59.0,1.0,5.0,5.0,5.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,12.0,238.0,12.0,0.0,1.0,roles/helm/tasks/main.yml,easzlab/kubeasz,6.02,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 获取当前集群所有 namespac shell bin dir kubectl get regist current run name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error run name 安装tiller shell bin dir helm init historymax histori max tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url upgrad ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,1.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,13.0,1.0,0.0,1.0,0.07
0.0,9.0,3.0,8.0,48.0,24.0,24.0,57e06f61e1287f07331b0c5c728612f29392d1de,2.0,1563522065.0,1.0,no,roles/ex-lb/tasks/offline.yml,100.0,21.0,108.0,2.0,48.0,24.0,24.0,0.0,0.0,0.0,2.0,0.0,0.0,10.0,0.0,12.0,2.0,0.0,0.0,2.0,10.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,94.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,390.0,20.0,0.0,0.0,roles/ex-lb/tasks/offline.yml,easzlab/kubeasz,5.77,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error name 准备离线安装包目录 file nameoptkubepackageskeepaliv statedirectori block name keepaliv xenial 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv xenial 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name keepaliv bionic 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv bionic 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name keepaliv cento 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv cento 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name keepaliv stretch 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv stretch 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name keepaliv buster 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv buster 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,1.0,8.0,40.0,0.0,0.0,4.0,0.0,4.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,36.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,148.0,8.0,0.0,0.0,0.06
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/deploy/defaults/main.yml,0.0,2.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.95,expiri cert expiri kube apiserv http group kubemast cluster name cluster user name admin context name context cluster name user name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.58,host group kubemast role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,3.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,26.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.62,tmp endpoint group etcd http endfor etcd endpoint tmp path master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/clean/tasks/clean_master.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,44.0,2.0,0.0,0.0,roles/clean/tasks/clean_master.yml,easzlab/kubeasz,4.96,name stop disabl kubemast servic servic name item statestop enabledno item kubeapiserv kubecontrollermanag kubeschedul ignor error inventori hostnam group kubemast name remov file dir kubemast node file name item stateabs item varrunkubernet path path path inventori hostnam group kubemast,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/calico/tasks/main.yml,0.0,15.0,78.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,274.0,14.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.58,name 在节点创建相关目录 file name item statedirectori item etccalicossl path optkubeimag optkubekubesystem name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path run name calico daemon set yaml文件 templat srccalico calico ver main path path block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path calico offlin ignor error item imag path contain runtim docker name calico的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path calico offlin ignor error item imag path contain runtim containerd name calico网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl ignor error name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/clean/tasks/clean_lb.yml,0.0,1.0,13.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_lb.yml,easzlab/kubeasz,4.72,block name servic keepaliv haproxi servic name item statestop enabledno item keepaliv haproxi ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv inventori hostnam group kubenod inventori hostnam group exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/prepare/tasks/centos.yml,100.0,9.0,51.0,15.0,7.0,7.0,7.0,7.0,7.0,7.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,1.0,0.0,9.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,109.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.99,name 删除centosredhat默认安装 shell yum remov item item firewalld pythonfirewal firewalldfilesystem arg warn ignor error name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name bashcomplet conntracktool ipset ipvsadm libseccomp nfsutil psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.02
0.0,95.0,3.0,8.0,1.0,1.0,1.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/clean/tasks/clean_node.yml,100.0,13.0,94.0,29.0,29.0,29.0,29.0,28.0,28.0,28.0,2.0,0.0,0.0,1.0,0.0,6.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,53.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,230.0,12.0,0.0,1.0,roles/clean/tasks/clean_node.yml,easzlab/kubeasz,6.48,block name stop disabl kubenod servic servic name item statestop enabledno item kubelet kubeproxi ignor error name umount kubelet filesystem shell mount grep varlibkubelet awk print xarg umount exit arg warn ignor error name remov file dir kubenod node file name item stateabs item varlibkubelet varlibkubeproxi path path optkubekubesystem etckubernet dir path block name check contain kubeasz run shell docker psgrep kubeasz echo found regist instal info block name stop disabl docker servic servic name docker state stop enabl ignor error name unmount docker filesystem mount pathvarrundockernetnsdefault stateunmount name unmount docker filesystem mount pathvarlibdockeroverlay stateunmount name remov file dir file name item stateabs item varlibdock varrundock etcdock path path path etcbash path usrbindock kubeasz instal path contain runtim docker block name stop disabl containerd servic servic name containerd state stop enabl ignor error name umount containerd filesystem shell mount grep path awk print xarg umount exit arg warn ignor error name remov file dir file name item stateabs item etccontainerd path path optcontainerd varlibcontainerd varruncontainerd contain runtim containerd name remov file dir file name item stateabs item etccni runflannel etccalico varruncalico varlibcalico varlogcalico etccilium varruncilium sysfsbpftc varlibcni varlibkuberout optkubekubeovn optkubekubesystem varrunopenvswitch etcoriginopenvswitch etcopenvswitch varlogopenvswitch inventori hostnam group kubemast inventori hostnam group kubenod,0.0,-14.0,-2.0,-22.0,22.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-114.0,-3.0,0.0,0.0,-0.25
0.0,2.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-ovn/defaults/main.yml,0.0,1.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/kube-ovn/defaults/main.yml,easzlab/kubeasz,2.58,ovn node group kubemast kube ovn offlin kube ovn path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,24.0,12.0,12.0,57e06f61e1287f07331b0c5c728612f29392d1de,2.0,1563522065.0,1.0,no,roles/kube-node/tasks/offline.yml,100.0,10.0,54.0,1.0,24.0,12.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/kube-node/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,1.0,4.0,20.0,0.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,74.0,4.0,0.0,0.0,0.06
0.0,2.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,146.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.22,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,29.0,14.0,16.0,57e06f61e1287f07331b0c5c728612f29392d1de,2.0,1563522065.0,1.0,no,roles/chrony/tasks/offline.yml,100.0,10.0,54.0,6.0,29.0,14.0,16.0,0.0,0.0,0.0,2.5,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/chrony/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageschroni statedirectori block name chroni xenial 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni xenial 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name chroni bionic 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni bionic 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name chroni cento 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni cento 离线包 shell optkubepackageschroni tar zxf chroni path rpm uvh forc nodep path tmpinstal path ansibl distribut major version ansibl distribut cent ignor error block name chroni stretch 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni stretch 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name chroni buster 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni buster 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,1.0,4.0,20.0,5.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,74.0,4.0,0.0,0.0,0.06
0.0,75.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,-8.0,-8.0,-8.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/containerd/tasks/main.yml,100.0,11.0,50.0,0.0,0.0,0.0,0.0,8.0,8.0,8.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,149.0,12.0,0.0,2.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.21,name 获取是否已经安装docker shell systemctl statu dockergrep activ echo found regist docker statu name fail info fail msg docker alreadi instal run docker path name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,0.0,0.0,-2.0,-6.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,-20.0,-2.0,0.0,0.0,-0.11
0.0,12.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/docker/tasks/main.yml,100.0,17.0,87.0,4.0,17.0,17.0,17.0,17.0,17.0,17.0,2.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,6.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,7.0,290.0,18.0,0.0,4.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.6,name 获取是否已经安装containerd shell systemctl statu containerdgrep activ echo found regist containerd statu name fail info fail msg containerd alreadi instal run containerd path name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,-10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.81,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag easzlabtil repo url http path histori max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,8.0,3.0,3.0,3.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/containerd/defaults/main.yml,100.0,2.0,3.0,3.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.58,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd enabl mirror registri,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.58
0.0,15.0,3.0,8.0,-3.0,-2.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,2.0,1563522065.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,8.0,20.0,16.0,3.0,2.0,2.0,6.0,3.0,5.0,1.5,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,54.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,4.88,proxi mode iptabl sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv enabl ye kube reserv cpu memori ephemeralstorag sy reserv enabl sy reserv cpu memori ephemeralstorag balanc alg roundrobin kube apiserv inventori hostnam group kubemast http inventori hostnam els group kubemast length http els http group kubemast endif endif master chg instal sourc onlin,0.0,-1.0,-1.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-0.09
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/prepare/tasks/common.yml,0.0,12.0,44.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,13.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,13.0,114.0,13.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.89,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name systemd 配置目录 file path statedirectori name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/cluster-storage/cluster-storage.yml,100.0,0.0,3.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host localhost role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.55,host kubemast kubenod etcd exlb chroni role role chroni group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-ovn/tasks/main.yml,0.0,10.0,54.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,43.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,195.0,9.0,0.0,3.0,roles/kube-ovn/tasks/main.yml,easzlab/kubeasz,6.23,name 创建相关目录 file name item statedirectori item path optkubeimag optkubekubeovn name path templat path path name path templat path path block name 检查是否已下载离线kube ovn镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kube ovn offlin ignor error name 获取kube ovn离线镜像推送情况 command optkubeimag regist imag info name kube ovn的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim docker name kube ovn的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim containerd name kubeovn网络 shell bin dir kubectl label node ovn node kubeovnrolemast overwrit bin dir kubectl appli path sleep bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kubeovn 运行视下载镜像速度而定 shell bin dir kubectl get pod kubeovn widegrep kubeovncnigrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,19.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,10.0,60.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,201.0,9.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.2,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name 准备配置 kuberout daemon set without ipv templat path path name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim docker name kuberouter的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim containerd name kuberout daemon set shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/cluster-storage/tasks/nfs-client.yml,100.0,2.0,8.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.27,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell base dir binkubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.1
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/chrony/defaults/main.yml,0.0,2.0,8.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.32,ntp server path path path path path local network instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,3.0,8.0,-2.0,-2.0,-2.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/ex-lb/ex-lb.yml,100.0,0.0,3.0,0.0,0.0,0.0,0.0,2.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,1.5,host exlb role exlb,-3.0,-3.0,0.0,-2.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-7.0,0.0,0.0,0.0,-1.78
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,3.0,8.0,7.0,7.0,7.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/prepare/tasks/main.yml,100.0,10.0,49.0,3.0,7.0,7.0,7.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,7.0,1.0,0.0,0.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,36.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,141.0,8.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.11,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path block name 分发证书相关 copi src base dir path item dest dir item item path path path path path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name kubeconfig配置文件 copi path path name path copi src base dir path path inventori hostnam group kubemast inventori hostnam group kubenod,0.0,0.0,1.0,6.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,0.14
0.0,5.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,yes,roles/kube-master/tasks/main.yml,0.0,18.0,93.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,6.0,1.0,0.0,0.0,17.0,1.0,0.0,6.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,75.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,18.0,345.0,19.0,0.0,4.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.87,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl tag upgrad name 注册变量 kubernet svc shell echo servic cidr cut fawk print regist kubernet svc tag chang cert name 设置变量 cluster kubernet svc set fact cluster kubernet svc kubernet svc path tag chang cert name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd tag restart master name path templat path dest dir path basic auth enabl ye tag restart master name master 服务的 systemd unit templat src item path destetcsystemdsystem item item path path path tag restart master upgrad name 版本信息 shell bin dir kubeapiserv version regist ver tag restart master upgrad name 创建kubeapiserv v的systemd unit文件 templat path path tag restart master upgrad path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name kubeconfig apiserv lineinfil dest path regexp server line server http inventori hostnam tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye run tag restart master,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach group kubemast calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,0.0,1563522065.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,3.0,8.0,0.0,0.0,0.0,57e06f61e1287f07331b0c5c728612f29392d1de,1.0,1563522065.0,1.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,100.0,4.0,8.0,6.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell base dir binkubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,44.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,135.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/deploy/tasks/main.yml,0.0,21.0,106.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,8.0,2.0,0.0,0.0,16.0,1.0,0.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,74.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,17.0,404.0,17.0,0.0,2.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.51,name prepar dir file name item statedirectori item base dir path base dir path name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey name 读取ca证书stat信息 stat path base dir path regist name 准备ca配置文件和签名请求 templat src item path dest base dir path item item path path path defin name 证书和私钥 path defin shell base dir path base dir bincfssl gencert initca path base dir bincfssljson bare block name 删除原有kubeconfig file path stateabs ignor error name group read rbac copi path path user name read name 创建group read rbac shell base dir binkubectl appli path user name read name 准备kubectl使用的 user name 证书签名请求 templat src user name path dest base dir path user name path name user name 证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet user name path base dir bincfssljson bare user name name 设置集群参数 shell base dir binkubectl config setclust cluster name certificateauthor base dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell base dir binkubectl config setcredenti user name clientcertif base dir path user name path embedcertstru clientkey base dir path user name path name 设置上下文参数 shell base dir binkubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell base dir binkubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest base dir path name kubeproxy证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet path base dir bincfssljson bare kubeproxi name 设置集群参数 shell base dir binkubectl config setclust kubernet certificateauthor base dir path embedcertstru server kube apiserv kubeconfig base dir path name 设置客户端认证参数 shell base dir binkubectl config setcredenti kubeproxi clientcertif base dir path clientkey base dir path embedcertstru kubeconfig base dir path name 设置上下文参数 shell base dir binkubectl config setcontext default clusterkubernet userkubeproxi kubeconfig base dir path name 选择默认上下文 shell base dir binkubectl config usecontext default kubeconfig base dir path name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink name 注册变量以判断是否容器化运行ansible控制端 shell auxwc regist proc name ansibl 控制端写入环境变量 path lineinfil dest path state present regexp kubeasz line export path base dir bin path path ignor error name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash path ignor error name ansibl 控制端创建 kubectl 软链接 file src base dir binkubectl destusrbinkubectl statelink ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/chrony/tasks/main.yml,0.0,12.0,49.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,16.0,1.0,1.0,0.0,5.0,2.0,0.0,0.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,164.0,4.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.15,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin name apt ntp shell apt remov ntp ansibl distribut ubuntu debian ignor error name yum ntp shell yum remov ntp ansibl distribut cent red hat amazon arg warn ignor error name chroni packag namechroni statepres instal sourc offlin import task path instal sourc offlin block name chroni server templat path path ansibl distribut cent red hat amazon name chroni server templat path path ansibl distribut ubuntu debian name chroni server servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path block name chroni client templat path path ansibl distribut cent red hat amazon name chroni client templat path path ansibl distribut ubuntu debian name chroni client servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/tasks/ubuntu.yml,0.0,5.0,36.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,74.0,15.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.72,name 删除ubuntu默认安装 shell apt remov item item ufw lxd lxdclient lxcf lxccommon ansibl distribut ubuntu ignor error name ubuntudebian基础软件 apt name bashcomplet conntrack ipset ipvsadm libseccomp nfscommon psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/kube-node/tasks/node_lb.yml,0.0,13.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,1.0,0.0,0.0,10.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,53.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,11.0,176.0,13.0,0.0,0.0,roles/kube-router/templates/kuberouter-all.yaml.j2,easzlab/kubeasz,6.18,name fail info fail msg kubenod node exlb node time inventori hostnam group exlb tag restart name haproxi packag namehaproxi statepres instal sourc offlin import task path instal sourc offlin name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 停止haproxy服务 shell systemctl stop haproxi tag restart name 开启haproxy服务 shell systemctl start haproxi group kubemast length tag restart block name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name restart kubenod servic servic name item staterestart item kubelet kubeproxi ignor error master chg ye group kubemast length tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cilium/tasks/main.yml,0.0,12.0,64.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,8.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,212.0,11.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.52,name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag optkubekubesystem name cilium daemon set yaml文件 templat path path tag reconf name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim docker name cilium的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim containerd name cilium网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/tasks/main.yml,0.0,6.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,77.0,2.0,0.0,0.0,roles/clean/tasks/main.yml,easzlab/kubeasz,5.4,import task clean path del master ye import task clean path del node ye import task clean path del etcd ye import task clean path del ye import task clean path del chroni ye name clean env path lineinfil dest path state absent regexp item item kubeasz helm complet kubectl complet crictl complet helm tl enabl del env ye name 重启提示 warn debug msg 请重启节点以确保清除系统残留的虚拟网卡路由信息iptalbesipvs规则等 import pleas reboot node makesur clean net interfac rout iptablesipv rule,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,1.0,1.0,1.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/flannel/defaults/main.yml,100.0,3.0,4.0,5.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,7.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.81,flannel backend vxlan direct rout flanneld imag easzlabflannel vamd flannel offlin flannel path,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.23
0.0,10.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/tasks/clean_chrony.yml,0.0,1.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_chrony.yml,easzlab/kubeasz,4.45,block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/tasks/offline.yml,0.0,10.0,70.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,231.0,11.0,0.0,4.0,roles/prepare/tasks/offline.yml,easzlab/kubeasz,5.83,name 准备离线安装包目录 file nameoptkubepackagesbas statedirectori block name basic xenial 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic xenial 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas xenial ignor error block name basic bionic 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic bionic 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas bionic ignor error block name basic cento 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic cento 离线包 shell optkubepackagesbas tar zxf basic path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name basic stretch 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic stretch 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas stretch ignor error block name basic buster 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic buster 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,5.0,6.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.62,overlay type full firewal enabl kube router ver busybox ver kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,14.0,53.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,15.0,0.0,0.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,49.0,0.0,2.0,0.0,0.0,0.0,0.0,6.0,0.0,15.0,162.0,14.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.93,name fail info fail msg exlb node kubenod node time inventori hostnam group kubenod name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name 创建相关目录 file name item statedirectori item etchaproxi etckeepaliv name haproxykeepaliv packag name item statepres item haproxi keepaliv instal sourc offlin import task path instal sourc offlin name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/defaults/main.yml,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/prepare/defaults/main.yml,easzlab/kubeasz,1.0,instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,3.0,5.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,3.12,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,26.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,9.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,176.0,6.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.57,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag traefik offlin traefik offlin imag path contain runtim containerd name traefik部署 shell base dir binkubectl appli base dir path connect local run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim containerd name nginx ingress部署 shell base dir binkubectl appli base dir path connect local run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,3.0,3.0,3.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/docker/defaults/main.yml,100.0,6.0,9.0,6.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,4.17,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api enabl mirror registri reg mirror http path http path insecur reg,0.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.17
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/flannel/tasks/main.yml,0.0,10.0,58.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,191.0,9.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name flannel daemon set yaml文件 templat path path name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim docker name flannel的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim containerd name flannel网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
51.0,51.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,48.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,67.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.42,host kubemast kubenod etcd exlb chroni var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/defaults/main.yml,0.0,5.0,6.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cilium/templates/cilium-csr.json.j2,easzlab/kubeasz,2.29,del master del node del etcd del del chroni del env,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,15.0,2.0,7.0,-8.0,-8.0,-8.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,25.0,117.0,2.0,0.0,0.0,0.0,8.0,8.0,8.0,1.0,0.0,0.0,4.0,2.0,37.0,20.0,0.0,0.0,5.0,4.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,101.0,0.0,6.0,0.0,5.0,0.0,0.0,0.0,0.0,9.0,497.0,19.0,0.0,6.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.29,name node 节点创建相关目录 file path item statedirectori item optkubekubesystem name dns的部署文件 templat src item path destoptkubekubesystem item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend 的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag dn offlin dn offlin imag path contain runtim containerd name dn backend shell bin dir kubectl appli optkubekubesystem dn backend path run kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim containerd name metricsserver部署 shell base dir binkubectl appli base dir manifestsmetricsserv run connect local metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard heapster镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item dashboard offlin heapster offlin name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard heapster的离线镜像dock shell bin dir docker load optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim docker name dashboard heapster的离线镜像containerd shell bin dir ctr path imag import optkubeimag item item dashboard offlin heapster offlin item imag path contain runtim containerd name dashboard部署 shell base dir binkubectl appli base dir manifestsdashboard base dir binkubectl appli base dir manifestsheapsterheapsteronli run connect local kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metallb offlin metallb offlin imag path contain runtim containerd name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path name metallb control shell bin dir kubectl appli path bin dir kubectl appli optkubekubesystem metallb protocol path run metallb pod path metallb instal ye ignor error,0.0,2.0,-2.0,-5.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-5.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-22.0,-2.0,0.0,-1.0,-0.11
0.0,29.0,2.0,7.0,2.0,1.0,2.0,cfbb7686af2b522ac20e6344f4402a08363c748f,2.0,1565404402.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,7.0,31.0,12.0,3.0,2.0,2.0,1.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,95.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.75,dn instal ye dn backend coredn cluster dn svc servic cidr ipaddr net ipaddr ipaddr address kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver dashboard offlin dashboard dashboard ver path heapster ver heapster offlin heapster heapster ver path ingress instal ye ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,2.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.13
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,yes,roles/clean/tasks/clean_etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,3.0,0.0,0.0,roles/clean/tasks/clean_etcd.yml,easzlab/kubeasz,4.86,block name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path dir inventori hostnam group etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file nameetcd backup statedirectori name 准备指定的备份etcd copi src base dir path restor dest etcd path name 清理上次备份恢复数据 file nameetcd backup node name path stateabs name etcd 数据恢复 shell etcd backup etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell etcd backup node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,-10.0,-10.0,-10.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/kube-node/tasks/main.yml,100.0,26.0,107.0,6.0,0.0,0.0,0.0,10.0,10.0,10.0,1.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,25.0,0.0,0.0,6.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,82.0,0.0,2.0,0.0,0.0,0.0,0.0,13.0,0.0,25.0,362.0,24.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.88,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad import task node path inventori hostnam group kubemast name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name cni配置文件 templat path path name 注册变量 tmp ver shell base dir binkubeapiserv versioncut fcut regist tmp ver connect local tag upgrad restart node name kubernet 主版本号 set fact kube ver tmp path int tmp path int tag upgrad restart node name debug info debug var kube ver name 创建kubelet的配置文件 templat path path tag upgrad restart node name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path apiserv lineinfil dest path regexp server line server kube apiserv name 创建kubeproxi 服务文件 templat path path tag reloadkubeproxi restart node upgrad name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay tag reloadkubeproxi upgrad restart node name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,-2.0,-7.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-7.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-28.0,-2.0,0.0,-1.0,-0.05
31.0,31.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,90.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.4,host exlb task block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/helm/tasks/main.yml,0.0,11.0,59.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,12.0,238.0,12.0,0.0,1.0,roles/helm/tasks/main.yml,easzlab/kubeasz,6.02,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 获取当前集群所有 namespac shell bin dir kubectl get regist current run name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error run name 安装tiller shell bin dir helm init historymax histori max tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url upgrad ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/ex-lb/tasks/offline.yml,0.0,21.0,108.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,12.0,2.0,0.0,0.0,2.0,10.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,94.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,390.0,20.0,0.0,0.0,roles/ex-lb/tasks/offline.yml,easzlab/kubeasz,5.77,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error name 准备离线安装包目录 file nameoptkubepackageskeepaliv statedirectori block name keepaliv xenial 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv xenial 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name keepaliv bionic 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv bionic 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name keepaliv cento 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv cento 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name keepaliv stretch 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv stretch 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name keepaliv buster 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv buster 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/deploy/defaults/main.yml,0.0,2.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.95,expiri cert expiri kube apiserv http group kubemast cluster name cluster user name admin context name context cluster name user name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.58,host group kubemast role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,11.0,2.0,7.0,1.0,0.0,1.0,cfbb7686af2b522ac20e6344f4402a08363c748f,2.0,1565404402.0,1.0,no,roles/kube-master/defaults/main.yml,100.0,2.0,10.0,12.0,4.0,2.0,3.0,3.0,2.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.87,tmp endpoint group etcd http endfor etcd endpoint tmp path cluster kubernet svc servic cidr ipaddr net ipaddr ipaddr address master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,2.0,-1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.25
5.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/tasks/clean_master.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,44.0,2.0,0.0,0.0,roles/clean/tasks/clean_master.yml,easzlab/kubeasz,4.96,name stop disabl kubemast servic servic name item statestop enabledno item kubeapiserv kubecontrollermanag kubeschedul ignor error inventori hostnam group kubemast name remov file dir kubemast node file name item stateabs item varrunkubernet path path path inventori hostnam group kubemast,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/calico/tasks/main.yml,0.0,15.0,78.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,274.0,14.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.58,name 在节点创建相关目录 file name item statedirectori item etccalicossl path optkubeimag optkubekubesystem name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path run name calico daemon set yaml文件 templat srccalico calico ver main path path block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path calico offlin ignor error item imag path contain runtim docker name calico的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path calico offlin ignor error item imag path contain runtim containerd name calico网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl ignor error name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/tasks/clean_lb.yml,0.0,1.0,13.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_lb.yml,easzlab/kubeasz,4.72,block name servic keepaliv haproxi servic name item statestop enabledno item keepaliv haproxi ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv inventori hostnam group kubenod inventori hostnam group exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,9.0,51.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,1.0,0.0,9.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,109.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.99,name 删除centosredhat默认安装 shell yum remov item item firewalld pythonfirewal firewalldfilesystem arg warn ignor error name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name bashcomplet conntracktool ipset ipvsadm libseccomp nfsutil psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,95.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/clean/tasks/clean_node.yml,0.0,13.0,94.0,29.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,53.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,230.0,12.0,0.0,1.0,roles/clean/tasks/clean_node.yml,easzlab/kubeasz,6.48,block name stop disabl kubenod servic servic name item statestop enabledno item kubelet kubeproxi ignor error name umount kubelet filesystem shell mount grep varlibkubelet awk print xarg umount exit arg warn ignor error name remov file dir kubenod node file name item stateabs item varlibkubelet varlibkubeproxi path path optkubekubesystem etckubernet dir path block name check contain kubeasz run shell docker psgrep kubeasz echo found regist instal info block name stop disabl docker servic servic name docker state stop enabl ignor error name unmount docker filesystem mount pathvarrundockernetnsdefault stateunmount name unmount docker filesystem mount pathvarlibdockeroverlay stateunmount name remov file dir file name item stateabs item varlibdock varrundock etcdock path path path etcbash path usrbindock kubeasz instal path contain runtim docker block name stop disabl containerd servic servic name containerd state stop enabl ignor error name umount containerd filesystem shell mount grep path awk print xarg umount exit arg warn ignor error name remov file dir file name item stateabs item etccontainerd path path optcontainerd varlibcontainerd varruncontainerd contain runtim containerd name remov file dir file name item stateabs item etccni runflannel etccalico varruncalico varlibcalico varlogcalico etccilium varruncilium sysfsbpftc varlibcni varlibkuberout optkubekubeovn optkubekubesystem varrunopenvswitch etcoriginopenvswitch etcopenvswitch varlogopenvswitch inventori hostnam group kubemast inventori hostnam group kubenod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,5.0,2.0,5.0,cfbb7686af2b522ac20e6344f4402a08363c748f,3.0,1565404402.0,2.0,no,roles/kube-ovn/defaults/main.yml,77.78,2.0,6.0,2.0,7.0,2.0,5.0,2.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/kube-ovn/defaults/main.yml,easzlab/kubeasz,3.82,ovn node group kubemast kube ovn default cidr cluster cidr kube ovn default gateway cluster cidr ipaddr net ipaddr ipaddr address kube ovn node switch cidr kube ovn enabl mirror kube ovn offlin kube ovn path,0.0,5.0,1.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,17.0,0.0,0.0,0.0,1.24
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/kube-node/tasks/offline.yml,0.0,10.0,54.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/kube-node/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,4.0,4.0,4.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/deploy/deploy.yml,100.0,0.0,3.0,1.0,4.0,4.0,4.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/deploy/deploy.yml,easzlab/kubeasz,2.0,host localhost role deploy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,106.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,146.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.22,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/chrony/tasks/offline.yml,0.0,10.0,54.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/chrony/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageschroni statedirectori block name chroni xenial 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni xenial 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name chroni bionic 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni bionic 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name chroni cento 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni cento 离线包 shell optkubepackageschroni tar zxf chroni path rpm uvh forc nodep path tmpinstal path ansibl distribut major version ansibl distribut cent ignor error block name chroni stretch 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni stretch 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name chroni buster 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni buster 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/containerd/tasks/main.yml,0.0,11.0,50.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,149.0,12.0,0.0,2.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.21,name 获取是否已经安装docker shell systemctl statu dockergrep activ echo found regist docker statu name fail info fail msg docker alreadi instal run docker path name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/docker/tasks/main.yml,0.0,17.0,87.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,6.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,7.0,290.0,18.0,0.0,4.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.6,name 获取是否已经安装containerd shell systemctl statu containerdgrep activ echo found regist containerd statu name fail info fail msg containerd alreadi instal run containerd path name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.81,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag easzlabtil repo url http path histori max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/containerd/defaults/main.yml,0.0,2.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.58,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd enabl mirror registri,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,17.0,2.0,7.0,3.0,1.0,3.0,cfbb7686af2b522ac20e6344f4402a08363c748f,3.0,1565404402.0,2.0,no,roles/kube-node/defaults/main.yml,71.43,9.0,21.0,17.0,5.0,2.0,3.0,2.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,64.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,5.19,proxi mode ipv cluster dn svc servic cidr ipaddr net ipaddr ipaddr address sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv enabl ye kube reserv cpu memori ephemeralstorag sy reserv enabl sy reserv cpu memori ephemeralstorag balanc alg roundrobin kube apiserv inventori hostnam group kubemast http inventori hostnam els group kubemast length http els http group kubemast endif endif master chg instal sourc onlin,0.0,2.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.31
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/tasks/common.yml,0.0,12.0,44.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,13.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,13.0,114.0,13.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.89,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name systemd 配置目录 file path statedirectori name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host localhost role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.55,host kubemast kubenod etcd exlb chroni role role chroni group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,4.0,4.0,4.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/kube-ovn/tasks/main.yml,100.0,11.0,57.0,5.0,4.0,4.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,7.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,45.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,212.0,10.0,0.0,3.0,roles/kube-ovn/tasks/main.yml,easzlab/kubeasz,6.26,name 创建相关目录 file name item statedirectori item path optkubeimag optkubekubeovn name path templat path path name path templat path path name path templat path path block name 检查是否已下载离线kube ovn镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kube ovn offlin ignor error name 获取kube ovn离线镜像推送情况 command optkubeimag regist imag info name kube ovn的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim docker name kube ovn的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim containerd name kubeovn网络 shell bin dir kubectl label node ovn node kubeovnrolemast overwrit bin dir kubectl appli path sleep bin dir kubectl appli path sleep bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kubeovn 运行视下载镜像速度而定 shell bin dir kubectl get pod kubeovn widegrep kubeovncnigrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,1.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,0.03
0.0,19.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,10.0,60.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,201.0,9.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.2,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name 准备配置 kuberout daemon set without ipv templat path path name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim docker name kuberouter的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim containerd name kuberout daemon set shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.27,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell base dir binkubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/chrony/defaults/main.yml,0.0,2.0,8.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.32,ntp server path path path path path local network instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,1.5,host exlb role exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/prepare/tasks/main.yml,0.0,10.0,49.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,7.0,1.0,0.0,0.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,36.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,141.0,8.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.11,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path block name 分发证书相关 copi src base dir path item dest dir item item path path path path path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name kubeconfig配置文件 copi path path name path copi src base dir path path inventori hostnam group kubemast inventori hostnam group kubenod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,2.0,7.0,-10.0,-10.0,-10.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,16.0,86.0,2.0,0.0,0.0,0.0,10.0,10.0,10.0,1.0,0.0,0.0,1.0,1.0,6.0,1.0,0.0,0.0,15.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,68.0,0.0,2.0,0.0,2.0,0.0,0.0,6.0,0.0,16.0,319.0,17.0,0.0,3.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.79,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl tag upgrad name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd tag restart master name path templat path dest dir path basic auth enabl ye tag restart master name master 服务的 systemd unit templat src item path destetcsystemdsystem item item path path path tag restart master upgrad name 版本信息 shell bin dir kubeapiserv version regist ver tag restart master upgrad name 创建kubeapiserv v的systemd unit文件 templat path path tag restart master upgrad path name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name kubeconfig apiserv lineinfil dest path regexp server line server http inventori hostnam tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye run tag restart master,0.0,0.0,-2.0,-7.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-7.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-26.0,-2.0,0.0,-1.0,-0.08
3.0,3.0,2.0,7.0,3.0,3.0,3.0,cfbb7686af2b522ac20e6344f4402a08363c748f,1.0,1565404402.0,1.0,no,roles/clean/clean_node.yml,100.0,0.0,3.0,0.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/clean/clean_node.yml,easzlab/kubeasz,2.58,host node clean role clean,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
0.0,9.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach group kubemast calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,2.0,7.0,0.0,0.0,0.0,cfbb7686af2b522ac20e6344f4402a08363c748f,0.0,1565404402.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell base dir binkubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,27.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/meta/main.yml,0.0,0.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,50.0,4.0,0.0,0.0,roles/os-harden/meta/main.yml,easzlab/kubeasz,5.39,galaxi info author sebastian gumprich descript ansibl role provid numer securityrel configur provid allround base protect compani harden framework team licens apach licens min ansibl version platform name version name ubuntu version precis trusti xenial name debian version wheezi jessi name amazon galaxi tag system secur harden depend,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cilium/tasks/main.yml,0.0,12.0,64.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,8.0,1.0,0.0,5.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,54.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,212.0,11.0,0.0,3.0,roles/cilium/tasks/main.yml,easzlab/kubeasz,6.52,name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 检查内核版本 fail msg kernel ansibl kernel old cilium instal kernel verfloat name node 节点创建cilium 相关目录 file name item statedirectori item path varruncilium optkubeimag optkubekubesystem name cilium daemon set yaml文件 templat path path tag reconf name optionalmount bpf mount fstype bpf src bpff path sysfsbpf state mount block name 检查是否已下载离线cilium镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path cilium offlin ignor error name 获取cilium离线镜像推送情况 command optkubeimag regist imag info name cilium的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim docker name cilium的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path cilium offlin ignor error item imag path contain runtim containerd name cilium网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待ciliumnod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep ciliumgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/flannel/defaults/main.yml,0.0,3.0,4.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,7.0,0.0,0.0,0.0,roles/flannel/defaults/main.yml,easzlab/kubeasz,2.81,flannel backend vxlan direct rout flanneld imag easzlabflannel vamd flannel offlin flannel path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/ex-lb/defaults/main.yml,0.0,3.0,5.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/ex-lb/defaults/main.yml,easzlab/kubeasz,3.12,router balanc alg roundrobin ingress nodeport ye ingress tl nodeport ye instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-restore/defaults/main.yml,0.0,1.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/cluster-restore/defaults/main.yml,easzlab/kubeasz,4.14,restor path tmp node group etcd hostvar node name http endfor etcd node tmp path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/profile.yml,0.0,1.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,31.0,2.0,0.0,0.0,roles/os-harden/tasks/profile.yml,easzlab/kubeasz,4.5,name add pinerolo path path templat src path dest path path owner root group root mode secur kernel enabl core dump name remov pinerolo path path file path path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/flannel/tasks/main.yml,0.0,10.0,58.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,191.0,9.0,0.0,3.0,roles/flannel/tasks/main.yml,easzlab/kubeasz,6.24,name 创建flannel 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name flannel daemon set yaml文件 templat path path name 下载flannel cni plugin copi src base dir bin item dest bin dir item mode item bridg flannel hostloc loopback portmap block name 检查是否已下载离线flannel镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path flannel offlin ignor error name 获取flannel离线镜像推送情况 command optkubeimag regist imag info name flannel的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim docker name flannel的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path flannel offlin ignor error item imag path contain runtim containerd name flannel网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待flannel 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep flannelgrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/defaults/main.yml,0.0,5.0,6.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,12.0,0.0,0.0,0.0,roles/cilium/templates/cilium-csr.json.j2,easzlab/kubeasz,2.29,del master del node del etcd del del chroni del env,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,15.0,6.0,39.0,-1.0,-1.0,-1.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/cluster-addon/tasks/main.yml,100.0,25.0,116.0,2.0,8.0,8.0,8.0,9.0,9.0,9.0,8.0,0.0,0.0,4.0,2.0,37.0,20.0,0.0,0.0,5.0,4.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,101.0,0.0,6.0,0.0,5.0,0.0,0.0,0.0,0.0,9.0,488.0,19.0,0.0,6.0,roles/cluster-addon/tasks/main.yml,easzlab/kubeasz,6.29,name node 节点创建相关目录 file path item statedirectori item optkubekubesystem name dns的部署文件 templat src item path destoptkubekubesystem item path item kubedn coredn name 获取所有已经创建的pod信息 command bin dir kubectl get pod allnamespac regist pod info run name 获取已下载离线镜像信息 command base dir regist download info connect local run block block name 尝试推送离线 dn backend 镜像若执行失败可忽略 copi src base dir dn offlin destoptkubeimag dn offlin dn offlin download path name dn backend 离线镜像推送情况 command optkubeimag regist imag info name dn backend 的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag dn offlin dn offlin imag path contain runtim docker name dn backend 的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag dn offlin dn offlin imag path contain runtim containerd name dn backend shell bin dir kubectl appli optkubekubesystem dn backend path run kubedn pod path coredn pod path dn instal ye ignor error block block name 尝试推送离线 metricsserver镜像若执行失败可忽略 copi src base dir metricsserv offlin destoptkubeimag metricsserv offlin metricsserv offlin download path name 获取metricsserver离线镜像推送情况 command optkubeimag regist imag info name metricsserver的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim docker name metricsserver的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metricsserv offlin metricsserv offlin imag path contain runtim containerd name metricsserver部署 shell base dir binkubectl appli base dir manifestsmetricsserv run connect local metricsserv pod path metricsserv instal ye ignor error block block name 尝试推送离线 dashboard 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item dashboard offlin metricsscrap offlin name 获取dashboard离线镜像推送情况 command optkubeimag regist imag info name dashboard 的离线镜像docker shell bin dir docker load optkubeimag item item dashboard offlin metricsscrap offlin item imag path contain runtim docker name dashboard 的离线镜像containerd shell bin dir ctr path imag import optkubeimag item item dashboard offlin metricsscrap offlin item imag path contain runtim containerd name dashboard部署 shell base dir binkubectl appli base dir manifestsdashboard run connect local kubernetesdashboard pod path dashboard instal ye ignor error import task path ingresscontrol pod path ingress instal ye block block name 尝试推送离线 metallb镜像若执行失败可忽略 copi src base dir metallb offlin destoptkubeimag metallb offlin metallb offlin download path name 获取metallb离线镜像推送情况 command optkubeimag regist imag info name metallb的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag metallb offlin metallb offlin imag path contain runtim docker name metallb的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag metallb offlin metallb offlin imag path contain runtim containerd name metallb manifest templat srcmetallb item path destoptkubekubesystem item item path metallb protocol path name metallb control shell bin dir kubectl appli path bin dir kubectl appli optkubekubesystem metallb protocol path run metallb pod path metallb instal ye ignor error,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-9.0,0.0,0.0,0.0,0.0
0.0,29.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,3.0,1573359910.0,1.0,no,roles/cluster-addon/defaults/main.yml,100.0,7.0,31.0,12.0,7.0,2.0,4.0,7.0,2.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,95.0,0.0,0.0,0.0,roles/cluster-addon/defaults/main.yml,easzlab/kubeasz,5.75,dn instal ye dn backend coredn cluster dn svc servic cidr ipaddr net ipaddr ipaddr address kubedn ver coredn ver kubedn offlin kubedn kubedn ver path coredn offlin coredn coredn ver path dn offlin dn backend coredn coredn offlin els kubedn offlin endif metricsserv instal ye metric ver metricsserv offlin metricsserv metric ver path dashboard instal ye dashboard ver vbeta dashboard offlin dashboard dashboard ver path dashboard metric scraper ver metricsscrap offlin metricsscrap dashboard metric scraper ver path ingress instal ye ingress backend traefik traefik ver nginx ver traefik offlin traefik traefik ver path nginx ingress offlin nginx ingress nginx ver path metallb instal metallb ver metallb protocol layer metallb offlin metallb metallb ver path metallb vip pool,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/user_accounts.yml,0.0,6.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,3.0,2.0,0.0,7.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,37.0,0.0,1.0,0.0,1.0,0.0,0.0,1.0,0.0,7.0,149.0,8.0,0.0,2.0,roles/os-harden/tasks/user_accounts.yml,easzlab/kubeasz,6.09,name get uid min path shell awk suid min print path arg remov path regist uid min check mode chang name calcul uid max uid min substract set fact uid max uid path int uid min defin name set uid max debiansystem path exist set fact uid max ansibl famili debian uid min name set uid max system path exist set fact uid max uid min name get system account command awk uid maxquot print etcpasswd arg remov etcpasswd chang check mode regist sy acc name remov alway ignor system account list set fact sy acc cond sy path line differ alway ignor user check mode name chang system account user provid ignorelist user name item shell nologin shell path password createhom flatten sy acc cond default differ ignor user list,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/securetty.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,1.0,0.0,0.0,roles/os-harden/tasks/securetty.yml,easzlab/kubeasz,3.66,name creat securetti templat src path dest etcsecuretti owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-router/kube-router.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/kube-router/kube-router.yml,easzlab/kubeasz,2.32,host kubemast kubenod role kuberout,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
31.0,31.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/ex-lb/clean-ex-lb.yml,0.0,5.0,31.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,27.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,90.0,6.0,0.0,0.0,roles/ex-lb/clean-ex-lb.yml,easzlab/kubeasz,5.4,host exlb task block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length name stop keepaliv servic servic namekeepaliv statestop enabledno ignor error name stop haproxi servic servic namehaproxi statestop enabledno ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv name clean env path lineinfil dest path state absent regexp item item kubeasz,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/ex-lb/tasks/offline.yml,0.0,21.0,108.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,12.0,2.0,0.0,0.0,2.0,10.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,94.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,390.0,20.0,0.0,0.0,roles/ex-lb/tasks/offline.yml,easzlab/kubeasz,5.77,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error name 准备离线安装包目录 file nameoptkubepackageskeepaliv statedirectori block name keepaliv xenial 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv xenial 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name keepaliv bionic 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv bionic 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name keepaliv cento 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv cento 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name keepaliv stretch 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv stretch 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name keepaliv buster 离线包 copi src base dir downpackageskeepaliv path dest optkubepackageskeepalivedkeepaliv path name keepaliv buster 离线包 shell optkubepackageskeepaliv tar zxf keepaliv path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/deploy/defaults/main.yml,0.0,2.0,6.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/deploy/defaults/main.yml,easzlab/kubeasz,3.95,expiri cert expiri kube apiserv http group kubemast cluster name cluster user name admin context name context cluster name user name,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/Amazon.yml,0.0,1.0,4.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,11.0,0.0,0.0,0.0,roles/os-harden/vars/Amazon.yml,easzlab/kubeasz,3.28,alway ignor user root sync shutdown halt ecus sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
5.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cilium/cilium.yml,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,tools/trans_yml.sh,easzlab/kubeasz,2.32,host kubemast kubenod role cilium,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/tasks/clean_lb.yml,0.0,1.0,13.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_lb.yml,easzlab/kubeasz,4.72,block name servic keepaliv haproxi servic name item statestop enabledno item keepaliv haproxi ignor error name remov file dir file name item stateabs item etchaproxi etckeepaliv inventori hostnam group kubenod inventori hostnam group exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
16.0,16.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/etcd/clean-etcd.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,32.0,3.0,0.0,0.0,roles/new-etcd/clean-etcd.yml,easzlab/kubeasz,4.58,host etcd task name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-node/tasks/offline.yml,0.0,10.0,54.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/kube-node/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageshaproxi statedirectori block name haproxi xenial 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi xenial 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name haproxi bionic 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi bionic 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name haproxi cento 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi cento 离线包 shell optkubepackageshaproxi tar zxf haproxi path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name haproxi stretch 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi stretch 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name haproxi buster 离线包 copi src base dir downpackageshaproxi path dest optkubepackageshaproxyhaproxi path name haproxi buster 离线包 shell optkubepackageshaproxi tar zxf haproxi path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/harbor/tasks/main.yml,0.0,10.0,40.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,2.0,1.0,0.0,0.0,2.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,146.0,11.0,0.0,1.0,roles/harbor/tasks/main.yml,easzlab/kubeasz,6.22,name 创建data目录 file path data state directori mode name 注册变量result command data regist result block name 下发docker compose二进制文件 copi src base dir bindockercompos dest bin dir dockercompos mode name 下发harbor离线安装包 copi src base dir downharborofflineinstal harbor ver path dest dataharborofflineinstal harbor ver path name 解压harbor离线安装包 shell data tar zxf harborofflineinstal harbor ver path name 导入harbor所需 docker imag shell bin dir docker load dataharborharbor harbor ver path name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建harbor证书请求 templat path dest dir path name 创建harbor证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare harbor name path templat srcharbor harbor ver main path path name harbor shell dataharbor export path bin dir path path withclair registri path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/chrony/tasks/offline.yml,0.0,10.0,54.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,195.0,11.0,0.0,0.0,roles/chrony/tasks/offline.yml,easzlab/kubeasz,5.59,name 准备离线安装包目录 file nameoptkubepackageschroni statedirectori block name chroni xenial 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni xenial 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas xenial ignor error block name chroni bionic 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni bionic 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas bionic ignor error block name chroni cento 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni cento 离线包 shell optkubepackageschroni tar zxf chroni path rpm uvh forc nodep path tmpinstal path ansibl distribut major version ansibl distribut cent ignor error block name chroni stretch 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni stretch 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas stretch ignor error block name chroni buster 离线包 copi src base dir downpackageschroni path dest optkubepackageschronychroni path name chroni buster 离线包 shell optkubepackageschroni tar zxf chroni path dpkg path tmpinstal path ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/auditd.yml,0.0,2.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,29.0,3.0,0.0,0.0,roles/os-harden/tasks/auditd.yml,easzlab/kubeasz,4.35,name instal auditd packag packag packag name auditd packag state present name configur auditd packag templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/containerd/tasks/main.yml,0.0,11.0,50.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,12.0,149.0,12.0,0.0,2.0,roles/containerd/tasks/main.yml,easzlab/kubeasz,6.21,name 获取是否已经安装docker shell systemctl statu dockergrep activ echo found regist docker statu name fail info fail msg docker alreadi instal run docker path name 准备containerd相关目录 file name item statedirectori item bin dir etccontainerd name 加载内核模块 overlay modprob nameoverlay statepres name containerd 二进制文件 copi src base dir bincontainerdbin item dest bin dir item mode item containerd containerdshim containerdshimruncv crictl ctr runc tag upgrad name containerd 配置文件 templat path path tag upgrad name 创建systemd unit文件 templat path path tag upgrad name crictl templat path path name 开机启用 containerd shell systemctl enabl containerd ignor error name containerd shell systemctl daemonreload systemctl restart containerd tag upgrad name 轮询等待containerd服务运行 shell systemctl statu path activ regist containerd statu run containerd path retri delay tag upgrad name crictl 命令自动补全 lineinfil dest path state present regexp crictl complet line sourc crictl complet,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/containerd/defaults/main.yml,0.0,2.0,3.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/containerd/defaults/main.yml,easzlab/kubeasz,2.58,storag dir varlibcontainerd sandbox imag mirrorgooglecontainerspauseamd enabl mirror registri,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,1.0,1.0,1.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/prepare/tasks/common.yml,100.0,12.0,44.0,5.0,1.0,1.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,13.0,0.0,0.0,2.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,2.0,0.0,13.0,114.0,13.0,0.0,0.0,roles/prepare/tasks/common.yml,easzlab/kubeasz,5.89,name 禁用系统 swap shell swapoff sysctl path ignor error name 删除fstab swap 相关配置 lineinfil path etcfstab regexp swap state absent backup ye name 加载内核模块 modprob name item statepres item netfilt wrr ignor error name 转换内核版本为浮点数 set fact kernel ver ansibl path path int ansibl path path int name 加载内核模块 conntrack modprob namenf conntrack statepres kernel verfloat ignor error name 加载内核模块 conntrack ipv modprob namenf conntrack ipv statepres kernel verfloat ignor error name 启用systemd自动加载模块服务 servic namesystemdmodulesload enabledy name 增加内核模块开机加载配置 templat path path name 设置系统参数 templat path path name 生效系统参数 shell sysctl path ignor error name systemd 配置目录 file path statedirectori name 设置系统 ulimit templat path path name 把sctp列入内核模块黑名单 copi path path,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/pam.yml,0.0,13.0,81.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,33.0,32.0,0.0,0.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,81.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,14.0,341.0,10.0,0.0,0.0,roles/os-harden/tasks/pam.yml,easzlab/kubeasz,6.0,name updat pam debian system command pamauthupd packag ansibl distribut debian ansibl distribut ubuntu chang environ debian frontend noninteract name remov pam ccred disabl password cach packag name packag pam ccred state absent name remov pam cracklib play nice passwdqc apt name packag pam cracklib state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal packag strong password check apt name packag pam passwdqc state present updat cach ye ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name configur passwdqc templat src usrsharepamconfigspam path dest passwdqc path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name remov passwdqc apt name packag pam passwdqc state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl name instal talli apt name libpammodul state present ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name configur talli templat src usrsharepamconfigspam path dest talli path mode owner root group root ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name delet talli retri file path talli path state absent ansibl distribut debian ansibl distribut ubuntu auth pam passwdqc enabl auth retri name remov pam cracklib play nice passwdqc yum name packag pam cracklib state absent ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name instal packag strong password check yum name packag pam passwdqc state present ansibl famili red hat ansibl distribut version ansibl distribut amazon auth pam passwdqc enabl name remov passwdqc yum name packag pam passwdqc state absent ansibl famili red hat auth pam passwdqc enabl name configur passwdqc talli via central systemauth confic templat src path system path dest path mode owner root group root name nsa upgrad password hash algorithm sha templat src etcrhel path dest path mode owner root group root,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-storage/cluster-storage.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/cluster-storage/cluster-storage.yml,easzlab/kubeasz,2.0,host localhost role clusterstorag,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
9.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/chrony/chrony.yml,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,13.0,0.0,0.0,0.0,roles/chrony/chrony.yml,easzlab/kubeasz,3.55,host kubemast kubenod etcd exlb chroni role role chroni group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,3.0,3.0,3.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/kube-ovn/tasks/main.yml,100.0,12.0,59.0,5.0,3.0,3.0,3.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,8.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,47.0,0.0,4.0,0.0,0.0,0.0,0.0,2.0,0.0,9.0,220.0,11.0,0.0,3.0,roles/kube-ovn/tasks/main.yml,easzlab/kubeasz,6.31,name 创建相关目录 file name item statedirectori item path optkubeimag optkubekubeovn name path templat path path name path templat path path name path templat path path name kubectl plugin templat path destusrlocalbinkubectlko mode block name 检查是否已下载离线kube ovn镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kube ovn offlin ignor error name 获取kube ovn离线镜像推送情况 command optkubeimag regist imag info name kube ovn的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim docker name kube ovn的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kube ovn offlin ignor error item imag path contain runtim containerd name kubeovn网络 shell bin dir kubectl label node ovn node kubeovnrolemast overwrit bin dir kubectl appli path sleep bin dir kubectl appli path sleep bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kubeovn 运行视下载镜像速度而定 shell bin dir kubectl get pod kubeovn widegrep kubeovncnigrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,-1.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,1.0,0.0,0.0,0.05
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/modprobe.yml,0.0,4.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,4.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,63.0,5.0,0.0,1.0,roles/os-harden/tasks/modprobe.yml,easzlab/kubeasz,5.39,name instal modprob disabl filesystem packag name modprob packag state present name check efi instal stat path sysfirmwareefi regist efi instal name remov vfat fslist efi use set fact unus filesystem unus filesystem differ vfat efi path defin efi path name disabl unus filesystem templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-storage/tasks/nfs-client.yml,0.0,2.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,32.0,3.0,0.0,0.0,roles/cluster-storage/tasks/nfs-client.yml,easzlab/kubeasz,4.27,name 准备nfsclient 配置目录 file name base dir manifestsstoragenf statedirectori name 生成nfsclient动态存储配置 templat src path dest base dir manifestsstoragenf path name path name 开始部署nfsclient动态存储 shell base dir binkubectl appli base dir manifestsstoragenf path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/ex-lb/ex-lb.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/ex-lb/ex-lb.yml,easzlab/kubeasz,1.5,host exlb role exlb,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/apt.yml,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,23.0,2.0,0.0,0.0,roles/os-harden/tasks/apt.yml,easzlab/kubeasz,4.26,name remov deprec insecur packag packag packag apt name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/prepare/tasks/main.yml,0.0,10.0,49.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,2.0,0.0,0.0,7.0,1.0,0.0,0.0,1.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,36.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,141.0,8.0,0.0,0.0,roles/prepare/tasks/main.yml,easzlab/kubeasz,6.11,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin import task path ansibl distribut ubuntu debian import task path ansibl distribut cent red hat amazon import task path name prepar dir file name item statedirectori item bin dir dir path name 分发证书工具 cfssl copi src base dir bin item dest bin dir item mode item cfssl cfsslcertinfo cfssljson name 写入环境变量 path lineinfil dest path state present regexp kubeasz line export path bin dir path block name 分发证书相关 copi src base dir path item dest dir item item path path path path path name kubectl 命令自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash name kubeconfig配置文件 copi path path name path copi src base dir path path inventori hostnam group kubemast inventori hostnam group kubenod,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/login_defs.yml,0.0,1.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,17.0,1.0,0.0,0.0,roles/os-harden/tasks/login_defs.yml,easzlab/kubeasz,3.97,name creat path osb templat src path dest path owner root group root mode,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/hardening.yml,0.0,15.0,43.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,1.0,0.0,0.0,16.0,0.0,0.0,0.0,0.0,0.0,0.0,14.0,0.0,0.0,0.0,2.0,40.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,16.0,110.0,2.0,0.0,0.0,roles/os-harden/tasks/hardening.yml,easzlab/kubeasz,5.17,name set famili depend variabl includ var ansibl famili path tag alway name set depend variabl includ var item first found file ansibl distribut ansibl distribut major version path ansibl distribut path ansibl famili ansibl distribut major version path skip tag alway import task path tag auditd import task path tag limit import task login path tag login def import task minim path tag minim access import task path tag pam import task path tag modprob import task path tag profil import task path tag securetti import task suid path secur suid sgid enforc tag suid sgid import task path tag sysctl import task user path tag user account import task path tag rhost import task path ansibl famili red hat tag yum import task path ansibl distribut debian ansibl distribut ubuntu tag apt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-storage/tasks/alicloud-nas.yml,0.0,4.0,8.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,25.0,3.0,0.0,0.0,roles/cluster-storage/tasks/alicloud-nas.yml,easzlab/kubeasz,4.21,name 准备alicloudnas配置目录 file nameoptkubekubesystemstoragealicloudna statedirectori name 生成alicloudnas动态存储配置 templat src path dest optkubekubesystemstoragealicloudna path path name path name 开始部署alicloudnas动态存储 shell base dir binkubectl appli optkubekubesystemstoragealicloudna path path name path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/etcd/tasks/main.yml,0.0,8.0,44.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,31.0,0.0,3.0,0.0,0.0,0.0,0.0,4.0,0.0,9.0,135.0,9.0,0.0,1.0,roles/etcd/tasks/main.yml,easzlab/kubeasz,5.93,name prepar dir file name item statedirectori item bin dir dir etcetcdssl varlibetcd name 下载etcd二进制文件 copi src base dir bin item dest bin dir item mode item etcd etcdctl tag upgrad etcd name 分发证书相关 copi src base dir path item dest dir item item path path path name 创建etcd证书请求 templat path path name etcd证书和私钥 shell etcetcdssl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare etcd name 创建etcd的systemd unit文件 templat path path tag upgrad etcd name 开机启用etcd服务 shell systemctl enabl etcd ignor error name 开启etcd服务 shell systemctl daemonreload systemctl restart etcd ignor error tag upgrad etcd name 以轮询的方式等待服务同步完成 shell systemctl statu path activ regist etcd statu run etcd path retri delay tag upgrad etcd,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,6.0,3.0,4.0,809ae824782802ec177a49d38f4885a7df183e0f,2.0,1573359910.0,2.0,no,roles/deploy/tasks/main.yml,50.0,22.0,111.0,7.0,7.0,4.0,4.0,1.0,0.0,1.0,1.5,0.0,0.0,1.0,0.0,9.0,2.0,0.0,0.0,17.0,1.0,0.0,3.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,79.0,0.0,2.0,0.0,2.0,0.0,0.0,7.0,0.0,18.0,417.0,19.0,0.0,2.0,roles/ca/tasks/main.yml,easzlab/kubeasz,6.54,name prepar dir file name item statedirectori item base dir path base dir path name 本地设置 bin 目录权限 file path base dir bin statedirectori mode recursey name 读取ca证书stat信息 stat path base dir path regist name 准备ca配置文件和签名请求 templat src item path dest base dir path item item path path path defin name 证书和私钥 path defin shell base dir path base dir bincfssl gencert initca path base dir bincfssljson bare block name 删除原有kubeconfig file path stateabs ignor error name group read rbac copi path path user name read name 创建group read rbac shell base dir binkubectl appli path user name read name 准备kubectl使用的 user name 证书签名请求 templat src user name path dest base dir path user name path name user name 证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet user name path base dir bincfssljson bare user name name 设置集群参数 shell base dir binkubectl config setclust cluster name certificateauthor base dir path embedcertstru server kube apiserv name 设置客户端认证参数 shell base dir binkubectl config setcredenti user name clientcertif base dir path user name path embedcertstru clientkey base dir path user name path name 设置上下文参数 shell base dir binkubectl config setcontext context name cluster cluster name user user name name 选择默认上下文 shell base dir binkubectl config usecontext context name tag creat kctl cfg name 准备kubeproxi 证书签名请求 templat path dest base dir path name kubeproxy证书与私钥 shell base dir path base dir bincfssl gencert path path path profilekubernet path base dir bincfssljson bare kubeproxi name 设置集群参数 shell base dir binkubectl config setclust kubernet certificateauthor base dir path embedcertstru server kube apiserv kubeconfig base dir path name 设置客户端认证参数 shell base dir binkubectl config setcredenti kubeproxi clientcertif base dir path clientkey base dir path embedcertstru kubeconfig base dir path name 设置上下文参数 shell base dir binkubectl config setcontext default clusterkubernet userkubeproxi kubeconfig base dir path name 选择默认上下文 shell base dir binkubectl config usecontext default kubeconfig base dir path name 本地创建 easzctl 工具的软连接 file src base dir toolseaszctl destusrbineaszctl statelink name 注册变量以判断是否容器化运行ansible控制端 shell auxwc regist proc name ansibl 控制端写入环境变量 path lineinfil dest path state present regexp kubeasz line export path base dir bin path path ignor error name ansibl 控制端添加 kubectl 自动补全 lineinfil dest path state present regexp kubectl complet line sourc kubectl complet bash path ignor error name ansibl 控制端创建 kubectl 软链接 file src base dir binkubectl destusrbinkubectl statelink ignor error name pip instal netaddr pip name netaddr path ignor error,0.0,0.0,1.0,5.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,2.0,0.0,0.0,0.03
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/chrony/tasks/main.yml,0.0,12.0,49.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,16.0,1.0,1.0,0.0,5.0,2.0,0.0,0.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,47.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,164.0,4.0,0.0,0.0,roles/chrony/tasks/main.yml,easzlab/kubeasz,5.15,name apt更新缓存刷新 apt updat cachey cach valid time ignor error ansibl distribut ubuntu debian instal sourc offlin name apt ntp shell apt remov ntp ansibl distribut ubuntu debian ignor error name yum ntp shell yum remov ntp ansibl distribut cent red hat amazon arg warn ignor error name chroni packag namechroni statepres instal sourc offlin import task path instal sourc offlin block name chroni server templat path path ansibl distribut cent red hat amazon name chroni server templat path path ansibl distribut ubuntu debian name chroni server servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni server servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path block name chroni client templat path path ansibl distribut cent red hat amazon name chroni client templat path path ansibl distribut ubuntu debian name chroni client servic namechronyd staterestart enabledy ansibl distribut cent red hat amazon name chroni client servic namechroni staterestart enabledy ansibl distribut ubuntu debian inventori hostnam path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/RedHat-6.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,5.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat-6.yml,easzlab/kubeasz,1.92,sysctl rhel config path path syncooki,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/prepare/tasks/ubuntu.yml,0.0,5.0,36.0,14.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,6.0,74.0,15.0,0.0,0.0,roles/prepare/tasks/debian.yml,easzlab/kubeasz,5.72,name 删除ubuntu默认安装 shell apt remov item item ufw lxd lxdclient lxcf lxccommon ansibl distribut ubuntu ignor error name ubuntudebian基础软件 apt name bashcomplet conntrack ipset ipvsadm libseccomp nfscommon psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name journal 日志相关目录 file name item statedirectori item path varlogjourn name 优化设置 journal templat path path name journald servic namesystemdjournald staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/etcd/defaults/main.yml,0.0,1.0,3.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,19.0,0.0,0.0,0.0,roles/etcd/defaults/main.yml,easzlab/kubeasz,4.14,tmp node group etcd hostvar node name http endfor etcd node tmp path cluster state new,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,23.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/Debian.yml,0.0,5.0,23.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,44.0,0.0,0.0,0.0,roles/os-harden/vars/Debian.yml,easzlab/kubeasz,5.08,packag pam ccred libpamccr packag pam passwdqc libpampasswdqc packag pam cracklib libpamcracklib passwdqc path usrsharepamconfigspasswdqc talli path usrsharepamconfigst nologin shell path usrsbinnologin auditd packag auditd modprob packag kmod shadow perm owner root group shadow mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-node/tasks/node_lb.yml,0.0,13.0,55.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,1.0,0.0,0.0,10.0,1.0,0.0,0.0,1.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,53.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,11.0,176.0,13.0,0.0,0.0,roles/kube-router/templates/kuberouter-all.yaml.j2,easzlab/kubeasz,6.18,name fail info fail msg kubenod node exlb node time inventori hostnam group exlb tag restart name haproxi packag namehaproxi statepres instal sourc offlin import task path instal sourc offlin name 创建haproxy配置目录 file nameetchaproxi statedirectori name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 停止haproxy服务 shell systemctl stop haproxi tag restart name 开启haproxy服务 shell systemctl start haproxi group kubemast length tag restart block name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name path apiserv lineinfil dest path regexp server line server kube apiserv name restart kubenod servic servic name item staterestart item kubelet kubeproxi ignor error master chg ye group kubemast length tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/tasks/main.yml,0.0,6.0,26.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,20.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,77.0,2.0,0.0,0.0,roles/clean/tasks/main.yml,easzlab/kubeasz,5.4,import task clean path del master ye import task clean path del node ye import task clean path del etcd ye import task clean path del ye import task clean path del chroni ye name clean env path lineinfil dest path state absent regexp item item kubeasz helm complet kubectl complet crictl complet helm tl enabl del env ye name 重启提示 warn debug msg 请重启节点以确保清除系统残留的虚拟网卡路由信息iptalbesipvs规则等 import pleas reboot node makesur clean net interfac rout iptablesipv rule,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,10.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/tasks/clean_chrony.yml,0.0,1.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,39.0,2.0,0.0,0.0,roles/clean/tasks/clean_chrony.yml,easzlab/kubeasz,4.45,block name stop disabl chroni ubuntu servic namechroni statestop enabledno ignor error ansibl distribut ubuntu debian name stop disabl chronyd cent osr hat servic namechronyd statestop enabledno ignor error ansibl distribut cent red hat amazon group chroni length,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/prepare/tasks/offline.yml,0.0,10.0,70.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,5.0,0.0,6.0,1.0,0.0,0.0,1.0,5.0,0.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,63.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,231.0,11.0,0.0,4.0,roles/prepare/tasks/offline.yml,easzlab/kubeasz,5.83,name 准备离线安装包目录 file nameoptkubepackagesbas statedirectori block name basic xenial 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic xenial 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas xenial ignor error block name basic bionic 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic bionic 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas bionic ignor error block name basic cento 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic cento 离线包 shell optkubepackagesbas tar zxf basic path rpm uvh forc nodep path tmpinstal path ansibl distribut cent ansibl distribut major version ignor error block name basic stretch 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic stretch 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas stretch ignor error block name basic buster 离线包 copi src base dir downpackagesbas path dest optkubepackagesbasicbas path name basic buster 离线包 shell optkubepackagesbas tar zxf basic path dpkg path tmpinstal path regist instal info instal path retri delay ansibl distribut releas buster ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/harbor/defaults/main.yml,0.0,1.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,8.0,0.0,0.0,0.0,roles/harbor/defaults/main.yml,easzlab/kubeasz,3.0,harbor ver harbor ver main harbor path harbor path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-router/defaults/main.yml,0.0,5.0,6.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,16.0,0.0,0.0,0.0,roles/kube-router/defaults/main.yml,easzlab/kubeasz,3.62,overlay type full firewal enabl kube router ver busybox ver kuberout offlin kuberout kube router ver path busybox offlin busybox busybox ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,13.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-storage/defaults/main.yml,0.0,1.0,13.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,13.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,23.0,0.0,0.0,0.0,roles/cluster-storage/defaults/main.yml,easzlab/kubeasz,4.09,storag nf enabl server server path datanf storag class nfsdynamicclass provision name nfsprovision aliyun na enabl server path server path storag class classaliyunna control name aliyunnascontrol,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,yes,roles/ex-lb/tasks/main.yml,0.0,14.0,53.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,15.0,0.0,0.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,49.0,0.0,2.0,0.0,0.0,0.0,0.0,6.0,0.0,15.0,162.0,14.0,0.0,1.0,roles/ex-lb/tasks/main.yml,easzlab/kubeasz,5.93,name fail info fail msg exlb node kubenod node time inventori hostnam group kubenod name 注册变量 tmp shell agrep inventori hostnam awk print regist tmp tag restart name 设置变量 set fact path tag restart name 创建相关目录 file name item statedirectori item etchaproxi etckeepaliv name haproxykeepaliv packag name item statepres item haproxi keepaliv instal sourc offlin import task path instal sourc offlin name path templat path path ansibl distribut cent red hat amazon tag restart name haproxi templat path path tag restart name keepaliv 主节点 templat path path role master tag restart name keepaliv 备节点 templat path path role backup tag restart name daemonreload path shell systemctl daemonreload tag restart name 开机启用haproxy服务 shell systemctl enabl haproxi ignor error name 重启haproxy服务 shell systemctl restart haproxi tag restart name 开机启用keepalived服务 shell systemctl enabl keepaliv ignor error name 重启keepalived服务 shell systemctl restart keepaliv tag restart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,1.0,6.0,39.0,1.0,0.0,3.0,809ae824782802ec177a49d38f4885a7df183e0f,2.0,1573359910.0,2.0,no,roles/prepare/defaults/main.yml,60.0,1.0,1.0,1.0,3.0,2.0,3.0,2.0,1.0,2.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,2.0,0.0,0.0,0.0,roles/prepare/defaults/main.yml,easzlab/kubeasz,1.0,instal sourc onlin,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,26.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-addon/tasks/ingress.yml,0.0,9.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,12.0,4.0,0.0,0.0,0.0,2.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,40.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,176.0,6.0,0.0,2.0,roles/cluster-addon/tasks/ingress.yml,easzlab/kubeasz,5.57,block block name 尝试推送离线 traefik镜像若执行失败可忽略 copi src base dir traefik offlin destoptkubeimag traefik offlin traefik offlin download path name 获取traefik离线镜像推送情况 command optkubeimag regist imag info name traefik的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag traefik offlin traefik offlin imag path contain runtim docker name traefik的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag traefik offlin traefik offlin imag path contain runtim containerd name traefik部署 shell base dir binkubectl appli base dir path connect local run ingress backend traefik ignor error block block name 尝试推送离线 nginxingress镜像若执行失败可忽略 copi src base dir nginx ingress offlin destoptkubeimag nginx ingress offlin nginx ingress offlin download path name 获取nginx ingress离线镜像推送情况 command optkubeimag regist imag info name nginx ingress的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim docker name nginx ingress的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag nginx ingress offlin nginx ingress offlin imag path contain runtim containerd name nginx ingress部署 shell base dir binkubectl appli base dir path connect local run ingress backend nginxingress ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/docker/defaults/main.yml,0.0,6.0,9.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,18.0,0.0,0.0,0.0,roles/cluster-addon/vars/main.yml,easzlab/kubeasz,4.17,log driver jsonfil log level warn log max size log max file storag dir varlibdock enabl remot api enabl mirror registri reg mirror http path http path insecur reg,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
51.0,51.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/os-harden.yml,0.0,1.0,48.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,42.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,67.0,0.0,0.0,6.0,roles/os-harden/os-harden.yml,easzlab/kubeasz,5.42,host kubemast kubenod etcd exlb chroni var secur user allow chang user auth pam passwdqc enabl secur suid sgid blacklist binumount secur suid sgid whitelist usrbinrlogin filesystem whitelist vfat sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path ignor path announc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address role osharden,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/yum.yml,0.0,5.0,38.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,32.0,0.0,3.0,0.0,2.0,0.0,0.0,1.0,0.0,6.0,105.0,8.0,0.0,2.0,roles/os-harden/tasks/yum.yml,easzlab/kubeasz,5.8,name remov unus repositori file name path item path state absent item cent osdebuginfo cent osmedia cent osvault secur packag clean name get yumrepositoryfil shell find path type name path chang regist yum repo name check path exist stat path path regist rhnplugin file name activ gpgcheck yumrepo replac dest item regexp sgpgcheck replac gpgcheck flatten path yum path line default name activ gpgcheck yum rhn exist replac dest path regexp sgpgcheck replac gpgcheck rhnplugin path name remov deprec insecur packag packag packag yum name item state absent item secur packag list secur packag clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,14.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/limits.yml,0.0,5.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,96.0,4.0,0.0,0.0,roles/os-harden/tasks/limits.yml,easzlab/kubeasz,5.82,block name creat path exist sysctla sysctlb file path path owner root group root mode state directori name creat adit limit config file path sysctla sysctlb pam limit dest path domain limit type hard limit item core valu comment prevent core dump user usual need develop may contain sensit inform name set path perm root ownership file path path owner root group root mode secur kernel enabl core dump name remov path config file file path path state absent secur kernel enabl core dump,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,15.0,6.0,39.0,-1.0,-1.0,-1.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/clean/tasks/clean_etcd.yml,100.0,1.0,15.0,1.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,34.0,3.0,0.0,0.0,roles/clean/tasks/clean_etcd.yml,easzlab/kubeasz,4.77,block name stop disabl etcd servic servic name etcd state stop enabl ignor error name remov file dir file name item stateabs item varlibetcd etcetcd backupk path inventori hostnam group etcd,0.0,-1.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,-0.09
0.0,2.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-restore/tasks/main.yml,0.0,7.0,23.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,18.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,8.0,80.0,8.0,0.0,0.0,roles/cluster-restore/tasks/main.yml,easzlab/kubeasz,5.59,name 停止ectd servic nameetcd statestop name 清除etcd 数据目录 file namevarlibetcdmemb stateabs name 生成备份目录 file nameetcd backup statedirectori name 准备指定的备份etcd copi src base dir path restor dest etcd path name 清理上次备份恢复数据 file nameetcd backup node name path stateabs name etcd 数据恢复 shell etcd backup etcdctl api bin dir etcdctl snapshot restor path name node name initialclust etcd node initialclustertoken etcdclust initialadvertisepeerurl http inventori hostnam name 恢复数据至etcd 数据目录 shell etcd backup node name path varlibetcd name 重启etcd servic nameetcd staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/find_files.yml,0.0,1.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,11.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,34.0,2.0,0.0,1.0,roles/os-harden/tasks/find_files.yml,easzlab/kubeasz,4.57,name find directori minim access find path outer item recurs ye regist minim access directori name minim access found file file path path mode gow state file item minim access path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-node/tasks/main.yml,0.0,26.0,107.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,1.0,0.0,0.0,25.0,0.0,0.0,6.0,3.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,82.0,0.0,2.0,0.0,0.0,0.0,0.0,13.0,0.0,25.0,362.0,24.0,0.0,3.0,roles/kube-node/tasks/main.yml,easzlab/kubeasz,6.88,name 创建kubenod 相关目录 file name item statedirectori item varlibkubelet varlibkubeproxi path name kubelet kubeproxi 二进制和基础 cni plugin copi src base dir bin item dest bin dir item mode item kubectl kubelet kubeproxi bridg hostloc loopback tag upgrad import task node path inventori hostnam group kubemast name kubeconfig apiserv lineinfil dest path regexp server line server kube apiserv name 准备kubelet 证书签名请求 templat path dest dir path name kubelet 证书与私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubelet name 设置集群参数 shell bin dir kubectl config setclust kubernet certificateauthor dir path embedcertstru server kube apiserv path name 设置客户端认证参数 shell bin dir kubectl config setcredenti system node inventori hostnam clientcertif dir path embedcertstru clientkey dir path path name 设置上下文参数 shell bin dir kubectl config setcontext default clusterkubernet usersystem node inventori hostnam path name 选择默认上下文 shell bin dir kubectl config usecontext default path name cni配置文件 templat path path name 注册变量 tmp ver shell base dir binkubeapiserv versioncut fcut regist tmp ver connect local tag upgrad restart node name kubernet 主版本号 set fact kube ver tmp path int tmp path int tag upgrad restart node name debug info debug var kube ver name 创建kubelet的配置文件 templat path path tag upgrad restart node name 创建kubelet的systemd unit文件 templat path path tag upgrad restart node name 开机启用kubelet shell systemctl enabl kubelet ignor error name 开启kubelet shell systemctl daemonreload systemctl restart kubelet tag upgrad restart node name path apiserv lineinfil dest path regexp server line server kube apiserv name 创建kubeproxi 服务文件 templat path path tag reloadkubeproxi restart node upgrad name 开机启用kubeproxi shell systemctl enabl kubeproxi ignor error name 开启kubeproxi shell systemctl daemonreload systemctl restart kubeproxi tag reloadkubeproxi upgrad restart node name 轮询等待kubelet启动 shell systemctl statu path activ regist kubelet statu run kubelet path retri delay tag reloadkubeproxi upgrad restart node name 轮询等待node达到ready状态 shell bin dir kubectl get node inventori hostnam awk print regist node statu node path readi node path readi schedul disabl retri delay tag upgrad restart node name 设置node节点rol shell bin dir kubectl label node inventori hostnam path overwrit ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/helm/tasks/main.yml,0.0,11.0,59.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,2.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,38.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,12.0,238.0,12.0,0.0,1.0,roles/helm/tasks/main.yml,easzlab/kubeasz,6.02,name 下载helm客户端 copi src base dir binhelm dest bin dir helm mode name 创建helm 客户端证书请求 templat path dest dir helm cert path name 创建helm 客户端证书 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet helm cert path bin dir cfssljson bare helm cert name 创建tiller 服务端证书请求 templat path dest dir tiller cert path name 创建tiller 服务端证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet tiller cert path bin dir cfssljson bare tiller cert name 获取当前集群所有 namespac shell bin dir kubectl get regist current run name 准备rbac配置 templat path path name 在ks上创建rbac shell bin dir kubectl appli path ignor error run name 安装tiller shell bin dir helm init historymax histori max tillertl tillertlsverifi tillertlscert dir tiller cert path tillertlskey dir tiller cert path tlscacert dir path serviceaccount tiller tillernamespac helm namespac tillerimag tiller imag stablerepourl repo url upgrad ignor error name 配置helm客户端 shell dir path path dir helm cert path path dir helm cert path path ignor error name helm 命令自动补全 lineinfil dest path state present regexp helm complet line sourc helm complet bash name 配置helm tls环境变量 lineinfil dest path state present regexp helm tl environ line export helm tl enabletru,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/helm/helm.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/helm/helm.yml,easzlab/kubeasz,2.58,host group kubemast role helm,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,11.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-master/defaults/main.yml,0.0,2.0,10.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,8.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/kube-master/defaults/main.yml,easzlab/kubeasz,4.87,tmp endpoint group etcd http endfor etcd endpoint tmp path cluster kubernet svc servic cidr ipaddr net ipaddr ipaddr address master cert host path basic auth enabl basic auth user admin basic auth pass pwd node cidr len,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/tasks/clean_master.yml,0.0,1.0,16.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,44.0,2.0,0.0,0.0,roles/clean/tasks/clean_master.yml,easzlab/kubeasz,4.96,name stop disabl kubemast servic servic name item statestop enabledno item kubeapiserv kubecontrollermanag kubeschedul ignor error inventori hostnam group kubemast name remov file dir kubemast node file name item stateabs item varrunkubernet path path path inventori hostnam group kubemast,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/calico/tasks/main.yml,0.0,15.0,78.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,7.0,3.0,0.0,0.0,11.0,1.0,0.0,4.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,59.0,0.0,5.0,0.0,0.0,0.0,0.0,5.0,0.0,12.0,274.0,14.0,0.0,4.0,roles/calico/tasks/main.yml,easzlab/kubeasz,6.58,name 在节点创建相关目录 file name item statedirectori item etccalicossl path optkubeimag optkubekubesystem name 创建calico 证书请求 templat path path name calico证书和私钥 shell etccalicossl bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare calico name get calicoetcdsecret info shell bin dir kubectl get secret kubesystem regist secret info run name calicoetcdsecret shell etccalicossl bin dir kubectl creat secret gener kubesystem calicoetcdsecret fromfileetcdca dir path path path calicoetcdsecret secret path run name calico daemon set yaml文件 templat srccalico calico ver main path path block name 检查是否已下载离线calico镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path calico offlin ignor error name 获取calico离线镜像推送情况 command optkubeimag regist imag info name calico的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path calico offlin ignor error item imag path contain runtim docker name calico的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path calico offlin ignor error item imag path contain runtim containerd name calico网络 shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 下载calicoctl 客户端 copi src base dir bin item dest bin dir item mode item calicoctl ignor error name calicoctl配置文件 templat path path name 轮询等待caliconod 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep caliconodegrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,21.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/RedHat.yml,0.0,6.0,21.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,21.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,40.0,0.0,0.0,0.0,roles/os-harden/vars/RedHat.yml,easzlab/kubeasz,4.82,modprob packag moduleinittool auditd packag audit packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,2.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/main.yml,0.0,1.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/os-harden/tasks/main.yml,easzlab/kubeasz,2.0,includ task path harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,6.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/prepare/tasks/centos.yml,0.0,9.0,51.0,15.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,1.0,0.0,9.0,0.0,0.0,0.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,39.0,0.0,1.0,0.0,0.0,0.0,0.0,3.0,0.0,9.0,109.0,17.0,0.0,0.0,roles/prepare/tasks/centos.yml,easzlab/kubeasz,5.99,name 删除centosredhat默认安装 shell yum remov item item firewalld pythonfirewal firewalldfilesystem arg warn ignor error name 添加amazon epel仓库 shell amazonlinuxextra instal epel ansibl distribut amazon ignor error name 安装基础软件包 yum name bashcomplet conntracktool ipset ipvsadm libseccomp nfsutil psmisc rsync socat state present instal sourc offlin import task path instal sourc offlin name 临时关闭 selinux shell setenforc fail name 永久关闭 selinux lineinfil dest etcselinuxconfig regexp selinux line selinuxdis name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp mod load imjourn line name 禁止rsyslog获取journald日志 lineinfil dest path state present regexp imjourn state file line name 重启rsyslog服务 servic namersyslog staterestart,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,94.0,6.0,39.0,-1.0,-1.0,-1.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/clean/tasks/clean_node.yml,100.0,13.0,93.0,29.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,0.0,0.0,1.0,0.0,6.0,2.0,2.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,53.0,0.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,227.0,12.0,0.0,1.0,roles/clean/tasks/clean_node.yml,easzlab/kubeasz,6.47,block name stop disabl kubenod servic servic name item statestop enabledno item kubelet kubeproxi ignor error name umount kubelet filesystem shell mount grep varlibkubelet awk print xarg umount exit arg warn ignor error name remov file dir kubenod node file name item stateabs item varlibkubelet varlibkubeproxi path path optkubekubesystem etckubernet path block name check contain kubeasz run shell docker psgrep kubeasz echo found regist instal info block name stop disabl docker servic servic name docker state stop enabl ignor error name unmount docker filesystem mount pathvarrundockernetnsdefault stateunmount name unmount docker filesystem mount pathvarlibdockeroverlay stateunmount name remov file dir file name item stateabs item varlibdock varrundock etcdock path path path etcbash path usrbindock kubeasz instal path contain runtim docker block name stop disabl containerd servic servic name containerd state stop enabl ignor error name umount containerd filesystem shell mount grep path awk print xarg umount exit arg warn ignor error name remov file dir file name item stateabs item etccontainerd path path optcontainerd varlibcontainerd varruncontainerd contain runtim containerd name remov file dir file name item stateabs item etccni runflannel etccalico varruncalico varlibcalico varlogcalico etccilium varruncilium sysfsbpftc varlibcni varlibkuberout optkubekubeovn optkubekubesystem varrunopenvswitch etcoriginopenvswitch etcopenvswitch varlogopenvswitch inventori hostnam group kubemast inventori hostnam group kubenod,0.0,-1.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-3.0,0.0,0.0,0.0,-0.01
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/kube-ovn/defaults/main.yml,100.0,2.0,6.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,24.0,0.0,0.0,0.0,roles/kube-ovn/defaults/main.yml,easzlab/kubeasz,3.91,ovn node group kubemast kube ovn default cidr cluster cidr kube ovn default gateway cluster cidr ipaddr net ipaddr ipaddr address kube ovn node switch cidr kube ovn enabl mirror kube ovn offlin kube ovn path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.09
0.0,2.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cluster-storage/tasks/main.yml,0.0,2.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,12.0,0.0,0.0,0.0,roles/cluster-storage/tasks/main.yml,easzlab/kubeasz,2.92,import task path path ye import task path path path ye,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
3.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/deploy/deploy.yml,0.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,4.0,0.0,0.0,0.0,roles/deploy/deploy.yml,easzlab/kubeasz,2.0,host localhost role deploy,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,106.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/defaults/main.yml,0.0,44.0,91.0,113.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,83.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,152.0,0.0,0.0,0.0,roles/os-harden/defaults/main.yml,easzlab/kubeasz,6.62,desktop enabl env extra user path auth max age auth min age auth retri auth lockout time auth timeout auth allow homeless auth pam passwdqc enabl auth pam passwdqc option mindis disabl auth pam pwqualiti option tri first pass retri type auth root tti consol tti tti tti tti tti tti chfn restrict secur user allow ignor user vagrant kitchen secur kernel enabl modul load secur kernel enabl core dump secur suid sgid enforc secur suid sgid blacklist secur suid sgid whitelist secur suid sgid remov unknown secur packag clean secur packag list xinetd inetd ypserv telnetserv rshserver prelink secur init prompt secur init singl ufw manag default ufw ipt sysctl ufw default input polici drop ufw default output polici accept ufw default forward polici drop ufw default applic polici skip ufw manag builtin ufw ipt modul conntrack ftp nat ftp conntrack netbio sysctl config path forward path path path path filter path filter path echo ignor broadcast path ignor bogu error respons path ratelimit path ratemask path ipv path timestamp path ignor path announc path rfc path media path media path sourc rout path sourc rout path redirect path redirect path redirect path redirect path redirect path redirect path redirect path redirect path martian path martian path solicit path rtr pref path pinfo path defrtr path path transmit path address path path dumpabl path space path use pid path restrict path scope path min addr path hardlink path symlink sysctl overwrit unus filesystem cramf freevxf jff hf hfsplu squashf udf vfat filesystem whitelist harden enabl,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/rhosts.yml,0.0,3.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,68.0,4.0,0.0,1.0,roles/os-harden/tasks/rhosts.yml,easzlab/kubeasz,4.98,name get user account command awk print etcpasswd chang check mode regist user name delet rhostsfil system file dest item path state absent flatten path line default name delet path system file dest path state absent name delet path system file dest item path state absent flatten path line default,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,75.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/main.yml,0.0,4.0,71.0,49.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,75.0,0.0,0.0,0.0,roles/os-harden/vars/main.yml,easzlab/kubeasz,6.23,secur suid sgid system blacklist usrbinrcp usrbinrlogin usrbinrsh usrlibexecopensshsshkeysign usrlibopensshsshkeysign sbinnetreport usrsbinusernetctl usrsbinuserisdnctl usrsbinpppd usrbinlockfil usrbinmaillock usrbinmailunlock usrbinmailtouchlock usrbindotlockfil usrbinarp usrsbinuuidd usrbinmtr usrlibevolutioncamellockhelp usrlibpt chown usrlibejectdmcryptgetdevic path secur suid sgid system whitelist binmount binp binsu binumount sbinpam timestamp check sbinunix chkpwd usrbinat usrbingpasswd usrbinloc usrbinnewgrp usrbinpasswd usrbinsshag usrlibexecutempterutempt usrsbinlockdev path usrbinexpiri binp path path path path path usrbincrontab usrbinwal usrbinwrit usrbinscreen usrbinmloc usrbinchag usrbinchfn usrbinchsh binfusermount usrbinpkexec usrbinsudo usrbinsudoedit usrsbinpostdrop usrsbinpostqueu usrsbinsuexec usrlibsquidncsa auth usrlibsquidpam auth usrkerberosbinksu usrsbinccr valid usrbinxorg usrbinx usrlibdbusdbusdaemonlaunchhelp usrlibvtegnomeptyhelp usrliblibvtegnomeptyhelp usrliblibvtegnomeptyhelp alway ignor user root sync shutdown halt,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,12.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/docker/tasks/main.yml,0.0,17.0,87.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,1.0,0.0,0.0,6.0,1.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,65.0,0.0,3.0,0.0,0.0,0.0,0.0,3.0,0.0,7.0,290.0,18.0,0.0,4.0,roles/docker/tasks/main.yml,easzlab/kubeasz,6.6,name 获取是否已经安装containerd shell systemctl statu containerdgrep activ echo found regist containerd statu name fail info fail msg containerd alreadi instal run containerd path name 获取是否运行名为kubeasz的容器 shell systemctl statu dockergrep activ docker psgrep kubeasz echo found regist instal info tag upgrad docker download docker name 获取docker版本信息 shell base dir bindockerd versioncut regist docker ver connect local run tag upgrad docker download docker name 转换docker版本信息为浮点数 set fact docker ver docker path int docker path int tag upgrad docker download docker name debug info debug var docker ver tag upgrad docker download docker block name 准备docker相关目录 file name item statedirectori item bin dir etcdock name docker 二进制文件 copi src base dir bin item dest bin dir item mode item dockercontainerd dockercontainerdshim dockerinit dockerrunc docker dockercontainerdctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker 二进制文件 path copi src base dir bin item dest bin dir item mode item containerd containerdshim dockerinit runc docker ctr dockerd dockerproxi tag upgrad docker download docker docker verfloat name docker命令自动补全 copi srcdocker destetcbash path mode name docker国内镜像加速 templat path path name flushipt shell iptabl input accept iptabl iptabl iptabl nat iptabl nat iptabl raw iptabl raw iptabl mangl iptabl mangl name 创建docker的systemd unit文件 templat path path tag upgrad docker download docker name 开机启用docker shell systemctl enabl docker ignor error name 开启docker shell systemctl daemonreload systemctl restart docker tag upgrad docker name dockertag copi srcdockertag dest bin dir dockertag mode name 轮询等待docker服务运行 shell systemctl statu path activ regist docker statu run docker path retri delay tag upgrad docker name docker 命令软链接 file src bin dir docker destusrbindock statelink ignor error kubeasz instal path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,4.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/cilium/defaults/main.yml,0.0,4.0,4.0,6.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,docs/guide/nfs-client.md,easzlab/kubeasz,3.12,node multipl network cilium ver cilium offlin cilium cilium ver path etcd cluster size,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/helm/defaults/main.yml,0.0,0.0,7.0,2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,7.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,14.0,0.0,0.0,0.0,roles/helm/defaults/main.yml,easzlab/kubeasz,3.81,helm namespac kubesystem helm cert helm tiller tiller tiller cert tiller tiller imag easzlabtil repo url http path histori max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,16.0,6.0,39.0,-3.0,-3.0,-3.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,no,roles/kube-node/defaults/main.yml,100.0,8.0,20.0,16.0,0.0,0.0,0.0,3.0,3.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,12.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,62.0,0.0,0.0,0.0,manifests/kubedns/kubedns-svc.yaml,easzlab/kubeasz,5.12,cluster dn svc servic cidr ipaddr net ipaddr ipaddr address sandbox imag mirrorgooglecontainerspauseamd kubelet root dir varlibkubelet max pod kube reserv enabl ye kube reserv cpu memori ephemeralstorag sy reserv enabl sy reserv cpu memori ephemeralstorag balanc alg roundrobin kube apiserv inventori hostnam group kubemast http inventori hostnam els group kubemast length http els http group kubemast endif endif master chg instal sourc onlin,0.0,-1.0,-1.0,-1.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,-0.07
0.0,19.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/vars/Oracle Linux.yml,0.0,4.0,19.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,19.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,36.0,0.0,0.0,0.0,roles/os-harden/vars/Oracle Linux.yml,easzlab/kubeasz,4.61,packag pam ccred pam ccred packag pam passwdqc pam passwdqc packag pam cracklib pam cracklib nologin shell path sbinnologin shadow perm owner root group root mode passwd perm owner root group root mode env umask auth uid min auth gid min auth sy uid min auth sy uid max auth sy gid min auth sy gid max,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/minimize_access.yml,0.0,3.0,30.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,4.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,23.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,94.0,3.0,0.0,0.0,roles/os-harden/tasks/minimize_access.yml,easzlab/kubeasz,5.29,includ task find path loop control loop var outer item loop usrlocalsbin usrlocalbin usrsbin usrbin sbin bin env extra user path name chang shadow ownership root mode file dest etcshadow owner shadow path group shadow path mode shadow path name chang passwd ownership root mode file dest etcpasswd owner passwd path group passwd path mode passwd path name chang subinari access user group root file dest binsu owner root group root mode secur user allow none,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/kube-router/tasks/main.yml,0.0,10.0,60.0,5.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,5.0,2.0,0.0,0.0,6.0,1.0,0.0,3.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,44.0,0.0,5.0,0.0,0.0,0.0,0.0,2.0,0.0,7.0,201.0,9.0,0.0,3.0,roles/kube-router/tasks/main.yml,easzlab/kubeasz,6.2,name 创建cni 和kuberout 相关目录 file name item statedirectori item path optkubeimag optkubekubesystem name 准备配置 kuberout daemon set without ipv templat path path name 下载cni plugin copi src base dir bin item dest bin dir item mode item bridg hostloc loopback portmap block name 检查是否已下载离线kuberouter镜像 command base dir regist download info connect local run name 尝试推送离线docker 镜像若执行失败可忽略 copi src base dir item destoptkubeimag item item download path item paus path kuberout offlin busybox offlin ignor error name 获取kuberouter离线镜像推送情况 command optkubeimag regist imag info name kuberouter的离线镜像若执行失败可忽略 shell bin dir docker load optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim docker name kuberouter的离线镜像若执行失败可忽略 shell bin dir ctr path imag import optkubeimag item item paus path kuberout offlin busybox offlin ignor error item imag path contain runtim containerd name kuberout daemon set shell bin dir kubectl appli path run name 删除默认cni配置 file path stateabs name 轮询等待kuberout 运行视下载镜像速度而定 shell bin dir kubectl get pod kubesystem widegrep kuberoutergrep inventori hostnam awk print regist pod statu pod path run retri delay ignor error,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/suid_sgid.yml,0.0,3.0,28.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,25.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,0.0,4.0,120.0,4.0,0.0,1.0,roles/os-harden/tasks/suid_sgid.yml,easzlab/kubeasz,5.75,name remov suidsgid bit binari blacklist file path item mode state file follow ye fail flatten secur suid sgid system blacklist secur suid sgid blacklist name find binari suidsgid set shell find xdev perm perm type path proc print devnul regist sbit binari secur suid sgid remov unknown chang name gather file remov suidssgid remov system whitelist file set fact suid sbit path line differ secur suid sgid system whitelist secur suid sgid remov unknown name remov suidsgid bit binari except system user whitelist file path item mode state file follow ye flatten suid default differ secur suid sgid whitelist secur suid sgid remov unknown,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,7.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/os-harden/tasks/sysctl.yml,0.0,8.0,60.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,13.0,11.0,0.0,0.0,9.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,0.0,0.0,9.0,234.0,10.0,0.0,1.0,roles/os-harden/tasks/sysctl.yml,easzlab/kubeasz,6.39,name protect path file path path owner root group root mode name set daemon umask config rhelfamili nsa templat src etcsysconfigrhel sysconfig path dest etcsysconfiginit owner root group root mode ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut amazon name instal initramfstool apt name initramfstool state present updat cach ansibl famili debian secur kernel enabl modul load name rebuild initramf start pack modul modul load runtim disabl templat src path dest etcinitramfstoolsmodul owner root group root mode ansibl famili debian secur kernel enabl modul load regist initramf name updateinitramf command updateinitramf path name creat combin sysctldict overwrit defin set fact sysctl config sysctl config combin sysctl overwrit sysctl overwrit default name chang variou sysctlset look sysctlvar file document sysctl name path valu path sysctl set ye state present reload ye ignoreerror ye dict sysctl config name chang variou sysctlset rhelhost older look sysctlvar file document sysctl name path valu path state present reload ye ignoreerror ye dict sysctl rhel config ansibl distribut red hat ansibl distribut fedora ansibl distribut cent ansibl distribut major version ansibl distribut amazon name appli ufw default templat src path dest etcdefaultufw ufw manag default ansibl distribut debian ansibl distribut ubuntu tag ufw,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,8.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/chrony/defaults/main.yml,0.0,2.0,8.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,10.0,0.0,0.0,0.0,roles/chrony/defaults/main.yml,easzlab/kubeasz,3.32,ntp server path path path path path local network instal sourc onlin,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,5.0,6.0,39.0,-11.0,-11.0,-11.0,809ae824782802ec177a49d38f4885a7df183e0f,1.0,1573359910.0,1.0,yes,roles/kube-master/tasks/main.yml,100.0,14.0,78.0,1.0,0.0,0.0,0.0,11.0,11.0,11.0,1.0,0.0,0.0,1.0,1.0,5.0,1.0,0.0,0.0,13.0,1.0,0.0,4.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,60.0,0.0,2.0,0.0,2.0,0.0,0.0,5.0,0.0,14.0,291.0,15.0,0.0,2.0,roles/kube-master/tasks/main.yml,easzlab/kubeasz,6.7,name kubemast 二进制 copi src base dir bin item dest bin dir item mode item kubeapiserv kubecontrollermanag kubeschedul kubectl tag upgrad name kubernet 证书签名请求 templat path dest dir path tag chang cert name kubernet 证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare kubernet tag chang cert name aggreg proxy证书签名请求 templat path dest dir path name aggregatorproxy证书和私钥 shell dir bin dir cfssl gencert dir path cakey dir path config dir path profilekubernet path bin dir cfssljson bare aggregatorproxi block name basicauth 随机密码 shell pwd date nmdsumhead sed pwd pwdg base dir path echo pwd connect local regist tmp pass run name basicauth 随机密码 set fact basic auth pass tmp path basic auth enabl ye basic auth pass pwd tag restart master name path templat path dest dir path basic auth enabl ye tag restart master name master 服务的 systemd unit templat src item path destetcsystemdsystem item item path path path tag restart master upgrad name enabl master shell systemctl enabl kubeapiserv kubecontrollermanag kubeschedul ignor error name master shell systemctl daemonreload systemctl restart kubeapiserv systemctl restart kubecontrollermanag systemctl restart kubeschedul tag upgrad restart master name kubeconfig apiserv lineinfil dest path regexp server line server http inventori hostnam tag upgrad restart master name 以轮询的方式等待master服务启动完成 command bin dir kubectl get node regist result path retri delay tag upgrad restart master name basic auth user 用户rbac权限 templat path path basic auth enabl ye tag restart master name basic auth user 用户rbac权限 shell bin dir kubectl appli path basic auth enabl ye run tag restart master,0.0,0.0,-2.0,-8.0,-1.0,0.0,0.0,0.0,-1.0,0.0,0.0,0.0,-2.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-8.0,0.0,0.0,0.0,0.0,0.0,0.0,-1.0,0.0,-2.0,-28.0,-2.0,0.0,-1.0,-0.09
3.0,3.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/clean/clean_node.yml,0.0,0.0,3.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,1.0,6.0,0.0,0.0,0.0,roles/clean/clean_node.yml,easzlab/kubeasz,2.58,host node clean role clean,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
0.0,9.0,6.0,39.0,0.0,0.0,0.0,809ae824782802ec177a49d38f4885a7df183e0f,0.0,1573359910.0,0.0,no,roles/calico/defaults/main.yml,0.0,8.0,9.0,11.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,9.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,37.0,0.0,0.0,0.0,roles/calico/defaults/main.yml,easzlab/kubeasz,4.92,node multipl network tmp endpoint group etcd http endfor etcd endpoint tmp path calico ipvpool ipip alway felix log lvl warn autodetect method canreach group kubemast calico ver calico ver main calico path calico path calico offlin calico calico ver path,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0
