

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mining using Command-Line &mdash; radon-repository-miner 0.8.13 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Metrics extraction using Command-Line" href="cli.metrics.html" />
    <link rel="prev" title="CLI Reference" href="cli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> radon-repository-miner
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="cli.html">CLI Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Mining using Command-Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-docker">Using Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-local-machine">On local machine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cli.metrics.html">Metrics extraction using Command-Line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apis.html">APIs Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help Needed</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">radon-repository-miner</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="cli.html">CLI Reference</a> &raquo;</li>
        
      <li>Mining using Command-Line</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cli.mining.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mining-using-command-line">
<h1>Mining using Command-Line<a class="headerlink" href="#mining-using-command-line" title="Permalink to this headline">¶</a></h1>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span>usage: repo-miner mine [-h] [--branch BRANCH] [--exclude-commits EXCLUDE_COMMITS] [--exclude-files EXCLUDE_FILES] [--verbose] {fixing-commits,fixed-files,failure-prone-files} {github,gitlab} {ansible,tosca} repository dest

positional arguments:
  {fixing-commits,fixed-files,failure-prone-files}
                        the information to mine
  {github,gitlab}       the source code versioning host
  {ansible,tosca}       mine only commits modifying files of this language
  repository            the repository full name: &lt;onwer/name&gt; (e.g., radon-h2020/radon-repository-miner)
  dest                  destination folder for the reports

optional arguments:
  -h, --help            show this help message and exit
  -b, --branch BRANCH   the repository branch to mine (default: master)
  --exclude-commits EXCLUDE_COMMITS
                        the path to a JSON file containing the list of commit hashes to exclude
  --include-commits INCLUDE_COMMITS
                        the path to a JSON file containing the list of commit hashes to include
  --exclude-files EXCLUDE_FILES
                        the path to a JSON file containing the list of FixedFiles to exclude
  --verbose             show log
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running this command will generate the following report files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dest/fixing-commits.json</span></code> containing the list of fixing-commit hashes;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest/fixed-files.json</span></code> containing the list of FixedFile objects (if mined <cite>fixed-files</cite> or <cite>failure-prone-files</cite>);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dest/failure-prone-files.json</span></code> containing the list of FailureProne objects (if mined <cite>failure-prone-files</cite>);</p></li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To properly use this command you <strong>MUST</strong> add the following to your environment variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_ACCESS_TOKEN=&lt;paste</span> <span class="pre">your</span> <span class="pre">token</span> <span class="pre">here&gt;</span></code> if you are using the <code class="docutils literal notranslate"><span class="pre">github</span></code> argument. See <a class="reference external" href="https://docs.github.com/en/free-pro-team&#64;latest/github/authenticating-to-github/creating-a-personal-access-token">how to create a personal access token</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GITLAB_ACCESS_TOKEN=&lt;paste</span> <span class="pre">your</span> <span class="pre">token</span> <span class="pre">here&gt;</span></code> if you are using the <code class="docutils literal notranslate"><span class="pre">gitlab</span></code> argument. See <a class="reference external" href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html">how to create a personal access token</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TMP_REPOSITORIES_DIR=&lt;path/to/tmp/repositories/&gt;</span></code> to temporary clone the remote repository for analysis. Please, note that the repository will be cloned in this folder but not deleted. The latter step is left to the user, when and if needed. <strong>Note:</strong> this variable is not needed if using the Docker image.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-docker">
<h3>Using Docker<a class="headerlink" href="#using-docker" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p><strong>Setup environment variables</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GITHUB_ACCESS_TOKEN=***************</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GITLAB_ACCESS_TOKEN=***************</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Pull the Docker image</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">radonconsortium/repo-miner:latest</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Create a folder to share results</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">/tmp/repo-miner</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Mine</strong></p>
<blockquote>
<div><p><em>(using github)</em></p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span>docker run -v /tmp/repo-miner:/app  -e GITHUB_ACCESS_TOKEN=$GITHUB_ACCESS_TOKEN repo-miner:latest repo-miner mine failure-prone-files github ansible adriagalin/ansible.motd . --verbose
</pre></div>
</div>
<p><em>(using gitlab)</em></p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span>docker run -v /tmp/repo-miner:/app  -e GITLAB_ACCESS_TOKEN=$GITHUB_ACCESS_TOKEN repo-miner:latest repo-miner mine failure-prone-files github ansible adriagalin/ansible.motd . --verbose
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Access reports</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">/tmp/repo-miner</span></code></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="on-local-machine">
<h3>On local machine<a class="headerlink" href="#on-local-machine" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p><strong>Setup environment variables</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GITHUB_ACCESS_TOKEN=*****</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">GITLAB_ACCESS_TOKEN=*****</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">TMP_REPOSITORIES_DIR=/tmp/</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Create a working directory and move there</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">radon-example</span> <span class="pre">&amp;&amp;</span> <span class="pre">cd</span> <span class="pre">radon-example</span></code></p>
</div></blockquote>
</li>
<li><p><strong>(Optional) Create a virtualenv to avoid affecting the original environment</strong></p>
<blockquote>
<div><div class="highlight-RST notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-venv
python3 -m venv repo-miner-env
source repo-miner-env/bin/activate
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Install the package</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">repository-miner</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Mine</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">repo-miner</span> <span class="pre">mine</span> <span class="pre">failure-prone-files</span> <span class="pre">github</span> <span class="pre">ansible</span> <span class="pre">adriagalin/ansible.motd</span> <span class="pre">.</span> <span class="pre">--verbose</span></code></p>
</div></blockquote>
</li>
<li><p><strong>Access reports</strong></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">.</span></code> (Recall the working directory is <code class="docutils literal notranslate"><span class="pre">radon-example</span></code>)</p>
</div></blockquote>
</li>
</ol>
<p>Either way, you’ll get a similar output:</p>
<div class="highlight-RST notranslate"><div class="highlight"><pre><span></span>Mining adriagalin/ansible.motd [started at: 15:29]
Identifying fixing-commits from closed issues related to bugs
Identifying fixing-commits from commit messages
Saving fixing-commits
JSON created at ./fixing-commits.json
Identifying ansible files modified in fixing-commits
Saving fixed-files
JSON created at ./fixed-files.json
Identifying and labeling failure-prone files
Saving failure-prone files
JSON created at ./failure-prone-files.json
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli.metrics.html" class="btn btn-neutral float-right" title="Metrics extraction using Command-Line" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cli.html" class="btn btn-neutral float-left" title="CLI Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Stefano Dalla Palma

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>